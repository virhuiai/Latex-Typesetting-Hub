\documentclass{article}
\PassOptionsToPackage{no-math}{fontspec}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%% 本书所用 设置 及其选项%4.4.5
%%%%%%    版式设置
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%% 添加fntef选项，它将会自动加载下画线宏包CJKfntef
% \usepackage[space, fntef, 
% zihao=false,scheme=chinese,heading=true]{ctex}

\usepackage[heading=true
,scheme=chinese%中文方案
,fontset=none%不使用默认的字体设置
,space=auto%自动调整中英文间距
]{ctex}
\usepackage{ydoc-desc}
\usepackage{ydoc-doc}
\usepackage{ydoc-code}
\usepackage{ydoc-expl}
\usepackage{pdfcolparcolumns}

%
% 字体和符号宏包
%
%\setmainfont{ } %一般就是论文中西文部分默认使用的字体。
%通常到 Word 2003 为止，这里的默认字体都会是 Times New Roman。Linux 下也有同名字体。
\setmainfont{cmun}[
  Extension       = .otf,
  UprightFont     = *rm,
  ItalicFont      = *ti,
  SlantedFont     = *sl,
  BoldFont        = *bx,
  BoldItalicFont  = *bi,
  BoldSlantedFont = *bl,
]
%\setsansfont{ } %是西文默认无衬线字体。一般可能出现在大标题等显眼的位置。
%这一部分经常碰上的字体会是 Helvetica/Arial。
%Linux下也有 Helvetica，前缀是 -adobe-helvetica-* 。
%这是一个古老的非抗锯齿版本（也就是不用 fontconfig 配置而使用 xfontsel），
%所以如今的 XWindow 环境应该不会再使用它作为屏幕字体。
%而 Windows 下的 Word 则经常会默认为 Arial ————之前我说Windows下也能看见Helvetica，应该是源自一些错误的印象。
%经再次确认，Word 和 Windows 本身都不自带 Helvetica。感谢@梁海 君指出 Windows 下没有 Helvetica。
\setsansfont{cmun}[
  Extension      = .otf,
  UprightFont    = *ss,
  ItalicFont     = *si,
  BoldFont       = *sx,
  BoldItalicFont = *so,
]
%\setmonofont{ }%是西文默认的等宽字体。一般用于排版程序代码。
%Courier 或者 Courier New 是常见的 Word 选项。Linux 下一般会有 Courier，但很少能看见 Courier New。
\setmonofont{cmun}[
  Extension      = .otf,
  UprightFont    = *btl,% light version
  ItalicFont     = *bto,%  light version
  BoldFont       = *tb,
  BoldItalicFont = *tx,
]

% 设置主要文字 https://zhuanlan.zhihu.com/p/260989874
% 首先是对整篇文档主要文字的设置，包括默认字体、加粗字体和斜体字体，
\setCJKmainfont{方正书宋_GBK}%方正书宋_GBK.TTF  设置文本的中文有衬线字体为“方正书宋_GBK”
\setCJKsansfont{方正黑体简体}%方正黑体_GBK.TTF  设置文本的中文无衬线字体为“方正黑体简体”
\setCJKmonofont{方正书宋简体}%方正仿宋_GBK.TTF  设置文本的中文等宽字体为“方正书宋简体”
% % \usepackage{newverbs}
\usepackage{tabularx}

\newenvironment{options}{%
    \def\cstart{\begingroup\ttfamily\par\noindent\ignorespaces}%
    \def\csep{\endgroup\begingroup\list {}{}\item \relax}%
    \def\cend{\endlist\par\medskip\endgroup\cstart}%
    \cstart
}{%
    \endgroup
}

\makeatletter

\makeatother

% \title{The \textsf{texdef} script}
\title{\textsf{texdef}脚本}
\author{Martin Scharrer \\
\texttt{martin@scharrer-online.de}\\
翻译：virhuiai@qq.com\\
VC: \url{https://sourceforge.net/projects/texdef/}\\[-1.5em]
% CTAN: http://www.ctan.org/pkg/texdef \\
% VC: https://sourceforge.net/projects/texdef/
}
\date{Version 1.9 -- 2020/09/27}

\begin{document}
\parindent=0pt
\maketitle


\begin{abstract}
\noindent
This Perl script shows the definition of \LaTeX\ commands in a similar way as the \TeX\ primitive \Macro\show.
It is intended to allow users to quickly see the definitions of user level or internal package macros as well as the
values of registers. The given commands are compiled internally with \LaTeX\ and the output of \Macro\show is formatted
and shown to the user.

\noindent
% 这个 Perl 脚本，使用和 \TeX\ 原始命令 \Macro\show 类似的方式，展示 \LaTeX\ 命令的定义。
% 它旨在让用户能快速查看到命令的定义以及registers的值，不论是用户自定义的，还是宏包包含。
% 指定的命令 are compiled internally with \LaTeX\ and 结果 of \Macro\show 被格式化并展示给用户。
这个 Perl 脚本以与 \TeX\ 原始命令 \Macro\show 类似的方式显示 \LaTeX\ 命令的定义。
它旨在允许用户快速查看用户级别或内部包宏的定义以及寄存器的值。给定的命令在 \LaTeX\ 中被内部编译，
\Macro\show 的输出被格式化并显示给用户。
\end{abstract}

\section{Usage\\用法}

The script executable is called \texttt{texdef} (or maybe \texttt{texdef.pl}).
A normal installation is supposed to also install it as \texttt{latexdef} (e.g.\ using a symlink to \texttt{texdef}) in order to 
allow for quick access to the \LaTeX\ format. Further format shortcuts are possible as explained in the installation section.
% 这个可执行脚本是 \texttt{texdef} (或 \texttt{texdef.pl}).
% 正常安装后，\texttt{texdef} 也会被软链接为文件 \texttt{latexdef}，
% 以方便你快速访问 \LaTeX\ 格式下的命令定义。 在后面的安装部分会介绍更多指定了格式的快捷方式。

这个脚本的可执行文件名为 \texttt{texdef}（或者可能是 \texttt{texdef.pl}）。正常安装也应该将其安装为 \texttt{latexdef}（例如使用到 \texttt{texdef} 的符号链接），
以便快速访问 \LaTeX\ 格式。在安装部分中解释了可能的其他格式快捷方式。
%todo 软链接 展示

\parindent=0pt
\DescribeScript{texdef}[<options>]~<commandname>~[<commandname>~!\ldots!]
\DescribeScript{latexdef}[<options>]~<commandname>~[<commandname>~!\ldots!]

% \parindent=0pt
% \DescribeScript{texdef}[<options>]~<命令名称>~[<命令名称>~!\ldots!]
% \DescribeScript{latexdef}[<options>]~<命令名称>~[<命令名称>~!\ldots!]

Other program names are possible. See the \texttt{tex} option.  Command names do not need to start with `|\|'.

% 程序名称也可能其他名称，见 \texttt{tex} 选项的说明.  命令名称不需要用 `|\|' 开始。
其他程序名称也是可能的。请参见 \texttt{tex} 选项。命令名称不需要以 `|\|' 开头。


\subsection*{Options\\选项}

% \addvspace{\parskip}
\begin{parcolumns}[rulebetween=true,colwidths={2=.6\linewidth}]{2}
  \colchunk{可以使用以下选项：}
  \colchunk{The following options can be used:}
\end{parcolumns}


\par\medskip  

\begin{options}
--tex \MacroArgs<format>, -t \MacroArgs<format>    \csep Use given format of TeX: `tex', `latex', `context'.
Variations of `tex' and `latex', like `luatex', `lualatex', `xetex', `xelatex' are supported.
The postfix `-dev' for develop versions of the format is also supported (e.g. `latex-dev').
The default is given by the used program name: `texdef' -> `tex', `latexdef' -> `latex', etc.%\cend

% \csep 
% \vspace*{-\parskip}
使用TeX的给定格式：`tex'、'latex'、'context'。
支持`tex'和'latex'的变种，例如'luatex'、'lualatex'、'xetex'、'xelatex'。
还支持格式开发版本的后缀`-dev'（例如'latex-dev'）。
默认值由所使用的程序名称确定：`texdef'-> `tex'，'latexdef'-> `latex'等。
\cend
\end{options}
% \csep 指定TeX格式: `tex', `latex', `context'.
% `tex'和'latex'的变体, 如`luatex', `lualatex', `xetex', `xelatex' 都是支持的.
% 带`-dev'后缀的开发版本格式也是支持的(如：'latex-dev').
% 默认的格式是由我们的脚本名决定的: `texdef' -> `tex', `latexdef' -> `latex', etc.\cend


% \begin{options}
% \end{options}

\begin{options}
  
  --texoptions \MacroArgs<options>                   \csep 使用给定的选项调用 \LaTeX/\TeX{} 。\cend
  --source, -s                                       \csep  尝试显示命令定义的原始源代码。（L）\cend
  --value, -v                                        \csep 显示命令的值 (i.e. \Macro\the\AlsoMacro\command).\cend
  --preamble, -P                                     \csep 显示导言区中命令的定义。\cend
  --Environment, -E                                  \csep 将指定的命令视为环境名称。 如果指定了要查看的命令 \texttt{foo} ，它将同时显示 \Macro\foo 和 \Macro\endfoo 的定义。（L）\cend
  --beforeclass, -B                                  \csep 显示在 \Macro\documentclass 之前的命令定义  .\cend
  --package \MacroArgs<pkg>, -p \MacroArgs<pkg>      \csep 加载指定的 tex-file, package 或 module， depending on whether `*tex', `*latex'
                                                       or `context' is used. 对 LaTeX，\MacroArgs<pkg> 可以是带参数的 \MacroArgs[<参数>]\MacroArgs{<pkgname>}，也可以是不带参数的 \MacroArgs{<pkgname>}..\cend
  --class \MacroArgs<class>, -c \MacroArgs<class>    \csep (仅LaTeX) 指定加载的文类(默认是`article').
                                                       \MacroArgs<class> 可以是带参数的 \MacroArgs[<参数>]\MacroArgs{<classname>}，也可以是不带参数的 \MacroArgs{<classname>}.\cend
  --environment \MacroArgs<env>, -e \MacroArgs<env>  \csep 展示命令在指定的环境中的定义 \MacroArgs<env>.\cend
  --othercode \MacroArgs<code>, -o \MacroArgs<code>  \csep 在展示命令的定义前，在导言区添加另外的代码。
                                                       这可以用来加载一些宏包，如 PGF/TikZ 宏包。\cend
  --before \MacroArgs<code>, -b \MacroArgs<code>     \csep 在展示命令的定义前插入的 \MacroArgs<code> 。
                                                       \MacroArgs<code> 可以是任意的 TeX 代码且 doesn't need be be balanced。\cend
  --after  \MacroArgs<code>, -a \MacroArgs<code>     \csep 在展示命令的定义后插入的 \MacroArgs<code> 。
                                                       \MacroArgs<code> 可以是任意的 TeX 代码且 doesn't need be be balanced.\cend
  --find, -f                                         \csep 查找指定的命令，其他定义所在的文件名。（L）\cend
  --Find, -F                                         \csep 查找指定的命令，其他定义所在的文件的完整路径。（L）\cend
  --list, -l                                         \csep 列出给定包的用户级命令列表。（L）\cend
  --list-defs, -L                                    \csep 列出给定包的用户级命令及其简短定义的列表。（L）\cend
  --list-all, -ll                                    \csep 列出给定包的所有命令列表。（L）\cend
  --list-defs-all, -LL                               \csep 列出给定包的所有命令及其简短定义的列表。（L）\cend
  --ignore-cmds \MacroArgs<cs,cs,..>,  -i            \csep 列表（以上四种）中忽略指定的命令，命令间用逗号分隔。(M)\cend
  --ignore-regex \MacroArgs<regex,..>, -I            \csep 列表（以上四种）中忽略匹配指定的Perl正则的命令，正则间用逗号分隔。 (M)\cend
  --pgf-keys, -k                                     \csep Takes commands as \pkg{pgfkeys} and displays their definitions. Keys must use the full path but the common `.\@cmd' prefix is applied.\cend
  --pgf-Keys, -K                                     \csep Takes commands as \pkg{pgfkeys} and displays their definitions. Keys must use the full path.\cend
  --version, -V                                      \csep 单独使用时，展示出本脚本的版本号。
                                                       如果同 -p 或 -c 选项一起使用，则显示宏包或文类的版本号。\cend
  --edit                                             \csep 打开包含宏定义的文件. Uses |--Find| and |--source|.
                                                           If the source definition can not be found the definition is printed as normal instead. \cend
  --editor <editor>                                  \csep 用来设置上个选项所使用的打开文件的编辑器软件。If not used the environment variables |TEXDEF_EDITOR|, |EDITOR| and
                                                       |SELECTED_EDITOR| are read in this order. 如果这些都没有被设置，会尝试使用默认的一些编辑器列表。
                                                       The |<editor>| string can include `|%f|' for the filename, `|%n|' for
                                                       the line number and `|%%|' for a literal `|%|'.  If no `|%|' is used `|+%n %f|' is added to
                                                       the given command.\cend
  --tempdir <directory>                              \csep 指定一个现有目录用于存放临时文件.\cend
  --help, -h                                         \csep 打印此帮助并退出.\cend
\end{options}

\noindent \textbf{Notes:}\\
长选项会有对应的短选项，只要仍是唯一的。短选项可以组合使用。
 If the option `environment', `before' and `after' are used toegether the
 produced code will be inserted in the given order (reversed order for `after').\\
 (M) = 该选项可以多次给出。\\
 (L) = 仅针对LaTeX。Requires the packages `filehook' and `currfile'.


\section{安装}\label{sec:install}

本脚本的最新官方版本在CTAN的\url{http://mirrors.ctan.org/support/texdef/texdef.pl}。
最新的开发版本（可能不稳定！）可以从源代码库中获得：
\url{https://bitbucket.org/martin_scharrer/texdef/src/tip/texdef.pl}.

这个脚本（|texdef.pl|）需要简单的重命名为|texdef|并被复制(或软链)到适合可执行文件的位置。
例如，|PATH|中的某个目录, 例如在 Linux/Unix 上，复制到 |/usr/bin| 或 |/usr/local/bin|.
脚本需要设置为可执行的（\emph{executable}）, 例如，在Linux/Unix上使用|chmod +x texdef.pl|设置。
对于微软的Windows系统不需要做可执行设置.。

这个脚本可以显示不同格式的TeX命令的定义
(|tex|, |etex|, |latex|, |pdftex|, |pdfetex|, |pdflatex|, |xetex|, |xelatex|, |context|, \ldots).
可以使用命令行选项或\emph{script name}指定使用的TeX格式,
例如，如果脚本名为 |texdef| 且不指定格式选项，则格式为 |tex|, 但如果名为 |latexdef| 且不指定格式选项，则格式为
 |latex| 等等。
可惜把文件复制几份不同的名字, 但如果系统支持，可以只创建不同名称的软链（\emph{symbolic links}）。
至少，|texdef| 和 |latexdef|这两种变体默认就被安装了。


\subsection*{Requirements}

The |texdef| program is a Perl script which needs a Perl interpreter to work.
Informations about installing Perl can be found at \url{http://www.perl.org/get.html}.

The script calls a TeX compiler (|tex|, |latex|, \ldots) to display the definition of commands/macros.
Therefore \LaTeX\ must also be installed.
Informations about installing \LaTeX\ can be found at \url{http://www.latex-project.org/ftp.html}.




\subsection*{Quick Install Nodes for Linux/Unix}

\begin{verbatim}
    cp texdef.pl /usr/local/bin/
    cd /usr/local/bin
    ln -s texdef.pl texdef
    ln -s texdef.pl latexdef
    ln -s texdef.pl etexdef
    ln -s texdef.pl luatexdef
    ln -s texdef.pl lualatexdef
    ln -s texdef.pl pdftexdef
    ln -s texdef.pl pdflatexdef
    ln -s texdef.pl xetexdef
    ln -s texdef.pl xelatexdef
    ln -s texdef.pl 'some other TeX format of your choice'
\end{verbatim}

\noindent or use the Makefile (defaults to |/usr/local/bin|)

\begin{verbatim}
    make install INSTALLDIR=/your/path
\end{verbatim}

\section{范例}
展示 \Macro\chapter 在不同的文类中的定义 (\cls{article} (默认), \cls{book} 和 \cls{scrbook}):

\begin{verbatim}
latexdef chapter
latexdef -c book chapter
latexdef -c scrbook chapter
\end{verbatim}

展示同一文类 \cls{book} 使用不同的参数,\Macro\textwidth 值的不同:

\begin{verbatim}
latexdef -c [a4paper]{book} -v paperwidth
latexdef -c [letter]{book}  -v paperwidth
\end{verbatim}

展示 TikZ 的 \Macro\draw 命令，在环境 \env{tikzpicture} 外部和内部定义的不同:

\begin{verbatim}
latexdef -p tikz draw
latexdef -p tikz --env tikzpicture draw
\end{verbatim}

Show definition of TikZ's \Macro\draw inside a node, inside a \cls{beamer} frame in \opt{handout} mode:

\begin{verbatim}
latexdef -c [handout]beamer -p tikz --env frame \
    --env tikzpicture -b '\node {' -a `};' draw
\end{verbatim}

列出 LaTeX 包 \pkg{xspace} 定义的所有用户级命令序列（宏）:

\begin{verbatim}
latexdef -l -p xspace
\end{verbatim}


\section{Changelog}

\subsection*{v1.9 from 2020/09/27}
\begin{itemize}
 \item Added support for develop versions of the formats, e.g.\ "latex-dev".
\end{itemize}

\subsection*{v1.8c from 2010/01/15}
\begin{itemize}
 \item Changed path printing format to native format of the used OS 
      (e.g. under Windows file paths now habe `\textbackslash' instead of `/')
\end{itemize}

\subsection*{v1.8a from 2018/03/28}
\begin{itemize}
 \item Further fixes of braces in regexs to avoid ``Unescaped left brace in regex is deprecated'' warnings or errors.
\end{itemize}

\subsection*{v1.8 from 2018/03/25}
\begin{itemize}
 \item Added "dvitex" and "dvilatex" as formats. These will set DVI mode on "tex" or "latex".
 \item Escaped further braces in regexs to avoid warnings or errors.
 \item Added option "--texoptions" to allow the passing of compiler options for special cases.
\end{itemize}

\subsection*{v1.7c from 2017/12/09}
\begin{itemize}
 \item Fixed 'Unescaped left brace in regex is deprecated' warning.
   Thanks goes to Paulo Cereda <cereda.paulo@gmail.com> for providing the patch.
\end{itemize}

\subsection*{v1.7b from 2012/05/15}
\begin{itemize}
 \item Added support for \Macro\chardef, \Macro\countdef, \Macro\dimendef, \Macro\mathchardef, \Macro\myskip, \Macro\skipdef and \Macro\toksdef.
 \item Added support for \Macro\newbox, \Macro\newcount, \Macro\newdimen, \Macro\newif, \Macro\newinsert, \Macro\newread, \Macro\newskip, \Macro\newtoks, \Macro\newwrite.
 \item Added support for \Macro\newif and \Macro\newcount.
 \item Changed internal processing order to put more frequently used elements first.
\end{itemize}

\subsection*{v1.7a from 2012/05/08}
\begin{itemize}
 \item Fix for currfile v0.6.
\end{itemize}

\subsection*{v1.7 from 2012/05/07}
\begin{itemize}
 \item Changed "--help" to return status code 0.
 \item Changed Windows default editor to texworks. Fixed If-statement.
 \item Fixed bug which reported name of included subpackages.
 \item Added option "--edit".
 \item Added "--editor" option and better editor handling.
 \item Added variable substitution for editor.
 \item Added support for "TEXDEF\_EDITOR" variable. Added Mac "open" command.
 \item Fixed for behaviour when -s is used (correct name in message; do not follow protected macros etc.)
\end{itemize}

\subsection*{v1.6 from 2012/05/02}
\begin{itemize}
 \item Changed implementation of -E option to work better with new environment source code.
 \item Added code to detect environment source definitions.
 \item Added -E option.
 \item Changed "flavour" to "format".
 \item Added support for \Macro\let.
 \item Added fallback for when the source code can not be found. Added support for -F with "latex.ltx".
\end{itemize}

\subsection*{v1.5 from 2012/04/29}
\begin{itemize}
 \item Added experimental --source option to show source code of the definitions.
 \item Script now works correctly under MS Windows.
\end{itemize}

\subsection*{v1.4 from 2011/07/28}
\begin{itemize}
 \item Added -F option to display file path.
 \item Added basic support for pdfkeys using -k and -K options.
 \item Added -V option to print version numbers of LaTeX packages or classes.
 \item Added `--tempdir' option to specify the location of the temporary files. Useful for debugging.
\end{itemize}

\end{document}















% % \tableofcontents





% \end{document}

