<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>vuedraggable 测试实例</title>
    <script src="./assets/vue.global.min.js"></script>
    <script src="./assets/Sortable.min.js"></script>
    <script src="./assets/vuedraggable.umd.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./assets/pure-min.css">
</head>

<body style="padding:10px;">
    <div id="app" class="demo">
        <div class="pure-g">
            <div class="pure-u-1-3">
                <h2>nested-draggable</h2>
                <nested-draggable :tasks="list" />
            </div>
            <div class="pure-u-1-3">{{list}}</div>
        </div>
    </div>
    <script>
        // 定义全局组件
        const NestedDraggable = {
            props: {
                tasks: {
                    required: true,
                    type: Array
                }
            },
            template: `
            <draggable
              tag="ul"
              :list="tasks"
              :group="{ name: 'g1' }"
              item-key="name"
            >
              <template v-slot:item="{ element }">
                <li>
                  <p>{{ element.name }}</p>
                  <nested-draggable v-if="element.tasks && element.tasks.length" :tasks="element.tasks" />
                </li>
              </template>
            </draggable>`
        };

        // 创建 Vue 实例
        const app = Vue.createApp({
            //注册draggable组件
            // components: {
            //     'draggable': window.vuedraggable
            // },
            data() {
                return {
                    list: [
                        {
                            name: "task 1",
                            tasks: [
                                {
                                    name: "task 2",
                                    tasks: []
                                }
                            ]
                        },
                        {
                            name: "task 3",
                            tasks: [
                                {
                                    name: "task 4",
                                    tasks: []
                                }
                            ]
                        },
                        {
                            name: "task 5",
                            tasks: []
                        }
                    ]
                }
            }
        });
        app.component('draggable', window.vuedraggable);
        app.component('nested-draggable', NestedDraggable);
        app.mount('#app');


    </script>

</body>

</html>