% %\endinput

% %%%% end of input file [bigpic]

% %\InputFile:mouth
% %%%% this is input file [mouth]
% %\tracingmacros=2 \tracingcommands\tracingmacros
% %\subject[mouth] Category Codes \nl and Internal States
% \endofchapter
% \chapter{Category Codes and Internal States\\类别码和内部状态}\label{mouth}

% When characters are read, 
% \TeX\ assigns them
% category codes. The reading mechanism has three internal
% states, and transitions between these states are effected
% by category codes of characters in the input.
% This chapter describes how \TeX\ reads its input and
% how the category codes of characters influence the
% reading behaviour. Spaces and line ends are discussed.

% 当字符被读取时，\TeX 将为它们分配类别码。读取机制具有三个内部状态，并且这些状态之间的转换受输入中字符的类别码的影响。本章描述了 \TeX 如何读取其输入以及字符的类别码如何影响读取行为。还讨论了空格和换行符。

% \begin{inventory}
% \item [\cs{endlinechar}]  
%       The character code of the end-of-line character 
%       appended to input lines.
%       \IniTeX\ default:~13.

%       附加到输入行末尾的行结束符的字符码。
% \IniTeX 默认值：13。
% \item [\cs{par}]  
%       Command to close off a paragraph and go into vertical mode.
%       Is generated by empty lines.

%       用于结束段落并进入垂直模式的命令。
% 由空行生成。
% \item [\cs{ignorespaces}]   
%       Command that reads and expands until something is
%       encountered that is not a \gr{space token}.

%       读取并展开直到遇到非\gr{space token}的命令。
% \item [\cs{catcode}] 
%       Query or set category codes.

%       查询或设置类别码。
% \item [\cs{ifcat}]  
%       Test whether two characters have the same category code.

%       检查两个字符是否具有相同的类别码。
% \item [\cs{\char32}]
%       Control space.
%       Insert the same amount of space that a space token would
%       when \cs{spacefactor}${}=1000$.

%       控制空格。
% 插入与空格记号相同量的空格，当 \cs{spacefactor}${}=1000$ 时。%控制空格  不可见空格  % \verb*| |
% \item [\cs{obeylines}]
%       Macro in plain \TeX\ to make line ends significant.

%       plain \TeX 中使换行符具有意义的宏。
% \item [\cs{obeyspaces}]
%       Macro in plain \TeX\ to make (most) spaces significant.

%       plain \TeX 中使（大多数）空格具有意义的宏。
% \end{inventory}


% %\point Introduction
% \section{Introduction\\引言}

% \TeX's input processor scans input lines from a file or terminal, and
% makes tokens out of the characters.
% The input processor can be viewed as
% a simple finite state automaton with three internal states; 
% depending on the state its scanning behaviour may differ.
% This automaton will be treated here both from the point of view of the
% internal states and of the category codes governing the
% transitions.

% \TeX\ 的输入处理器从文件或终端扫描输入行，并将字符转换为记号。输入处理器可以看作是一个具有三个内部状态的简单有限状态自动机；根据状态的不同，其扫描行为可能有所不同。在这里，将从内部状态和控制状态转换的类别码的角度对该自动机进行讨论。


% %\point Initial processing
% \section{Initial processing\\初始处理}

% Input from a file (or from the user terminal, but this
% will not be mentioned specifically
% most of the time) is handled one line at a time.
% Here follows a discussion of what exactly is an input line
% for \TeX.

% 从文件（或用户终端，但大部分时间不会具体提到）获取的输入按行处理。下面讨论的是对于 \TeX\ 来说，什么是一个输入行。



% Computer systems differ with respect to 
% \term line! input\par\term line! end\par\term machine independence\par
% the exact definition of an input
% \mdqon
% line. The carriage return/""line feed
% \mdqoff
% \awp
% \message{slash-dash}%
% sequence terminating a line is most common,
% but some systems use just a line feed, and
% some systems with fixed record length (block) storage do not have
% a line terminator at all. Therefore \TeX\ has its
% own way of terminating an input line. 

% 关于%\term line! input\par\term line! end\par\term machine independence\par 
% 输入行的确切定义在不同的计算机系统中有所不同。以回车/换行\mdqon
% % \term line! input\mdqoff
% % \message{slash-dash}%
% 序列作为行终止符最为常见，但有些系统仅使用换行符，而一些固定记录长度（块）存储的系统根本没有行终止符。因此，\TeX\ 有自己的方式来终止一个输入行。

% % 计算机系统在对输入行的确切定义方面存在差异。回车/换行序列作为行终止符最为常见，但有些系统仅使用换行符，而一些使用固定记录长度（块）存储的系统根本没有行终止符。\TeX 有其自己的终止输入行的方式。


% \begin{enumerate}
% \item An input line is read from an input file  (minus the
% line terminator, if any).

% 从输入文件中读取一个输入行（如果有行终止符，则不包括终止符）。
% \item Trailing spaces are removed (this is for the systems
% with block storage, and it prevents confusion because these
% spaces are hard to see in an editor).

% 删除行尾的空格（这适用于使用块存储的系统，它可以避免在编辑器中难以看到这些空格时引起混淆）。
% \item The \cstoidx endlinechar\par, by default \gram{return}
% (code~13) is appended.
% If the value of \cs{endlinechar} is negative
% \label{append:elc}%
% or more than~255 (this was 127 in versions of \TeX\ older
% than version~3; see page~\pageref{2vs3} for more differences),
% no character is appended. 
% The effect then is the same as
% if the line were to end with a comment character.

% 默认情况下，追加一个\cstoidx endlinechar\par，即回车符（代码为 13）。如果 \cs{endlinechar} 的值为负数或大于 255（在早于版本 3 的 \TeX\ 中为 127；有关更多差异，请参见第 \pageref{2vs3} 页），则不追加任何字符。此时的效果与行以注释字符结束相同。
% \end{enumerate}


% Computers may also differ in the character encoding
% (the most common schemes are \ascii{} and \ebcdic{}), so \TeX\
% converts the characters that are read from the file to its
% own character codes. These codes are then used exclusively,
% so that \TeX\ will perform the same on any system.
% For more on this, see Chapter~\ref{char}.

% 计算机在字符编码方面也可能存在差异（最常见的方案是 \ascii{} 和 \ebcdic{}），因此 \TeX{} 将从文件中读取的字符转换为其自己的字符编码。然后，这些编码将被独占使用，以便 \TeX{} 在任何系统上执行相同的操作。有关更多信息，请参阅第~\ref{char} 章。



% %\point Category codes
% \section{Category codes\\类别码}

% Each of the 256 character codes (0--255) has an
% \term category codes\par
% associated category code, though not necessarily always the same one.
% There are 16 categories, numbered 0--15. 
% When scanning the input, \TeX\
% thus forms character-code--category-code pairs.
% The input processor sees only these pairs; from them are formed
% character tokens, control sequence tokens, and parameter tokens.
% These tokens are then passed to \TeX's expansion and execution
% processes.

% 每个字符编码（0--255）都有一个相关的类别码，尽管不一定总是相同的。共有16个类别，编号为0--15。在扫描输入时，\TeX{} 形成了字符编码--类别码对。输入处理器仅看到这些对；从中形成字符记号、控制序列记号和参数记号。然后将这些记号传递给 \TeX{} 的扩展和执行过程。

% A~character token is a character-code--category-code
% pair that is passed unchanged.
% A~control sequence token consists of one or more characters
% preceded by an escape character; see below.
% Parameter tokens are also explained below.

% 字符记号是传递的字符编码--类别码对，不做任何改变。控制序列记号由一个或多个字符组成，前面带有转义字符；请参阅下文。参数记号也将在下文中进行解释。

% This is the list of the categories, together with a brief
% description. More elaborate explanations follow in this and
% later chapters.

% 下面是类别码的列表，以及简要说明。在本章和后续章节中，将提供更详细的解释。


% \begin{enumerate} \message{set counter}%\SetCounter:item=-1
% \setcounter{enumi}{-1}
% \item\label{ini:esc} Escape character; this signals the start of a control
%       sequence. \IniTeX\ makes the backslash \verb-\- (code~92)
%       an escape character.

%       转义字符；表示控制序列的开始。\IniTeX\ 将反斜杠 \verb-\-（代码 92）作为转义字符。%0和领导，领
% \item Beginning of group; such a character causes \TeX\ to enter a new
%       level of grouping. The plain format makes the open brace \verb-{-
% \mdqon
%       a beginning"-of-group character.
% \mdqoff

% 组开始；此类字符导致 \TeX\ 进入一个新的分组级别。Plain \TeX\ 将左花括号 \verb-{-
% \mdqon
% 作为组开始字符。
% \mdqoff
% \item End of group; \TeX\ closes the current level of grouping.
%       Plain \TeX\ has  the closing brace \verb-}- as end-of-group
%       character.

%       组结束；\TeX\ 关闭当前的分组级别。Plain \TeX\ 将右花括号 \verb-}- 作为组结束字符。
% \item Math shift; this is the opening and closing delimiter for
%       math formulas. Plain \TeX\ uses the dollar sign~\verb-$-
%       for this.

%       数学模式切换；用于数学公式的开启和关闭定界符。Plain \TeX\ 使用美元符号 \verb-$-
%       作为数学模式切换符号。%3 全过来是 m,3通商
% \item Alignment tab; the column (row) separator in tables
%       made with \cs{halign} (\cs{valign}). In plain
%       \TeX\ this is the ampersand~\verb-&-.

%       对齐制表符；在使用 \cs{halign}（\cs{valign}）制作的表格中作为列（行）的分隔符。在 plain
%       \TeX\ 中，这是和号 \verb-&-。%4 和 & 很像，另&像一个人坐着，整齐的坐着。
% \item\label{ini:eol} End of line; a character that \TeX\ considers
%       to signal the
%       end of an input line.
%       \IniTeX\ assigns this code to the \gram{return}, that is, code~13.
%       Not coincidentally, 13~is also the value that \IniTeX\
%       assigns to the \cs{endlinechar} parameter; see above.
% \awp

% 行结束；\TeX\ 认为此字符表示输入行的结束。
% \IniTeX\ 将此代码分配给 \gram{return}，即代码 13。
% 巧合的是，13 也是 \IniTeX\ 分配给 \cs{endlinechar} 参数的值；参见上文。
% \awp%5 行结束 回车 5像拐
% \item Parameter character; this indicates parameters for macros.
%       In plain \TeX\ this is the hash sign~\verb-#-.

%       参数字符；用于指示宏的参数。在 plain \TeX\ 中，这是井号 \verb-#-。%6
% \item Superscript; this precedes superscript expressions 
%       in math mode. It is also used to denote character
%       codes that cannot
%       be entered in an input file; see below. 
%       In plain \TeX\ this is the circumflex~\verb-^-.

% 上标；在数学模式中用于表示上标表达式。还用于表示无法在输入文件中输入的字符代码；参见下文。
% 在 plain \TeX\ 中，这是插入符号 \verb-^-。%7上八下
% \item Subscript; this precedes subscript expressions in math mode.
%       In plain \TeX\ the underscore~\verb-_- is used for this.

%       下标；在数学模式中用于表示下标表达式。在 plain \TeX\ 中，下划线 \verb-_- 用于表示下标。%下巴
% \item Ignored; characters of this category are removed
%       from the input, and have therefore no influence on
%       further \TeX\ processing. In plain \TeX\ this is
%       the \gr{null} character, that is, code~0.

%       忽略；此类别的字符从输入中被删除，因此对后续的 \TeX\ 处理没有影响。在 plain \TeX\ 中，这是空字符，即代码 0。%9 go ignore
% \item\label{ini:sp} Space; space characters receive special treatment.
%       \IniTeX\ assigns this category to the \ascii{} \gr{space}
%       character, code~32.

%       空格；空格字符接受特殊处理。\IniTeX\ 将此类别分配给 ASCII 的空格字符，代码 32。%10 
% \item\label{ini:let} Letter; in \IniTeX\ only the characters \n{a..z}, \n{A..Z}
%       are in this category. Often, macro packages make
%       some `secret' character (for instance~\n@) into a letter.

%       字母；在 \IniTeX\ 中，只有字符 \n{a..z} 和 \n{A..Z} 属于此类别。通常，宏包会将某些“秘密”字符（例如 \n@）归类为字母。%letter 1
% \item\label{ini:other} Other; \IniTeX\ puts everything that is 
%       not in the other categories into this category. Thus
%       it includes, for instance, digits and punctuation.

%       其他；\IniTeX\ 将不属于其他类别的所有内容归类为此类别。因此，它包括数字和标点符号等内容。%other t two 2
% \item Active; active characters function as a \TeX\ command,
%       without being preceded by an escape character.
%       In plain \TeX\ this is only the tie character~\verb-~-,
%       which is defined to produce
%       an unbreakable space; see page~\pageref{tie}.

%       活动字符；活动字符充当 \TeX\ 命令，而不需要在前面加上转义字符。在 plain \TeX\ 中，只有波浪号 \verb-- 是活动字符，它被定义为生成不可分割的空格；参见第\pageref{tie} 页。%13 要生 活动
% \item\label{ini:comm} Comment character; from a comment character onwards,
%       \TeX\ considers the rest of an input line to be
%       comment and ignores it. In \IniTeX\ the  per cent sign \verb-%-
%       is made a comment character.

%       注释字符；从注释字符开始，\TeX\ 将输入行的剩余部分视为注释并忽略它。在 \IniTeX\ 中，百分号符号 \verb-%- 被设为注释字符。%14 逝
% \item\label{ini:invalid} Invalid character; this category is for characters that
%       should not appear in the input. \IniTeX\ assigns the
%       \ascii\ \gr{delete} character, code~127, to this category.

%       无效字符；此类别适用于不应出现在输入中的字符。\IniTeX\ 将 ASCII 的删除字符，即代码 127，归类为此类别。%15 妖 无
% \end{enumerate}

% The user can change the mapping 
% of character codes to category codes
% with the \cstoidx catcode\par\ command (see Chapter~\ref{gramm}
% for the explanation of concepts such as~\gr{equals}):

% 用户可以使用命令（参见第~\ref{gramm}~章中的\gr{equals}解释）来更改字符代码到类别代码的映射：
% \begin{disp}\cs{catcode}\gram{number}\gr{equals}\gram{number}.\end{disp}
% In such a statement, the first number is often given in the form

% 在这样的语句中，第一个数字通常以以下形式给出：
% \begin{disp}\verb>`>\gr{character}\quad or\quad \verb>`\>\gr{character}\end{disp}
% both of which denote the character code of the character
% (see pages \pageref{char:code} and~\pageref{int:denotation}).

% 这两种形式都表示字符的字符代码（参见第\pageref{char:code}页和\pageref{int:denotation}页）。

% Plain格式定义了\csterm active \par（活动字符）\hfill The plain format defines
% \csterm active\par
% \begin{verbatim}
% \chardef\active=13
% \end{verbatim} 
% 这样，我们可以编写如下语句：\hfill so that one can write statements such as
% \begin{verbatim}
% \catcode`\{=\active
% \end{verbatim}
% The \cs{chardef} command is  treated
% on pages \pageref{chardef} and~\pageref{num:chardef}.

% 关于\cs{chardef}命令的处理可以参考第\pageref{chardef}页和\pageref{num:chardef}页。


% The \LaTeX\ format has the control sequences

% \LaTeX\ 格式提供了以下控制序列：
% \begin{verbatim}
% \def\makeatletter{\catcode`@=11 }
% \def\makeatother{\catcode`@=12 }
% \end{verbatim}
% in order to switch on and off the `secret' character~\n@
% (see below).
% \awp

% 以便打开和关闭“秘密”字符~\n@（见下文）。
% \awp

      

% The \cs{catcode} command can also be used to query category
% codes: in 

% \cs{catcode}命令还可以用于查询类别代码：\begin{verbatim}
% \count255=\catcode`\{
% \end{verbatim}
% it yields a number, which can be assigned.

% 它将返回一个数字，可以进行赋值。

% Category codes can be tested by

% 测试类别代码可以通过:
% \begin{disp}\cs{ifcat}\gr{token$_1$}\gr{token$_2$}\end{disp}
% \TeX\ expands whatever is after \cs{ifcat} until two 
% unexpandable tokens are found; these are then compared
% with respect to their category codes. Control sequence
% tokens are considered to have category code~16,
% which makes them all equal to each other, and unequal to
% all character tokens.
% Conditionals are treated further in Chapter~\ref{if}.

% \TeX\ 会展开\cs{ifcat}后面的内容，直到找到两个不可展开的记号；然后它们将根据它们的类别代码进行比较。控制序列记号被认为具有类别代码16，这使得它们彼此相等，并且与所有字符记号都不相等。
% 条件语句将在第\ref{if}~章进一步讨论。
