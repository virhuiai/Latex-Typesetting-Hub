
% %\InputFile:boxes
% %%%% this is input file [boxes]
% %\tracingmacros=2 \tracingcommands\tracingmacros
% %\subject[boxes] Boxes
% \endofchapter
% \chapter{Boxes\\盒子}\label{boxes}

% The horizontal and vertical boxes of \TeX\ are containers for
% \term box\par
% pieces of horizontal and vertical lists.
% Boxes can be stored in box registers. 
% This chapter treats box registers and such
% aspects of boxes as their dimensions, and the way their components
% are placed relative to each other.

% \TeX\ 的水平盒子和垂直盒子是水平和垂直列表的容器。
% 盒子可以存储在盒子寄存器中。
% 本章介绍盒子寄存器以及盒子的尺寸和它们的组成部分相对于彼此的放置方式等方面。

% \begin{inventory}
% \item [\cs{hbox}] 
%       Construct a horizontal box.

%       构建一个水平盒子。
% \item [\cs{vbox}] 
%       Construct a vertical box with reference point of the last item.

%       构建一个垂直盒子，其参考点位于最后一个项目。
% \item [\cs{vtop}] 
%       Construct a vertical box with reference point of the first item.

%       构建一个垂直盒子，其参考点位于第一个项目。
% \item [\cs{vcenter}] 
%       Construct a vertical box vertically centred
%       on the math axis; this command can only be used in math mode.

%       构建一个在数学轴上垂直居中的垂直盒子；此命令只能在数学模式中使用。
% \item [\cs{vsplit}] 
%       Split off the top part of a vertical box. 

%       将垂直盒子的顶部部分分离出来。
% \item [\cs{box}] 
%       Use a box register, emptying it. 

%       使用一个盒子寄存器，并清空其内容。
% \item [\cs{setbox}] 
%       Assign a box to a box register.

%       将盒子赋值给一个盒子寄存器。
% \item [\cs{copy}] 
%       Use a box register, but retain the contents. 

%       使用一个盒子寄存器，但保留其内容。
% \item [\cs{ifhbox \cs{ifvbox}}]
% \mdqon
%       Test whether a box register contains a horizontal/""vertical box.

%       检查一个盒子寄存器是否包含一个水平/垂直盒子。
% \mdqoff

% \item [\cs{ifvoid}] 
%       Test whether a box register is empty.

%       检查一个盒子寄存器是否为空。
% \item [\cs{newbox}] 
%       Allocate a new box register. 

%       分配一个新的盒子寄存器。
% \item [\cs{unhbox \cs{unvbox}}]
%       Unpack a box register containing a horizontal/vertical box,
%       adding the contents to the current horizontal/vertical list,
%       and emptying the register. 

% 解开包含水平/垂直盒子的盒子寄存器，将其内容添加到当前的水平/垂直列表中，并清空寄存器。
% \item [\cs{unhcopy \cs{unvcopy}}]
%       The same as \cs{unhbox}$\,$/$\,$\cs{unvbox},
%       but do not empty the register. 

%       与 \cs{unhbox}$,$/$,$\cs{unvbox} 相同，但不清空寄存器。
% \item [\cs{ht \cs{dp} \cs{wd}}]
%       Height/depth/width of the box in a box register. 

%       盒子寄存器中盒子的高度/深度/宽度。
% \item [\cs{boxmaxdepth}] 
%       Maximum allowed depth of boxes.
%       Plain \TeX\ default:~\cs{maxdimen}.

%       盒子的最大允许深度。Plain \TeX\ 的默认值：\cs{maxdimen}。
% \item [\cs{splitmaxdepth}]
%       Maximum allowed depth of boxes generated by \cs{vsplit}.

%       \cs{vsplit} 生成的盒子的最大允许深度。
% \item [\cs{badness}] 
%       Badness of the most recently constructed box.

%       最近构建的盒子的劣度。
% \item [\cs{hfuzz \cs{vfuzz}}]
%       Excess size that \TeX\ tolerates before it considers  

%       在 \TeX\ 认为一个水平/垂直盒子过满之前，允许的多余尺寸。
% \mdqon
%       a horizontal/""vertical box overfull.
% \mdqoff

% \item [\cs{hbadness \cs{vbadness}}]
%       Amount of tolerance before \TeX\ reports an underfull 

%       在 \TeX\ 报告一个水平/垂直盒子不充分或过充分之前的容忍度。
% \mdqon
%       or overfull  horizontal/""vertical box.
% \mdqoff

% \item [\cs{overfullrule}] 
%       Width of the rule that is printed to indicate 
%       overfull horizontal boxes.

%       用于指示过度充满水平盒子的标尺的宽度。 
% \item [\cs{hsize}] 
%       Line width used for text typesetting inside a vertical box.
% \awp

% 用于垂直盒子内文本排版的行宽。
% \item [\cs{vsize}] 
%       Height of the page box.

%       页面盒子的高度。
% \item [\cs{lastbox}] 
%       Register containing the last item added to the current list, 
%       if this was a box.

%       寄存器，其中包含添加到当前列表中的最后一个项目，如果该项目是一个盒子。
% \item [\cs{raise \cs{lower}}]
%       Adjust vertical positioning of a box in horizontal mode. 

%       调整水平模式下盒子的垂直位置。
% \item [\cs{moveleft \cs{moveright}}]
%       Adjust horizontal positioning of a box in vertical mode. 

%       调整垂直模式下盒子的水平位置。
% \item [\cs{everyhbox \cs{everyvbox}}]
% \mdqon
%       Token list inserted at the start of a horizontal/""vertical box.

%       插入到水平/垂直盒子开始处的记号列表。
% \mdqoff

% \end{inventory}



% %\point Boxes
% \section{Boxes\\盒子}

% In this chapter we shall look at boxes. Boxes are containers
% for pieces of horizontal or vertical lists.
% Boxes that are needed more than once can be stored in box registers.

% 在本章中，我们将讨论盒子（boxes）。盒子是水平或垂直列表的容器。需要多次使用的盒子可以存储在盒子寄存器中。


% When \TeX\ expects a \gr{box}, any of the following forms
% is admissible:

% 当 \TeX\ 需要一个 \gr{box} 时，可以使用以下任意形式：

% \begin{itemize}
% \item \cs{hbox}\gr{box specification}\lb\gr{horizontal material}\rb
% \item \cs{vbox}\gr{box specification}\lb\gr{vertical material}\rb
% \item \cs{vtop}\gr{box specification}\lb\gr{vertical material}\rb
% \item \cs{box}\gr{8-bit number}
% \item \cs{copy}\gr{8-bit number}
% \item \cs{vsplit}\gr{8-bit number}\n{to}\gr{dimen}
% \item \cs{lastbox}
% \end{itemize}
% A \gr{box specification} is defined as\label{box:spec}

% \gr{box specification} 的定义为:
% \begin{disp}\gr{box specification} $\longrightarrow$ \gr{filler}
% \nl\indent$|$ \n{to} \gr{dimen}\gr{filler} 
%           $|$ \n{spread} \gr{dimen}\gr{filler}
% \end{disp}
% An \gr{8-bit number} is a number in the range~0--255.

% \gr{8-bit number} 是范围在 0--255 的数字。

% The braces surrounding box material define a group;
% they can be explicit characters
% of categories 1 and~2 respectively,
% or control sequences \cs{let} to such characters;
% see also below.

% 括号将盒子内容定义为一组；它们可以是类别码为 1 和 2 的显式字符，也可以是被 \cs{let} 给予这些字符的控制序列；详见下文。


% A \gr{box} can in general be used in horizontal, vertical,
% and math mode, but see below for the \cs{lastbox}.
% The connection between
% boxes and modes is explored further in Chapter~\ref{hvmode}.

% \gr{box} 通常可以在水平、垂直和数学模式中使用，但请参见下文有关 \cs{lastbox} 的内容。
% 盒子与模式之间的关系将在第~\ref{hvmode}~章中进一步探讨。


% The box produced by \cs{vcenter} \ldash a command that is allowed only in
% math mode \rdash  is not a \gr{box}. For instance,
% it can not be assigned with \verb=\setbox=; see further
% Chapter~\ref{math}.

% 由 \cs{vcenter} 生成的盒子（该命令仅在数学模式下允许）不是 \gr{box}。例如，它不能使用 \verb=\setbox= 进行赋值；详见第~\ref{math}~章。


% The \cs{vsplit} operation is treated in Chapter~\ref{page:break}.

% \cs{vsplit} 操作将在第~\ref{page:break}~章中介绍。


% %\point Box registers
% \section{Box registers\\盒子寄存器}

% There are 256 box registers, numbered 0--255. 
% \term box! registers\par
% Either a box register is  empty (`void'), or it contains a horizontal
% or vertical box.
% This section discusses specifically box {\em registers};
% the sizes of boxes, and the way material is arranged inside them,
% is treated below.
% \awp

% 有 256 个盒子寄存器，编号为 0--255。
% 一个盒子寄存器可以是空的（“void”），也可以包含一个水平盒子或垂直盒子。
% 本节具体讨论盒子 {\em 寄存器}；盒子的尺寸和其中的内容排列方式将在下面讨论。


% %\spoint Allocation: \cs{newbox}
% \subsection{Allocation: \cs{newbox}\\分配：\cs{newbox}}

% The plain \TeX\ \csidx{newbox} macro allocates an unused
% box register:

% 在 plain \TeX 中，\csidx{newbox} 宏用于分配一个未使用的盒子寄存器：
% \begin{verbatim}
% \newbox\MyBox 
% \end{verbatim}
% after which one can say

% 然后可以这样使用：
% \begin{verbatim}
% \setbox\MyBox=...
% \end{verbatim}
% or 或者\begin{verbatim}
% \box\MyBox
% \end{verbatim}
% and so on.
% Subsequent calls to this macro give subsequent box numbers;
% this way macro collections can allocate their own boxes
% without fear of collision with other macros.

% 等等。
% 后续对此宏的调用会给出连续的盒子编号；这样，宏集合可以分配自己的盒子，而不用担心与其他宏发生冲突。

% The number of the box is assigned by \cs{chardef}
% (see Chapter~\ref{alloc}). 
% This implies that \cs{MyBox} is equivalent to,
% and can be used as, a~\gr{number}.
% The control sequence
% \altt
% \cs{newbox} is an \cs{outer} macro.
% Newly allocated box registers are initially empty.

% 盒子的编号由 \cs{chardef} 分配（见第~\ref{alloc} 章）。
% 这意味着 \cs{MyBox} 等同于并且可以用作一个 \gr{number}。
% \cs{newbox} 控制序列是一个 \cs{outer} 宏。
% 新分配的盒子寄存器最初是空的。


% \subsection{Usage: \cs{setbox}, \cs{box}, \cs{copy}\\用法：\cs{setbox}、\cs{box}、\cs{copy}}

% A~register is filled by assigning a \gr{box}
% \cstoidx setbox\par
% to it:

% 通过将一个 \gr{box} 赋值给寄存器来填充它：
% \begin{Disp}\verb>\setbox>\gr{number}\gr{equals}\gr{box}\end{Disp}
% For example, the \gr{box} can be explicit

% 例如，\gr{box} 可以是显式的
% \begin{Disp}\verb>\setbox37=\hbox{...}>\quad or\quad \verb>\setbox37=\vbox{...}>
% \end{Disp}
% or it can be a box register:

% 例如，\gr{box} 可以是显式的
% \begin{verbatim}
% \setbox37=\box38
% \end{verbatim}
% Usually, box numbers will have been assigned by a \cs{newbox}
% command.

% 通常，盒子编号将通过 \cs{newbox} 命令进行分配。


% The box in a box register is appended
% by the commands \cs{box} and~\cs{copy}
% to whatever list \TeX\ is building: the call

% 通过 \cs{box} 和 \cs{copy} 命令，盒子寄存器中的盒子被附加到 \TeX\ 正在构建的任何列表中：
% 调用
% \begin{verbatim}
% \box38
% \end{verbatim}
% appends box~38.
% To save memory space, box registers become empty by using them:
% \TeX\ assumes that after you have inserted a box by
% calling \csidx{box}$nn$ in some mode, you do not need the
% contents of that register any more and empties it.
% In case you {\em do\/} need the contents of
% a box register more than once, 
% you can \csidx{copy} it. Calling \cs{copy}$nn$ is
% equivalent to \cs{box}$nn$ in all respects except that
% the register is not cleared.

% 将附加盒子 38。
% 为了节省内存空间，通过使用盒子寄存器来使其为空：
% \TeX\ 假定在你通过在某种模式下调用 \csidx{box}$nn$ 插入盒子后，你不再需要该寄存器的内容，并将其清空。
% 如果您{\em 需要}多次使用盒子寄存器的内容，
% 可以使用 \csidx{copy} 来复制它。调用 \cs{copy}$nn$ 在所有方面等效于 \cs{box}$nn$，只是寄存器不会被清空。

% It is possible to unwrap the contents of a box register
% by `unboxing' it using the commands \cs{unhbox} and \cs{unvbox},
% and their copying versions \cs{unhcopy} and \cs{unvcopy}.
% Whereas a box can be used in any mode, the
% unboxing operations can only be used in the appropriate mode,
% since in effect they contribute a partial
% horizontal or vertical list (see also Chapter~\ref{hvmode}).
% See below for more information on unboxing registers.
% \awp

% 可以通过使用 \cs{unhbox} 和 \cs{unvbox} 命令及其拷贝版本 \cs{unhcopy} 和 \cs{unvcopy} 来“解包”盒子寄存器的内容。
% 虽然盒子可以在任何模式下使用，但解包操作只能在适当的模式下使用，因为实际上它们贡献了一个部分的水平或垂直列表（也请参见第~\ref{hvmode} 章）。
% 有关在解包寄存器上的更多信息，请参见下文。
% \awp

% %\spoint Testing: \cs{ifvoid}, \cs{ifhbox}, \cs{ifvbox}
% \subsection{Testing: \cs{ifvoid}, \cs{ifhbox}, \cs{ifvbox}\\测试：\cs{ifvoid}、\cs{ifhbox}、\cs{ifvbox}}

% Box
% registers can be tested for their contents:

% 可以测试盒子寄存器的内容：
% \begin{disp}\cs{ifvoid}\gr{number}\end{disp}
% is true if the box register is empty.
% Note that an empty, or `void',
% box register is not the same as a register containing an empty box.
% An empty box is still either a horizontal or a vertical box;
% a~void register can be used as both.

% 如果盒子寄存器为空，则为真。
% 请注意，空的或“空”的盒子寄存器不同于包含空盒子的寄存器。
% 空盒子仍然是水平或垂直盒子；
% 空的寄存器可以用作两者。

% The test 测试
% \begin{disp}\cs{ifhbox}\gr{number}\end{disp}
% is true if the box register contains a horizontal box;

% 如果盒子寄存器包含水平盒子，则为真；

% \begin{disp}\cs{ifvbox}\gr{number}\end{disp}
% is true if the box register contains a vertical box.
% Both tests are false for void registers.

% 如果盒子寄存器包含垂直盒子，则为真。
% 对于空寄存器，这两个测试都为假。


% %\spoint[lastbox] The \cs{lastbox}
% \subsection{The \cs{lastbox}}
% \label{lastbox}

% When \TeX\ has built a partial list, the last box in this
% list is accessible as the \csidx{lastbox}. This behaves
% like a box register, so you can remove the last box from  the
% list by assigning the \cs{lastbox} to some  box register. 
% If the last item on the current list is not a box,
% the \cs{lastbox} acts like a void box register.
% It is not possible to get hold of the last box
% in the case of the main vertical list.
% The \cs{lastbox} is then always void.

% 当 \TeX\ 构建了一个部分列表时，该列表中的最后一个盒子可以通过 \csidx{lastbox} 访问。它的行为类似于一个盒子寄存器，因此可以通过将 \cs{lastbox} 赋值给某个盒子寄存器来从列表中删除最后一个盒子。如果当前列表上的最后一个项目不是一个盒子，则 \cs{lastbox} 的行为类似于一个空的盒子寄存器。在主垂直列表的情况下，无法获取到最后一个盒子。此时，\cs{lastbox} 总是空的。

% As an example, the statement 

% 举个例子，语句
% \begin{verbatim}
% {\setbox0=\lastbox}
% \end{verbatim}
% removes
% the last box from the current list, assigning it to box
% register~0. Since this assignment occurs inside a group,
% the register is cleared at the end of the group.
% At the start of a paragraph this can be used to remove the
% indentation box (see Chapter~\ref{par:start}).
% Another example of \cs{lastbox} can be found on page~\pageref{varioset}.

% 从当前列表中删除最后一个盒子，并将其赋值给盒子寄存器 0。由于此赋值发生在组内，因此该寄存器在组结束时会被清空。在段落的开头，可以使用它来删除缩进盒子（参见第~\ref{par:start}章）。另一个关于 \cs{lastbox} 的例子可以在第\pageref{varioset}~页找到。

% Because the \verb-\lastbox- is always empty in external vertical mode,
% it is not possible to get hold of boxes that have been 
% added to the page. However, it is possible to dissect
% the page once it is in \cs{box255}, for instance doing

% 由于在外部垂直模式中 \verb-\lastbox- 总是空的，所以无法获取已添加到页面上的盒子。但是，在输出例程中可以对页面进行分析，例如在输出例程内部执行以下操作：
% \begin{verbatim}
% \vbox{\unvbox255{\setbox0=\lastbox}}
% \end{verbatim}
% inside the output routine.

% If boxes in vertical mode have been shifted by \cs{moveright}
% or \cs{moveleft}, or if boxes in horizontal mode  have
% been raised by \cs{raise} or lowered by \cs{lower}, 
% any information about this
% displacement due to such a command is lost when
% the \cs{lastbox} is taken from the list.
% \awp

% 如果垂直模式中的盒子通过 \cs{moveright} 或 \cs{moveleft} 进行了偏移，或者水平模式中的盒子通过 \cs{raise} 进行了升高或 \cs{lower} 进行了降低，那么当从列表中获取 \cs{lastbox} 时，关于这些命令引起的偏移的任何信息都会丢失。


% %\point Natural dimensions of boxes
% \section{Natural dimensions of boxes\\盒子的自然尺寸}

% %\spoint Dimensions of created horizontal boxes
% \subsection{Dimensions of created horizontal boxes\\创建水平盒子的尺寸}

% Inside an \csidx{hbox} all constituents are lined up next to each other,
% \term box! dimensions\par
% with their reference points on the baseline of the box,
% unless they are moved explicitly in the vertical direction
% by \cs{lower} or~\cs{raise}.

% 在 \csidx{hbox} 内部，所有组成部分都相互排列在一起，它们的参考点位于盒子的基线上，除非通过 \cs{lower} 或 \cs{raise} 明确在垂直方向上移动。

% The resulting width of the box is the sum of the widths
% of the components. Thus the width of

% 盒子的宽度是组成部分的宽度之和。因此，
% \begin{verbatim}
% \hbox{\hskip1cm}
% \end{verbatim}
% is positive, and the width of

% 的宽度是正的，而 

% \begin{verbatim}
% \hbox{\hskip-1cm}
% \end{verbatim}
% is negative. By way of example,

% 的宽度是负的。例如，


% \begin{disp}\verb>a\hbox{\kern-1em b}-->\end{disp}
% gives as output

% 的输出结果是
% \begin{disp}\leavevmode\hphantom{b}a\hbox{\kern-1em b}--\end{disp}
% \message{check align input/output}
% which shows that a horizontal box can have negative
% width.

% 这表明水平盒子的宽度可以为负。

% The height and depth of an \cs{hbox} are the
% maximum amount that constituent boxes project above and
% below the baseline of the box. They are non-negative when the
% box is created.

% \cs{hbox} 的高度和深度是组成部分在基线之上和之下突出的最大量。当创建盒子时，它们是非负的。

% The commands \cs{lower} and \cs{raise} are the only possibilities
% for vertical movement inside an \cs{hbox} (other than
% including a \cs{vbox} inside the \cs{hbox}, of course);
% a~\gr{vertical command} \ldash such as \cs{vskip} \rdash 
% is not allowed in a horizontal box, and
% \cs{par}, although allowed,
% does not do anything inside a horizontal box.

% \cs{lower} 和 \cs{raise} 命令是在 \cs{hbox} 内部进行垂直移动的唯一可能性（当然，除了在 \cs{hbox} 中包含 \cs{vbox}）；\gr{vertical command}（如 \cs{vskip}）不允许在水平盒子中，而且虽然允许使用 \cs{par}，但在水平盒子中它不起作用。


% %\spoint Dimensions of created vertical boxes
% \subsection{Dimensions of created vertical boxes\\创建垂直盒子的尺寸}

% Inside a \csidx{vbox} vertical material is lined up with the
% \cstoidx vtop\par
% reference points on the vertical line through the reference
% point of the box,
% unless components are moved explicitly in the horizontal direction
% by \csidx{moveleft} or~\csidx{moveright}.

% 在 \csidx{vbox} 内部，垂直材料与盒子参考点通过盒子的参考点的垂直线对齐，除非组成部分通过 \csidx{moveleft} 或 \csidx{moveright} 在水平方向上明确移动。

% The  reference point of a vertical box
% is always located at the left boundary of the box.
% The width of a vertical box
% is then the maximal amount that any material in the
% box sticks to the right of the reference point.
% Material to the left of the reference point is
% not taken into account in the width.
% Thus the result of

% 垂直盒子的参考点总是位于盒子的左边界处。
% 垂直盒子的宽度是盒子中任何内容向右粘附的最大量。
% 参考点左侧的内容不计入宽度。
% 因此，
% \begin{disp}\verb>a\vbox{\hbox{\kern-1em b}}-->\end{disp}
% is 的结果是
% \begin{disp}\leavevmode\hphantom{b}a\vbox{\hbox{\kern-1em b}}--\end{disp}
% This should be contrasted with the above example.

% 这与上面的示例形成对比。


% The calculation of height and depth is different
% for vertical boxes constructed by \cs{vbox} and \cs{vtop}.
% The ground rule is that
% \awp
% a \cs{vbox} has a reference point that lies on
% the baseline of its last component,
% and a \cs{vtop} has its reference point on the baseline of the
% first component.
% In general, the depth (height) of a \cs{vbox} (\cs{vtop})
% \alt
% can be non-zero if the last (first) item is a box or rule.

% 对于由 \cs{vbox} 和 \cs{vtop} 构造的垂直盒子，高度和深度的计算方式是不同的。
% 基本规则是，\cs{vbox} 的参考点位于其最后一个组件的基线上，而 \cs{vtop} 的参考点位于第一个组件的基线上。
% 一般来说，\cs{vbox}（\cs{vtop}）的深度（高度）可以是非零的，如果最后（第一个）的项目是一个盒子或标线的话。



% The height of a \cs{vbox} is then the sum of the heights and
% depths of all components except the last, plus the height
% of that last component; the depth of the \cs{vbox} is the
% depth of its last component.
% The depth of a \cs{vtop}
% is the sum of the depth of the first component and the heights
% and depths of all subsequent material; its height is the
% height of the first component.

% 垂直盒子的高度是除最后一个组件外所有组件的高度和深度之和，加上最后一个组件的高度；垂直盒子的深度是其最后一个组件的深度。
% \cs{vtop} 的深度是第一个组件的深度与所有后续内容的高度和深度之和；其高度是第一个组件的高度。

% However, the actual rules are a bit
% more complicated when the first component of a \cs{vtop}
% or the last component of a \cs{vbox} is not a box or rule.
% If the last component of a \cs{vbox} is a kern or a glue,
% the depth of that box is zero; a \cs{vtop}'s 
% height is zero
% unless its first component is a box or rule.
% \altt
% (Note the asymmetry in these definitions; see below for
% an example illustrating this.)
% The depth of a \cs{vtop}, then, is equal to the total
% height plus depth of all enclosed material minus
% the height of the \cs{vtop}.

% 然而，当 \cs{vtop} 的第一个组件或 \cs{vbox} 的最后一个组件不是盒子或标线时，实际规则会更复杂一些。
% 如果 \cs{vbox} 的最后一个组件是紧排或粘连，则该盒子的深度为零；\cs{vtop} 的高度为零，除非它的第一个组件是一个盒子或标线。
% （请注意这些定义中的不对称性；下面的示例将说明这一点。）
% 因此，\cs{vtop} 的深度等于所有封闭内容的总高度加深度减去 \cs{vtop} 的高度。

% There is a limit on the depth of vertical boxes:
% if the depth of a \cs{vbox} or \cs{vtop}
% calculated by the above rules would exceed
% \cstoidx boxmaxdepth\par,
% the reference point of the box
% is moved down by the excess amount. 
% More precisely, the excess depth is added to the 
% natural height of the box. If the box had a \n{to} or
% \n{spread} specification, any glue is set anew to take
% the new height into account.

% 垂直盒子有一个深度的限制：
% 如果根据上述规则计算的 \cs{vbox} 或 \cs{vtop} 的深度超过 \cstoidx boxmaxdepth\par，
% 则盒子的基准点会向下移动超出的量。
% 更确切地说，超出的深度会添加到盒子的自然高度上。
% 如果盒子具有 \n{to} 或 \n{spread} 规范，则重新设置任何粘连以考虑新的高度。

% Ordinarily,
% \cs{boxmaxdepth} is set to the maximum dimension
% possible in \TeX. It is for instance reduced during some of
% the calculations  in the plain \TeX\ output routine;
% see Chapter~\ref{output}.

% 通常情况下，\cs{boxmaxdepth} 被设置为 \TeX\ 中可能的最大尺寸。
% 例如，在 plain \TeX\ 的输出例程的某些计算过程中可能会减小它；
% 请参见第~\ref{output} 章。


% %\spoint Examples
% \subsection{Examples\\示例}

% Horizontal boxes are relatively straightforward. Their width is the
% distance between the `beginning' and the `end' of the
% box, 
% and consequently the width is not necessarily positive.
% With

% 水平盒子相对简单。它们的宽度是盒子的“开始”和“结束”之间的距离，
% 因此宽度不一定是正的。
% 通过以下代码：
% \begin{verbatim}
% \setbox0=\hbox{aa} \setbox1=\hbox{\copy0 \hskip-\wd0}
% \end{verbatim}
% the \cs{box1} has width zero;

% \cs{box1} 的宽度为零；
% \begin{Disp} \verb-/\box1/-\quad gives\quad
% `{\setbox0=\hbox{aa}\setbox1=\hbox{\copy0 \hskip-\wd0}/\box1/}\kern.75em'
% \end{Disp}
% The height and depth of a horizontal box cannot be negative: in

% 水平盒子的高度和深度不能是负值：在以下代码中：
% \begin{verbatim}
% \setbox0=\hbox{\vrule height 5pt depth 5pt}
% \setbox1=\hbox{\raise 10pt \box0}
% \end{verbatim}
% the \cs{box1} has depth \n{0pt} and height~\n{15pt}

% \cs{box1} 的深度为 \n{0pt}，高度为 \n{15pt}。

% Vertical boxes are more troublesome than horizontal boxes.
% Let us first treat their width.
% After 

% 垂直盒子比水平盒子更棘手。我们首先来讨论它们的宽度。
% 在执行
% \begin{verbatim}
% \setbox0=\hbox{\hskip 10pt}
% \end{verbatim}
% the box in the
% \cs{box0} register has a width of \n{10pt}. Defining

% 之后，盒子寄存器 \cs{box0} 中的盒子宽度为 \n{10pt}。定义
% \begin{verbatim}
% \setbox1=\vbox{\moveleft 5pt \copy0}
% \end{verbatim}
% \awp
% the \cs{box1} will have width \n{5pt}; material to the
% left of the reference point is not accounted for in the
% width of a vertical box. With

% 则 \cs{box1} 的宽度为 \n{5pt}；参考点左侧的内容在垂直盒子的宽度中不计算在内。使用
% \begin{verbatim}
% \setbox2=\vbox{\moveright 5pt \copy0}
% \end{verbatim}
% the \cs{box2} will have width \n{15pt}.

% 则 \cs{box2} 的宽度为 \n{15pt}。

% The depth of a \cs{vbox} is the depth of the last item if
% that is a box, so

% \cs{vbox} 的深度是最后一个项目的深度（如果该项目是一个盒子），因此
% \begin{verbatim}
% \vbox{\vskip 5pt \hbox{\vrule height 5pt depth 5pt}}
% \end{verbatim}
% has height \n{10pt} and depth \n{5pt}, 
% and 

% 的高度为 \n{10pt}，深度为 \n{5pt}，而
% \begin{verbatim}
% \vbox{\vskip -5pt \hbox{\vrule height 5pt depth 5pt}}
% \end{verbatim}
% has height \n{0pt} and depth~\n{5pt}.
% With a glue or kern as the last item in the box, the resulting depth
% is zero, so 

% 的高度为 \n{0pt}，深度为 \n{5pt}。
% 如果在盒子中的最后一个项目是粘连或紧排，则结果的深度为零，因此
% \begin{verbatim}
% \vbox{\hbox{\vrule height 5pt depth 5pt}\vskip 5pt}
% \end{verbatim}
% has height \n{15pt} and depth~\n{0pt};

% 的高度为 \n{15pt}，深度为 \n{0pt}；
% \begin{verbatim}
% \vbox{\hbox{\vrule height 5pt depth 5pt}\vskip -5pt}
% \end{verbatim}
% has height \n{5pt} and depth~\n{0pt}.

% 的高度为 \n{5pt}，深度为 \n{0pt}。

% The height of a \cs{vtop} behaves (almost) the same with respect to
% the first item of the box, as the depth of a \cs{vbox} does
% with respect to the last item. Repeating the above examples with
% a \cs{vtop} gives the following:

% \cs{vtop} 的高度与盒子的第一个项目的行为（几乎）相同，就像 \cs{vbox} 的深度与最后一个项目的行为一样。使用 \cs{vtop} 重复上面的示例得到以下结果：
% \begin{verbatim}
% \vtop{\vskip 5pt \hbox{\vrule height 5pt depth 5pt}}
% \end{verbatim}
% has height \n{0pt} and depth \n{15pt}, 
% and 

% 的高度为 \n{0pt}，深度为 \n{15pt}，
% 而
% \begin{verbatim}
% \vtop{\vskip -5pt \hbox{\vrule height 5pt depth 5pt}}
% \end{verbatim}
% has height \n{0pt} and depth~\n{5pt};

% 的高度为 \n{0pt}，深度为 \n{5pt}；
% \begin{verbatim}
% \vtop{\hbox{\vrule height 5pt depth 5pt} \vskip 5pt}
% \end{verbatim}
% has height \n{5pt} and depth~\n{10pt}, and

% 的高度为 \n{5pt}，深度为 \n{10pt}，
% 以及
% \begin{verbatim}
% \vtop{\hbox{\vrule height 5pt depth 5pt} \vskip -5pt}
% \end{verbatim}
% has height \n{5pt} and depth~\n{0pt}.

% 的高度为 \n{5pt}，深度为 \n{0pt}。


% %\point More about box dimensions
% \section{More about box dimensions\\更多关于盒子尺寸的内容}

% %\spoint Predetermined dimensions
% \subsection{Predetermined dimensions\\预先确定的尺寸}

% The size of a box can be specified in advance
% with a \gr{box specification}; see above for the syntax.
% Any glue
% in the box is then set in order to reach the required size.
% Prescribing the size of the box is done by

% 可以预先通过 \gr{box specification}（参见上文的语法）指定盒子的尺寸。
% 盒子中的任何粘连都将根据所需的尺寸进行设置。
% 通过以下方式指定盒子的尺寸：
% \begin{disp}\cs{hbox} \n{to} \gr{dimen} \n{\lb...\rb},
%      \cs{vbox} \n{to} \gr{dimen} \n{\lb...\rb}\end{disp}
% \awp
% If stretchable or shrinkable glue is present in the box,
% it is stretched or shrunk in order to give the box the
% specified size. Associated with this glue setting is a badness value
% (see Chapter~\ref{glue}). If no stretch or shrink \ldash whichever
% is necessary \rdash  is present, the resulting box will be underfull
% or overfull respectively. Error reporting for over/underfull
% boxes is treated below.

% 如果盒子中存在可伸缩或可收缩的粘连，则会拉伸或收缩粘连以使盒子达到指定的尺寸。
% 与此粘连设置相关联的是一个劣度值（详见第~\ref{glue}~章）。
% 如果没有可伸展或可收缩的部分（取决于需要的部分），则得到的盒子将分别是不充实或过充实的。
% 下文将介绍关于过充实/不充实盒子的错误报告。

% Another command to let a box have a size other than
% the natural size is

% 可以使用另一个命令来指定盒子具有与其自然尺寸不同的尺寸：
% \begin{disp}\cs{hbox} \n{spread} \gr{dimen} \n{\lb...\rb},
%      \cs{vbox} \n{spread} \gr{dimen} \n{\lb...\rb}\end{disp}
% which tells \TeX\ to set the glue in such a way that
% the size of the box is a  specified amount more than the 
% natural size.

% 这告诉 \TeX\ 根据粘连设置方式设置粘连，使盒子的尺寸比其自然尺寸多出指定的量。

% Box specifications for \cs{vtop} vertical boxes are
% somewhat difficult to interpret. \TeX\ constructs a \cs{vtop}
% by first making a \cs{vbox}, including 
% glue settings induced by a \gr{box specification};
% then it computes the height and depth by the above rules.
% Glue setting is described in Chapter~\ref{glue}.

% 对于 \cs{vtop} 垂直盒子的盒子规格有些难以解释。
% \TeX\ 通过首先创建一个 \cs{vbox}，包括由 \gr{box specification} 引起的粘连设置，
% 然后按照上述规则计算高度和深度来构造 \cs{vtop}。
% 粘连的设置方法在第~\ref{glue}~章中有描述。


% %\spoint Changes to box dimensions
% \subsection{Changes to box dimensions\\更改盒子尺寸}

% The dimensions of a box register are accessible by the
% commands \csidx{ht}, \csidx{dp}, and~\csidx{wd};
% for instance \cs{dp13} gives the depth of box~13.
% However, not only can boxes be measured this way;
% by assigning values to these
% dimensions \TeX\ can even be fooled into thinking that
% a box has a  size different from its actual.
% However, changing the dimensions of a box does not change
% anything about the contents; in particular it does not
% change the way the glue is set.

% 可以通过命令 \csidx{ht}、\csidx{dp} 和 \csidx{wd} 访问盒子寄存器的尺寸；例如，\cs{dp13} 给出盒子 13 的深度。然而，不仅可以用这种方式测量盒子的尺寸；通过为这些尺寸分配值，甚至可以欺骗 \TeX，使其认为盒子的尺寸与实际尺寸不同。然而，更改盒子的尺寸不会改变其内容；特别是，它不会改变粘连设置的方式。

% Various formats use this in `smash' macros: the macro defined by
% \cstoidx smash\par

% 各种格式在“smash”宏中使用了这一点：由下面定义的宏
% \begin{verbatim}
% \def\smash#1{{\setbox0=\hbox{#1}\dp0=0pt \ht0=0pt \box0\relax}}
% \end{verbatim}
% places its argument but annihilates its height and depth;
% \altt
% that is, the output does show the whole box, but further calculations
% by \TeX\ act as if the height and depth were zero.

% 将其参数放置在盒子中，但会将其高度和深度消除；也就是说，输出显示整个盒子，但是 \TeX{} 的进一步计算会将高度和深度视为零。

% Box dimensions can be changed only by setting them.
% They are \gr{box dimen}s, which can only be set
% in a \gr{box size assignment}, and not, for instance
% changed with \cs{advance}.

% 只能通过设置它们来更改盒子寄存器的尺寸。它们是 \gr{box dimen}，只能在 \gr{box size assignment} 中设置，不能通过 \cs{advance} 等方式更改。


% Note that a \gr{box size assignment} is a \gr{global assignment}:
% its effect transcends any groups in which it occurs
% (see Chapter~\ref{group}).
% Thus the output of 

% 请注意，\gr{box size assignment} 是一个 \gr{global assignment}：其影响超越了其所在的任何组（见第~\ref{group} 章）。因此，以下代码的输出
% \begin{verbatim}
% \setbox0=\hbox{---} {\wd0=0pt} a\box0b
% \end{verbatim}
% is 是 `{\setbox0=\hbox{---}{\wd0=0pt}a\box0b}\kern.5em'.

% The limits that hold on the dimensions with which a 
% box can be created (see above) do not hold for explicit changes to the
% \mdqon
% size of a box: the assignment \cs{dp0=}""\n{-2pt} for a 
% \mdqoff
% horizontal box is perfectly admissible.

% 适用于创建盒子的尺寸的限制（见上文）在显式更改盒子尺寸时不适用：例如，对于水平盒子，\cs{dp0=}""\n{-2pt} 是完全允许的。



% %\spoint Moving boxes around
% \subsection{Moving boxes around\\移动盒子}

% In a horizontal box all constituent elements are lined up
% \cstoidx raise\par\cstoidx lower\par
% with their reference points at the same height as the 
% reference point of the box. Any box inside a horizontal
% box can be lifted or dropped using the macros
% \cs{raise} and~\cs{lower}.
% \awp

% 在水平盒子中，所有组成元素都与盒子的基准点对齐。
% 可以使用 \cs{raise} 和 \cs{lower} 宏将水平盒子内的任何盒子向上或向下移动。

% Similarly, in a vertical box all constituent elements
% are lined up with their reference points underneath one another,
% in line with the reference point of the box.
% Boxes can now be moved sideways by the macros 
% \csidx{moveleft} and~\csidx{moveright}.

% 同样，在垂直盒子中，所有组成元素都与盒子的基准点在同一高度下方对齐。
% 可以使用 \csidx{moveleft} 和 \csidx{moveright} 宏将盒子沿水平方向移动。

% Only boxes can be shifted thus; these operations cannot 
% be applied to, for instance, characters or rules.

% 只有盒子可以这样移动；不能将此操作应用于字符或规则等其他元素。


% %\spoint Box dimensions and box placement
% \subsection{Box dimensions and box placement\\盒子尺寸和盒子放置}

% \TeX\ places the components of horizontal and
% vertical lists by maintaining a reference line and a
% current position on that line. For horizontal lists
% the reference line is the baseline of the surrounding
% \cs{hbox}; for vertical lists it is the vertical line
% through the reference point of the surrounding \cs{vbox}.

% \TeX\ 通过维护参考线和参考线上的当前位置来放置水平和垂直列表的组成部分。
% 对于水平列表，参考线是周围 \cs{hbox} 的基线；对于垂直列表，它是通过周围 \cs{vbox} 的基准点的垂直线。

% In horizontal mode a component is placed as follows.
% The current position coincides initially
% with the reference point of the surrounding box. After that,
% the following actions are carried out.

% 在水平模式下，组成部分的放置方式如下。
% 当前位置最初与周围盒子的基准点重合。然后，执行以下操作。
% \begin{enumerate} \item If the component has been shifted by
% \cs{raise} or \cs{lower}, shift the current
% position correspondingly.

% 如果组成部分已通过 \cs{raise} 或 \cs{lower} 进行了移动，则相应地移动当前位置。
% \item If the component is a horizontal box, use
% this algorithm recursively for its contents; 
% if it is a vertical box, go up  by the height of this box,
% putting  a new current position for the enclosed vertical list there,
% and place its components using the algorithm for vertical
% lists below.

% 如果组成部分是水平盒子，请递归使用此算法处理其内容；
% 如果是垂直盒子，则向上移动此盒子的高度，并在那里放置一个新的当前位置，然后使用垂直列表的算法放置其组成部分。
% \item Move the current position (on the reference line)
% to the right by the width of the component.

% 将当前位置（在参考线上）向右移动组成部分的宽度。
% \end{enumerate}

% For the list in a vertical box \TeX's  current position is
% initially at the upper left corner of that box, as explained above,
% and the reference line is the vertical line through that point;
% it also runs through the reference point of the box.
% Enclosed components are then placed as follows.

% 对于垂直盒子中的列表，\TeX\ 的当前位置最初位于该盒子的左上角，如上所述，参考线是通过该点的垂直线；它也通过盒子的参考点。然后将封闭的组件放置如下：
% \begin{enumerate} \item If a component has been shifted using
% \cs{moveleft} or \cs{moveright}, shift the current position
% accordingly.

% 如果组件已经使用 \cs{moveleft} 或 \cs{moveright} 进行了偏移，则相应地移动当前位置。
% \item Put the component with its upper left corner at the
% current position.

% 将组件的左上角放在当前位置。
% \item If the component is a vertical box, use this algorithm
% recursively for its contents; if it is a horizontal box,
% its reference point can be found below  the current position
% by the height of the box. Put the current position for that
% box there, and use the above algorithm for horizontal lists.

% 如果组件是一个垂直盒子，则对其内容递归使用此算法；如果它是一个水平盒子，则通过该盒子的高度可以找到当前位置下方的参考点。将当前位置放在该盒子的参考点处，并对水平列表使用上述算法。
% \item Go down by the height plus depth of the box
% (that is, starting at the upper left corner of the box)
% on the  reference line,
% and continue processing vertically.

% 沿着参考线向下移动盒子的高度加深度（即从盒子的左上角开始），并继续垂直处理。
% \end{enumerate}
% Note that the above processes do not describe the construction
% of boxes. That would (for instance)
% involve for vertical boxes the insertion
% of baselineskip glue. Rather, it describes the way the components
% of a finished box are arranged in the output.

% 请注意，上述过程并不描述盒子的构造过程。这将涉及（例如）插入基线间距粘连的垂直盒子。相反，它描述了完成的盒子中组件的排列方式。



% %\spoint Boxes and negative glue
% \subsection{Boxes and negative glue\\盒子和负粘连}

% Sometimes it is useful to have boxes overlapping instead of
% \awp
% line up. An easy way to do this is to use negative glue.
% In horizontal mode

% 有时，盒子重叠而不是对齐是有用的。一种简单的方法是使用负粘连。在水平模式中，
% \begin{verbatim}
% {\dimen0=\wd8 \box8 \kern-\dimen0}
% \end{verbatim}
% places box 8 without moving the current location.

% 可以将盒子 8 放置在当前位置而不移动它。


% More versatile are the macros \csidx{llap} and \csidx{rlap}\label{rlap},
% defined as 

% 更灵活的是宏 \csidx{llap} 和 \csidx{rlap}\label{rlap}，定义如下：
% \begin{verbatim}
% \def\llap#1{\hbox to 0pt{\hss #1}}
% \end{verbatim}
% and \begin{verbatim}
% \def\rlap#1{\hbox to 0pt{#1\hss}}
% \end{verbatim}
% that allow material to protrude left or right from the
% current location.
% The \cs{hss} glue is equivalent to \verb>\hskip 0pt plus 1fil minus 1fil>, 
% which absorbs any positive or negative width
% of the argument of \cs{llap} or \cs{rlap}.

% 它们允许内容从当前位置向左或向右突出。
% \cs{hss} 粘连相当于 \verb>\hskip 0pt plus 1fil minus 1fil>，可以吸收 \cs{llap} 或 \cs{rlap} 参数的任何正宽度或负宽度。
% \begin{example} The sequence \begin{verbatim}
% \llap{\hbox to 10pt{a\hfil}}
% \end{verbatim}
% is effectively the same as 实际上等同于
% \begin{verbatim}
% \hbox{\hskip-10pt \hbox to 10pt{a\hfil}}
% \end{verbatim}
% which has a total width of~\n{0pt}.

% 总宽度为 0 pt。
% \end{example}

