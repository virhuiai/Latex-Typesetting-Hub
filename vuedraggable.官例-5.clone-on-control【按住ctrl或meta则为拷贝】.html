<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>vuedraggable 测试实例</title>
    <script src="./assets/vue.global.min.js"></script>
    <script src="./assets/Sortable.min.js"></script>
    <script src="./assets/vuedraggable.umd.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./assets/pure-min.css">
</head>

<body style="padding:10px;">
<div id="app" class="demo">
    <div class="pure-g">
        <div class="pure-u-6-24">
            <h2>按住ctrl或meta则为拷贝</h2>
            <ul class="pure-menu-list">

<!--@start="start"  作为 vuedraggable 组件的 @start 事件的处理函数。这段代码的目的是在拖拽操作开始时捕捉并记录是否按下了 Ctrl 键。-->
            <draggable
                    :list="list1"
                    :clone="clone"
                    :group="{ name: 'people', pull: pullFunction }"
                    @start="start"
                    item-key="id"
            >
                <template #item="{ element, index }">
                    <li class="pure-menu-item"><span class="pure-menu-link">{{ element.name }}-{{ index }}</span></li>
                </template>
            </draggable>
            </ul>
        </div>
        <div class="pure-u-6-24">
            <h2>Draggable 2</h2>
            <ul class="pure-menu-list">
                <draggable
                        :list="list2"
                        group="people"
                        item-key="id"
                >
                    <template #item="{ element, index }">
                        <li
                                class="pure-menu-item"><span class="pure-menu-link">{{ element.name }}-{{ index
                            }}</span></li>
                    </template>
                </draggable>
            </ul>
        </div>
        <div class="pure-u-6-24">
            <h2>List 1</h2>
            {{list1}}
        </div>
        <div class="pure-u-6-24">
            <h2>List 2</h2>
            {{list2}}
        </div>
    </div>
</div>
<script>
    let idGlobal = 8;
    const app = {
        data() {
            return {
                list1: [
                    { name: "Jesus", id: 1 },
                    { name: "Paul", id: 2 },
                    { name: "Peter", id: 3 }
                ],
                list2: [
                    { name: "Luc", id: 5 },
                    { name: "Thomas", id: 6 },
                    { name: "John", id: 7 }
                ],
                controlOnStart: true
            }
        },
        //注册draggable组件
        components: {
            'draggable': window.vuedraggable
        },
        methods: {
            clone({ name }) {
                return { name, id: idGlobal++ };
            },
            pullFunction() {
                return this.controlOnStart ? "clone" : true;
            },

            /**
             *      @start="start"
             * so， 当 vuedraggable 组件触发 start 事件时（即用户开始拖动某个元素），这个方法会被调用。
             * 它会检查事件开始时是否按下了 Ctrl 键，并将这个信息保存在 controlOnStart 属性中。这样，其他方法就可以通过检查 this.controlOnStart 来了解拖拽操作开始时 Ctrl 键是否被激活，这可以用于实现一些特定的交互逻辑，例如多选或特殊的拖拽行为。
             * @param originalEvent
             */
            start({ originalEvent }) {
                //({ originalEvent }): 这是 ES6 的解构赋值语法，它从 start 事件传递过来的事件对象中提取 originalEvent 属性。
                // originalEvent 是指原生的 DOM 事件，这里可能是一个鼠标或触摸事件。

                //originalEvent.ctrlKey: 这是一个布尔值，指示当事件发生时 Ctrl 键是否被按下。ctrlKey 是原生 JavaScript 事件对象的一个属性。
                this.controlOnStart = originalEvent.ctrlKey || originalEvent.metaKey;
            }
        }
    }
    Vue.createApp(app).mount('#app')
</script>

</body>

</html>