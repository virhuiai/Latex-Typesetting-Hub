<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>vuedraggable 测试实例</title>
    <script src="./assets/vue.global.min.js"></script>
    <script src="./assets/Sortable.min.js"></script>
    <script src="./assets/vuedraggable.umd.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./assets/pure-min.css">
</head>

<body style="padding:10px;">
    <div id="app" class="demo">
        <div class="pure-g">
            <div class="pure-u-1-3">
                <button class="pure-button" @click="add">添加</button>
                <button class="pure-button" @click="replace">替换</button>

                <br/><input v-model="enabled" type="checkbox">拖动开关
            </div>
            <div class="pure-u-1-3">
                <h2>Draggable</h2>

                <ul class="pure-menu-list">
<!-- :list="list"  -->
<!-- :disabled="!enabled"：再次使用动态绑定，这次是为了设置 draggable 组件的 disabled 属性。如果 enabled 数据属性为 true，则列表可拖动，如果为 false 则不可拖动。-->
<!-- item-key="name"：这是 draggable 组件的一个属性，用于指定列表中每个元素的唯一键（key）。在这个例子中，它假设列表中的每个元素都有一个唯一的 name 属性。 -->

<!--  class="list-group"：这是一个普通的 HTML 类属性，为 draggable 组件添加了 list-group 类，可能用于应用 CSS 样式。-->
<!-- ghost-class="ghost"：这是 draggable 组件的一个属性，它定义了当拖动列表项时，该列表项的占位符（即“幽灵”元素）使用的 CSS 类。 -->
<!-- :move="checkMove"：这是 draggable 组件的一个属性，它允许你定义一个方法，该方法在拖动操作中每次移动元素时被调用。这通常用于验证是否可以移动列表项。 -->
<!-- @start="dragging = true" 和 @end="dragging = false"：这里使用了 Vue 的事件监听语法（通过 @ 表示）。
当拖动开始时，dragging 数据属性会被设置为 true，当拖动结束时，会被设置回 false。这可以用于在拖动发生时跟踪状态或触发其他逻辑。-->
<!-- <template #item="{ element }">：这是一个具名插槽（slot）的定义，带有一个作用域插槽，其中 element 是传递给插槽的对象，代表当前渲染的列表项。 -->

                    <draggable
                            :list="list"
                            :disabled="!enabled"
                            item-key="name"
                            :move="checkMove"
                            @start="dragging = true"
                            @end="dragging = false"
                    >
                        <template #item="{ element }">
                            <div class="list-group-item" :class="{ 'not-draggable': !enabled }">
                                <li class="pure-menu-item"><span class="pure-menu-link">{{ element.name }}</span></li>
                            </div>
                        </template>
                    </draggable>
                </ul>


            </div>
            <div class="pure-u-1-3">
                <h2>List</h2>
                {{list}}
            </div>
        </div>
    </div>
    <script>
        let id = 1;
        const app = {
            data() {
                return {
                    list: [
                        { name: "张三", id: 0 },
                        { name: "李四", id: 1 },
                        { name: "王五", id: 2 }
                    ]
                    ,dragging: false
                    ,enabled: true
                }
            },
            //注册draggable组件
            components: {
                'draggable': window.vuedraggable
            },
            methods: {
                add: function() {
                    this.list.push({ name: "阿六 " + id, id: id++ });
                },
                replace: function() {
                    this.list = [{ name: "替换", id: id++ }];
                },
                checkMove: function(e) {
                    window.console.log("Future index: " + e.draggedContext.futureIndex);
                }
            }
        }
        Vue.createApp(app).mount('#app')
    </script>

</body>

</html>