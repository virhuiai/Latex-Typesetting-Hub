\subsection{Creation of \LaTeX\ Exercises\\\LaTeX\ 练习的创建}\label{listing:exercises}

In the following, a guideline is given for the creation of \LaTeX\ exercises
with solutions. These solutions are saved to disk for application at a place of
choice.
Therefore, all used exercises are logged to a file |\jobname.records| for automatic
processing. The solution contents themselves are saved to a subdirectory named
|solutions|. Also see \Vref{sec:recording}.

下面提供了一个指南，用于创建带有答案的 \LaTeX\ 练习。这些答案被保存到磁盘上，以便在需要的地方应用。因此，所有使用的练习都被记录在一个名为 |\jobname.records| 的文件中\footnote{比如tcolorbox.records。}%
，以便自动处理。解答内容本身保存在一个名为 |solutions| 的子目录中。请参见 \Vref{sec:recording}。
\begin{itemize}
\item Before the first exercise is given,
\refComLe{tcbstartrecording} has to be called to start recording.
\\在给出第一个练习之前，必须调用 \refComLe{tcbstartrecording} 开始录制。
\item The solution is given as content of a \refEnvLe{tcboutputlisting}
environment. Note, that you can use this content also inside the
exercise with \refComLe{tcbuselistingtext} in compiled form.
\\解决方案作为 \refEnvLe{tcboutputlisting} 环境的内容给出。请注意，您可以使用编译后的形式在练习中使用 \refComLe{tcbuselistingtext}。
\item After the last exercise is given (and before using the solutions),
\refComLe{tcbstoprecording} has to be called to stop recording.
\\在给出最后一个练习（且在使用解决方案之前），必须调用 \refComLe{tcbstoprecording} 停止录制。
\item The solutions are loaded by \refComLe{tcbinputrecords}.
\\解决方案通过 \refComLe{tcbinputrecords} 加载。
\end{itemize}

Inside the exercise text, there may be text parts which are needed as
\LaTeX\ source code and as compiled text as well. These parts can be
saved by \refEnvLe{tcbwritetemp} and used in compiled form by \refComLe{tcbusetemp}
or as source code by \refComLe{tcbusetemplisting}.

在练习文本中，可能存在需要作为\LaTeX 源代码和编译后文本的文本部分。这些部分可以通过\refEnvLe{tcbwritetemp}保存，并通过\refComLe{tcbusetemp}以编译形式使用，或通过\refComLe{tcbusetemplisting}作为源代码使用。

At first, we generate some a common style for the exercises and the
solutions. Further, since exercises and solutions should
be numbered, we force to use a label \meta{marker}.
Automatically, the label |exe:|\meta{marker} is used to mark the exercise
and the label |sol:|\meta{marker} is used to mark the solution.

首先，我们为练习和解决方案生成了一种常见的样式。另外，由于练习和解决方案需要编号，我们强制使用标签\meta{marker}。自动地，标签|exe:|\meta{marker}用于标记练习，而标签|sol:|\meta{marker}用于标记解决方案。

\begin{dispListing}
\tcbset{texercisestyle/.style={arc=0.5mm, colframe=blue!25!yellow!90!white,
colback=blue!25!yellow!5!white, coltitle=blue!25!yellow!40!black,
fonttitle=\small\sffamily\bfseries, fontupper=\small, fontlower=\small,
listing options={style=tcblatex,texcsstyle=*\color{red!40!black}},
}}
\end{dispListing}
\tcbusetemp

With these preparations, the kernel environment |texercise| for our
exercises is created quickly:

有了这些准备，我们的练习内核环境 |texercise| 就能够快速创建：

\inputpreamblelisting{E}

%% \clearpage
The following examples demonstrate the application.

以下示例演示了应用程序。

\begin{dispListing}
\tcbstartrecording
\end{dispListing}
\tcbusetemp


\begin{dispExample}
\begin{texercise}{tabular_example}
\textit{Create the following table:}\par\smallskip%
\begin{tcboutputlisting}
\begin{tabular}{|p{3cm}|p{3cm}|p{3cm}|p{3cm}|}\hline
\multicolumn{4}{|c|}{\bfseries\itshape Das alte Italien}\\\hline
\multicolumn{2}{|c|}{\bfseries Antike} &
\multicolumn{2}{c|}{\bfseries Mittelalter}\\\hline
\multicolumn{1}{|c|}{\itshape Republik}&
\multicolumn{1}{c|}{\itshape Kaiserreich}&
\multicolumn{1}{c|}{\itshape Franken}&
\multicolumn{1}{c|}{\itshape Teilstaaten}\\\hline
In den Zeiten der r\"{o}mischen Republik standen dem Staat jeweils zwei
Konsuln vor, deren Machtbefugnisse identisch waren. &
Das r\"{o}mische Kaiserreich wurde von einem Alleinherrscher, dem Kaiser,
regiert.
& In der V\"{o}lkerwanderungszeit \"{u}bernahmen die Goten und sp\"{a}ter die
Franken die Vorherrschaft.
& Im sp\"{a}teren Mittelalter regierten F\"{u}rsten einen Fleckenteppich
von Einzelstaaten.\\\hline
\end{tabular}
\end{tcboutputlisting}
\tcbuselistingtext%
\end{texercise}
\end{dispExample}


\begin{dispExample}
\begin{texercise}{macro_oneparam}
\begin{tcboutputlisting}
\newcommand{\headingline}[1]{%
\begin{center}\Large\bfseries #1\end{center}}
\end{tcboutputlisting}
\tcbuselistingtext%

Create a new macro \verb+\headingline+ which produces the
following output:

创建一个新的宏\verb+\headingline+，它会产生以下输出：
\par\smallskip
\begin{tcbwritetemp}
\headingline{Very important heading}
\end{tcbwritetemp}
\tcbusetemplisting\tcbusetemp%
\end{texercise}
\end{dispExample}



\begin{dispExample}
\begin{texercise}{macro_twoparam}
\begin{tcboutputlisting}
\newcommand{\minitable}[2]{%
\begin{center}\begin{tabular}{p{10cm}}\hline%
\multicolumn{1}{c}{\bfseries#1}\\\hline%
#2\\\hline%
\end{tabular}\end{center}}
\end{tcboutputlisting}
\tcbuselistingtext%
Create a new macro \verb+\minitable+ which produces the
following output:

创建一个名为\verb+\minitable+的新宏，它会生成以下输出\par\smallskip
\begin{tcbwritetemp}
\minitable{My heading}{In this tiny tabular, there is only a heading
and some text below which has a width of ten centimeters.}
\end{tcbwritetemp}
\tcbusetemplisting\par\smallskip\tcbusetemp%
\end{texercise}
\end{dispExample}


\begin{dispExample}
\begin{texercise}{macro_threeparam}
\begin{tcboutputlisting}
\newcommand{\synop}[3]{%
\begin{tabular}{@{}p{(\linewidth-\tabcolsep*2-\arrayrulewidth)/2}|%
p{(\linewidth-\tabcolsep*2-\arrayrulewidth)/2}@{}}\hline
\multicolumn{2}{c}{\bfseries #1}\\\hline
\multicolumn{1}{c|}{\itshape English}&
\multicolumn{1}{c}{\itshape German}\\\hline
#2 & #3
\end{tabular}}
\end{tcboutputlisting}
\tcbuselistingtext%
Create a new macro \verb+\synop+ which typesets a synoptic text according
to the following example. Base your macro on a tabular which takes the
total line width.

创建一个新的宏\verb+\synop+，根据以下示例排版综合文本。基于一个接受总行宽的表格来创建你的宏。\par\smallskip
\begin{tcbwritetemp}
\synop{Neil Armstrong}%
{That's one small step for a man, one giant leap for mankind.}%
{Das ist ein kleiner Schritt f\"{u}r einen Mann,
ein riesiger Sprung f\"{u}r die Menschheit.}
\end{tcbwritetemp}
\tcbusetemplisting\par\smallskip\tcbusetemp%
\end{texercise}
\end{dispExample}
%\closeoutsol

\begin{dispListing}
\tcbstoprecording
\end{dispListing}
\tcbusetemp

\bigskip

Now, we give a list of all exercises with:

现在，我们列出了所有练习的清单，包括：
\begin{dispListing}
\tcblistof[\subsection]{exam}{List of Exercises%
\label{listofexercises}}
\end{dispListing}
\tcbusetemp