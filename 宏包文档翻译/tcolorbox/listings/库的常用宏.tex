\subsection{Common Macros of the Libraries\\库的常用宏}
% \include*{listings/库的常用宏_tcblisting}
\include*{listings/库的常用宏_写入文件} 
\end{document}




\begin{docCommand}{tcbinputlisting}{\marg{options}}
Creates a colored boxed based on a |tcolorbox|. The text content is read
from a file named by the key value of |listing file|. Apart from that,
the function is equal to that of \refEnvLe{tcblisting}.

根据 |tcolorbox| 创建一个有颜色的框。文本内容从名为 |listing file| 的键值对应的文件中读取。除此之外，该函数与 \refEnvLe{tcblisting} 的功能相同。
\begin{dispExample}
\tcbinputlisting{colback=red!5!white,colframe=red!75!black,text only}
\tcbinputlisting{colback=green!5,colframe=green!75!black,listing only}
\end{dispExample}
\end{docCommand}

\begin{docCommand}{tcbuselistingtext}{}
Loads text from a file named by the key value of |listing file|.

从名为|listing file|的键值指定的文件中加载文本。
\begin{dispExample}
\tcbuselistingtext
\end{dispExample}
\end{docCommand}


\begin{docCommand}{tcbuselistinglisting}{}
Typesets text as listing from a file named by the key value of |listing file|.

将文本设置为列表，列表文件的名称由|listing file|的键值命名。
\begin{dispExample}
\tcbuselistinglisting
\end{dispExample}
\end{docCommand}

%\enlargethispage*{5mm}
\begin{docCommand}{tcbusetemplisting}{}
Typesets text as listing from a temporary file which was written by

将文本设置为列表，该列表来自由\refEnvLe{tcbwritetemp}写入的临时文件。
\refEnvLe{tcbwritetemp}.
\end{docCommand}


% \clearpage
\begin{marker}
See \Vref{subsec:xparse_listing} and \Vref{subsec:xparse_inputlisting} for more
elaborate methods to create new environments and commands.

请参见 \Vref{subsec:xparse_listing} 和 \Vref{subsec:xparse_inputlisting}，了解更详细的创建新环境和命令的方法。
\end{marker}
\begin{marker}
If a new sort of |tcblisting| environments should be created with
one optional argument only, one is highly recommended to use
\refCom{DeclareTCBListing} or \refCom{NewTCBListing}
instead of \refCom{newtcblisting} to
avoid content scanning problems.

如果要创建一种只有一个可选参数的新 |tcblisting| 环境，强烈建议使用 \refCom{DeclareTCBListing} 或 \refCom{NewTCBListing} 而不是 \refCom{newtcblisting}，以避免内容扫描问题。
\end{marker}

\begin{docCommand}{newtcblisting}{\oarg{init options}\marg{name}\oarg{number}\oarg{default}\marg{options}}
Creates a new environment \meta{name} based on \refEnvLe{tcblisting}.
Basically, |\newtcblisting| operates like |\newenvironment|. This means,
the new environment \meta{name} optionally takes \meta{number} arguments, where
\meta{default} is the default value for the optional first argument.
The \meta{options} are given to the underlying |tcblisting|.
Note that \refKey{/tcb/savedelimiter} is set to the given \meta{name}
automatically.
The \meta{init options} allow setting up automatic numbering,
see Section \ref{sec:initkeys} from page \pageref{sec:initkeys}.

创建基于\refEnvLe{tcblisting}的新环境\meta{name}。 基本上，|\newtcblisting|的操作类似于|\newenvironment|。这意味着，新环境\meta{name}可以选择性地接受\meta{number}个参数，其中\meta{default}是可选第一个参数的默认值。 \meta{options}应用于底层的|tcblisting|。请注意，\refKey{/tcb/savedelimiter}会自动设置为给定的\meta{name}。 \meta{init options}允许设置自动编号，参见第\pageref{sec:initkeys}页的第\ref{sec:initkeys}节。
\begin{dispExample*}{sbs,lefthand ratio=0.5}
\newtcblisting{mybox}{%
colback=red!5!white,
colframe=red!75!black}

\begin{mybox}
This is my \LaTeX\ box.
\end{mybox}
\end{dispExample*}

\begin{dispExample*}{sbs,lefthand ratio=0.5}
\newtcblisting{mybox}[1]{%
colback=red!5!white,
colframe=red!75!black,
fonttitle=\bfseries,
title={#1}}

\begin{mybox}{Listing Box}
This is my \LaTeX\ box.
\end{mybox}
\end{dispExample*}

\begin{dispExample*}{sbs,lefthand ratio=0.5}
\newtcblisting{mybox}[2][]{%
colback=red!5!white,
colframe=red!75!black,
fonttitle=\bfseries,
title={#2},#1}

\begin{mybox}[listing only]
{Listing Box}
This is my \LaTeX\ box.
\end{mybox}
\bigskip

\begin{mybox}[listing side text]
{Listing Box}
This is my
\LaTeX\ box.
\end{mybox}
\end{dispExample*}

% \clearpage
\inputpreamblelisting{C}

\begin{dispExample*}{sbs,lefthand ratio=0.5}
\begin{mycbox}{Listing Box}
This is my \LaTeX\ box.
\end{mycbox}
\end{dispExample*}
\end{docCommand}


%\enlargethispage*{1cm}
\begin{docCommand}{renewtcblisting}{\oarg{init options}\marg{name}\oarg{number}\oarg{default}\marg{options}}
Operates like \refCom{newtcblisting}, but based on |\renewenvironment| instead of |\newenvironment|.
An existing environment is redefined.

类似于 \refCom{newtcblisting}，但是基于 |\renewenvironment| 而非 |\newenvironment| 运行。 已有的环境将被重新定义。
\end{docCommand}


% \clearpage
\begin{docCommand}{newtcbinputlisting}{\oarg{init options}\brackets{\texttt{\textbackslash}\rmfamily\meta{name}}\oarg{number}\oarg{default}\marg{options}}
Creates a new macro \texttt{\textbackslash}\meta{name} based on \refCom{tcbinputlisting}.
Basically, |\newtcbinputlisting| operates like |\newcommand|.
The new macro \texttt{\textbackslash}\meta{name} optionally takes \meta{number} arguments, where
\meta{default} is the default value for the optional first argument.
The \meta{options} are given to the underlying |tcbinputlisting|.
The \meta{init options} allow setting up automatic numbering,
see Section \ref{sec:initkeys} from page \pageref{sec:initkeys}.

基于\refCom{tcbinputlisting}创建一个新的宏\texttt{\textbackslash}\meta{name}。 基本上，|\newtcbinputlisting| 的操作类似于 |\newcommand|。 新的宏\texttt{\textbackslash}\meta{name}可以选择性地带有\meta{number}个参数，其中\meta{default}是可选第一个参数的默认值。 \meta{options}被赋予基础的|tcbinputlisting|。 \meta{init options}允许设置自动编号，参见第\pageref{sec:initkeys}页的第\ref{sec:initkeys}节。
\begin{dispExample}
\newtcbinputlisting[use counter from=mycbox]{\mylisting}[2][]{%
listing file={#2},
title=Listing (\thetcbcounter) of \texttt{#2},
colback=red!5!white,colframe=red!75!black,fonttitle=\bfseries,
listing only,breakable,#1}

\mylisting[before upper=\textit{This is the included file content:}]
        {\jobname.tcbtemp}
\end{dispExample}

\begin{dispExample}
\newtcbinputlisting[use counter from=mycbox]{\mylisting}[2][]{%
listing engine=minted,minted language=latex,minted style=colorful,
listing file={#2},
title=Listing (\thetcbcounter) of \texttt{#2},
colback=red!5!white,colframe=red!75!black,fonttitle=\bfseries,
listing only,breakable,#1}

\mylisting[before upper=\textit{This is the included file content:}]
        {\jobname.tcbtemp}
\end{dispExample}
\end{docCommand}


\begin{docCommand}{renewtcbinputlisting}{\oarg{init options}\brackets{\texttt{\textbackslash}\rmfamily\meta{name}}\oarg{number}\oarg{default}\marg{options}}
Operates like \refCom{newtcbinputlisting}, but based on |\renewcommand| instead of |\newcommand|.
An existing macro is redefined.

类似于 \refCom{newtcbinputlisting}，但是基于 |\renewcommand| 而不是 |\newcommand|。 现有的宏被重新定义。
\end{docCommand}

