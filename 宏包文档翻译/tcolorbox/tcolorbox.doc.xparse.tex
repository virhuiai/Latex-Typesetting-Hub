% !TeX root = tcolorbox.tex
% include file of tcolorbox.tex (manual of the LaTeX package tcolorbox)
% \clearpage
\section{Library \mylib{xparse}}\label{sec:xparse}%
\tcbset{external/prefix=external/xparse_}%
\begin{stripedbox}
The library is loaded by a package option or inside the preamble by:
\tcblower
库通过包选项或在序言中加载:
\end{stripedbox}

\begin{dispListing}
\tcbuselibrary{xparse}
\end{dispListing}

\begin{stripedbox}
This also loads the package |xparse| %\cite{latexproject:xparse}
.
\tcblower
这还会加载包|xparse|。
\end{stripedbox}

\begin{stripedbox}
The purpose of this library is to give comfortable access to the powerful document command production with |xparse| for |tcolorbox|.
See the |xparse| package documentation %\cite{latexproject:xparse}
for details about the argument \meta{specification} used in this section.
\tcblower
这个库的目的是通过 |xparse| 给 |tcolorbox| 提供方便、功能强大的文档命令.
有关本节中使用的参数 \meta{specification} 的详细信息。 参见|xparse|包文档。
\end{stripedbox}

%\subsection{Producing Document Commands With \texttt{xparse}}
% Option Keys
\subsection{可选择的选项}\label{subsec:xparse_options}

\begin{docTcbKey}{verbatim}{}{style, no value}
\begin{stripedbox}
Sets options for a \textit{verbatim} style \refComLe{tcbox}.
Since the indented boxes may contain only very few words, 
the dimensions are made smaller and \refKeyLe{/tcb/nobeforeafter} and \refKeyLe{/tcb/tcbox raise base} are set.
\tcblower
设置\refComLe{tcbox}拥有\textit{verbatim}样式的选项。%
由于缩进的盒子可能只包含很少的单词，%
尺寸被设置变小，还指定\refKeyLe{/tcb/nobeforeafter}和\refKeyLe{/tcb/tcbox raise base}选项。
\end{stripedbox}

\begin{dispExample*}{sbs,lefthand ratio=0.6}
\DeclareTotalTCBox{\myverb}{ v }{verbatim,
  colframe=red!75!black,colupper=blue}{#1}

\myverb{\textbf} is a \myverb{\LaTeX} command.
\end{dispExample*}
\end{docTcbKey}

\begin{docTcbKeys}[doc description = {no default}]
  {
    {
      doc name        = IfNoValueTF,
      doc parameter   = {=\marg{argument}\marg{true options}\marg{false options}},
    },
    {
      doc name        = IfNoValueT,
      doc parameter   = {=\marg{argument}\marg{true options}},
      doc new         = 2020-09-16,
    },
    {
      doc name        = IfNoValueF,
      doc parameter   = {=\marg{argument}\marg{false options}},
      doc new         = 2020-09-16,
    }
  }
\begin{stripedbox}
Wraps the |\IfNoValue(TF)| command(s) of |xparse| for option setting.
If the \meta{argument} has no value, the \meta{true options} are set.
Otherwise, the \meta{false options} are set.
\tcblower
包装 |xparse| 的 |\IfNoValue(TF)| 命令用于选项设置。%
如果\meta{argument}没有值，则设置\meta{true options}。%
否则，将设置\meta{false options}。
\end{stripedbox}
\begin{dispExample}
\DeclareTColorBox{mybox}{ o }{colframe=red!75!black,
  IfNoValueTF={#1}{colback=red!5!white}{enhanced,interior style image=#1}}

\begin{mybox}
This is a tcolorbox.
\end{mybox}

\begin{mybox}[goldshade.png]
This is a tcolorbox.
\end{mybox}
\end{dispExample}
\end{docTcbKeys}

\clearpage
\begin{docTcbKeys}[doc description = {no default}]
  {
    {
      doc name        = IfValueTF,
      doc parameter   = {=\marg{argument}\marg{true options}\marg{false options}},
    },
    {
      doc name        = IfValueT,
      doc parameter   = {=\marg{argument}\marg{true options}},
      doc new         = 2020-09-16,
    },
    {
      doc name        = IfValueF,
      doc parameter   = {=\marg{argument}\marg{false options}},
      doc new         = 2020-09-16,
    }
  }
\begin{stripedbox}
Wraps the |\IfValue(TF)| command(s) of |xparse| for option setting.
If the \meta{argument} has a value, the \meta{true options} are set.
Otherwise, the \meta{false options} are set.
\tcblower
包装 |xparse| 的|\IfValue(TF)|命令，用于选项设置。%
如果\meta{argument}有值，则设置\meta{true options}。%
否则，将设置\meta{false options}。
\end{stripedbox}

\begin{dispExample}
\DeclareTColorBox{mybox}{ o }{colframe=red!75!black,colback=red!5!white,
  IfValueT={#1}{title={\flqq #1\frqq},fonttitle=\bfseries}}

\begin{mybox}
This is a tcolorbox.
\end{mybox}

\begin{mybox}[My title]
This is a tcolorbox.
\end{mybox}
\end{dispExample}
\end{docTcbKeys}

\medskip

\begin{docTcbKeys}[doc description = {no default}]
  {
    {
      doc name        = IfBooleanTF,
      doc parameter   = {=\marg{argument}\marg{true options}\marg{false options}},
    },
    {
      doc name        = IfBooleanT,
      doc parameter   = {=\marg{argument}\marg{true options}},
      doc new         = 2020-09-16,
    },
    {
      doc name        = IfBooleanF,
      doc parameter   = {=\marg{argument}\marg{false options}},
      doc new         = 2020-09-16,
    }
  }
\begin{stripedbox}
Wraps the |\IfBoolean(TF)| command(s) of |xparse| for option setting.
If the \meta{argument} is |\BooleanTrue|, the \meta{true options} are set.
If the \meta{argument} is |\BooleanFalse|, the \meta{false options} are set.
\tcblower
包装|xparse|的|\IfBoolean(TF)|命令用于选项设置。
如果\meta{argument}是|\BooleanTrue|，则设置\meta{true options}。
如果\meta{argument}是|\BooleanFalse|，则设置\meta{false options}。
\end{stripedbox}
  

\begin{dispExample}
\DeclareTColorBox{mybox}{ s }{colframe=red!75!black,
  IfBooleanTF={#1}{colback=yellow!50!red}{colback=red!5!white}}

\begin{mybox}
This is a tcolorbox.
\end{mybox}

\begin{mybox}*
This is a tcolorbox.
\end{mybox}
\end{dispExample}
\end{docTcbKeys}

% \clearpage
% Producing \texttt{tcolorbox} Environments and Commands
\subsection{生成\texttt{tcolorbox}环境和命令}\label{subsec:xparse_tcolorbox}

\begin{docCommand}{DeclareTColorBox}{\oarg{init options}\marg{name}\marg{specification}\marg{options}}
\begin{stripedbox}
Creates a new environment \meta{name} based on \refEnvLe{tcolorbox}.
\tcblower
基于\refEnvLe{tcolorbox}创建一个新的环境\meta{name}。
\end{stripedbox}

\begin{stripedbox}
Basically, |\DeclareTColorBox| operates like |\DeclareDocumentEnvironment|. This means,
the new environment \meta{name} is constructed with the given argument \meta{specification}.
The \meta{options} are given to the underlying \refEnvLe{tcolorbox}.
\tcblower
基本上，|\DeclareTColorBox|操作类似|\DeclareDocumentEnvironment|。%
这意味着,%
新的环境\meta{name}是用给定的参数\meta{specification}构造的。%
\meta{options}被赋予底层的\refEnvLe{tcolorbox}。
\end{stripedbox}

\begin{stripedbox}
Note that \refKeyLe{/tcb/savedelimiter} is set to the given \meta{name}
automatically.
\tcblower
注意，\refKeyLe{/tcb/savedelimiter}自动被设置为给定的\meta{name}。
\end{stripedbox}

\begin{stripedbox}
The \meta{init options} allow setting up automatic numbering,
see Section \ref{sec:initkeys} from page \pageref{sec:initkeys}.
\tcblower
\meta{init options}允许设置自动编号，%
请参见 \pageref{sec:initkeys}页的章节\ref{sec:initkeys}。
\end{stripedbox}

\begin{stripedbox}
The new environment is always created, irrespective of an already existing
environment with the same name.
\tcblower
新环境总是被创建，而不考虑已经存在的具有相同名称的环境。
\end{stripedbox}

\begin{dispExample}
% counter from previous example
\DeclareTColorBox[use counter from=pabox]{mybox}{ O{red} m d"" !O{} }
  {enhanced,colframe=#1!75!black,colback=#1!5!white,
   fonttitle=\bfseries,title={\thetcbcounter~#2},
   IfValueT={#3}{watermark text={#3}},#4}

\begin{mybox}{My title}
This is a tcolorbox.
\end{mybox}

\begin{mybox}[blue]{My title}
This is a tcolorbox.
\end{mybox}

\begin{mybox}[green]{My title}"My Watermark"
This is a tcolorbox.
\end{mybox}

\begin{mybox}[yellow]{My title}[colbacktitle=yellow!50!white,coltitle=black]
This is a tcolorbox.
\end{mybox}

\begin{mybox}[purple]{My title}"All together"[coltitle=yellow]
This is a tcolorbox.
\end{mybox}
\end{dispExample}
\end{docCommand}

% \clearpage
\begin{docCommand}{NewTColorBox}{\oarg{init options}\marg{name}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTColorBox}, 
but based on |\NewDocumentEnvironment| instead of |\DeclareDocumentEnvironment|.
An error is issued if \meta{name} has already been defined.
\tcblower
操作方式类似\refComLe{DeclareTColorBox}，%
但是基于|\NewDocumentEnvironment|而不是|\DeclareDocumentEnvironment|。%
如果已经定义了\meta{name}，则会发出错误。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{RenewTColorBox}{\oarg{init options}\marg{name}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTColorBox}, but based on |\RenewDocumentEnvironment| instead of |\DeclareDocumentEnvironment|.
An existing environment is redefined.
\tcblower
操作类似\refComLe{DeclareTColorBox}，%
但是基于|\RenewDocumentEnvironment|而不是|\DeclareDocumentEnvironment|。%
重新定义现有环境。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{ProvideTColorBox}{\oarg{init options}\marg{name}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTColorBox}, but based on |\ProvideDocumentEnvironment| instead of |\DeclareDocumentEnvironment|.
The environment \meta{name} is only created if it is not already defined.
\tcblower
操作类似\refComLe{DeclareTColorBox}，但基于|\ProvideDocumentEnvironment|而不是|\DeclareDocumentEnvironment|。
环境\meta{name}只有在尚未定义时才会被创建。
\end{stripedbox}
\end{docCommand}

% \clearpage
\begin{docCommand}{DeclareTotalTColorBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Creates a new command \texttt{\textbackslash}\meta{name} based on \refEnvLe{tcolorbox}.
In contrast to \refComLe{DeclareTColorBox}, also the \meta{content} of the |tcolorbox| is specified.
\tcblower
基于\refEnvLe{tcolorbox}创建一个新命令\texttt{\textbackslash}\meta{name}。%
与\refComLe{DeclareTColorBox}相反，|tcolorbox|的\meta{content}也被指定。
\end{stripedbox}
  
  
\begin{stripedbox}
Basically, |\DeclareTotalTColorBox| operates like |\DeclareDocumentCommand|. This means,
the new command \texttt{\textbackslash}\meta{name} is constructed with the given argument \meta{specification}.
The \meta{options} are given to the underlying \refEnvLe{tcolorbox} which is filled with
the specified \meta{content}.
\tcblower
基本上，|\DeclareTotalTColorBox|操作类似|\DeclareDocumentCommand|。%
这意味着,新命令\texttt{\textbackslash}\meta{name}是用给定的参数\meta{specification}构造的。%
\meta{options}被设置到底层的\refEnvLe{tcolorbox}，该\refEnvLe{tcolorbox}被指定的\meta{content}填充。
\end{stripedbox}
  
\begin{stripedbox}
Note that \refKeyLe{/tcb/savedelimiter} is set to the given \meta{name}
automatically.
\tcblower
注意\refKeyLe{/tcb/savedelimiter}自动被设置为给定的\meta{name}
\end{stripedbox}

\begin{stripedbox}
The \meta{init options} allow setting up automatic numbering,
see Section \ref{sec:initkeys} from page \pageref{sec:initkeys}.
\tcblower
\meta{init选项}允许设置自动编号，
请参见 \pageref{sec:initkeys}页的\ref{sec:initkeys}章节。
\end{stripedbox}

\begin{stripedbox}
The new command is always created, irrespective of an already existing
command with the same name.
\tcblower
新命令总是被创建，而不考虑已经存在的同名命令。
\end{stripedbox}

\begin{dispExample}
\DeclareTotalTColorBox{\diabox}{ O{} v  m }
  { bicolor,nobeforeafter,equal height group=diabox,width=5.7cm,
    fonttitle=\bfseries\ttfamily,adjusted title={#2},center title,
    colframe=blue!20!black,leftupper=0mm,rightupper=0mm,colback=black!75!white,#1}
  { \tikz\path[fill zoom image={#2}] (0,0) rectangle (\linewidth,4cm);%
    \tcblower#3}

\diabox{blueshade.png}{Created with |GIMP|.\\\url{http://www.gimp.org}}
\diabox{goldshade.png}{Created with |GIMP|.\\\url{http://www.gimp.org}}

\end{dispExample}
\end{docCommand}

\begin{docCommand}{NewTotalTColorBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Operates like \refComLe{DeclareTotalTColorBox}, but based on |\NewDocumentCommand| instead of |\DeclareDocumentCommand|.
An error is issued if \texttt{\textbackslash}\meta{name} has already been defined.
\tcblower
操作类似\refComLe{DeclareTotalTColorBox}，但基于|\NewDocumentCommand|而不是|\DeclareDocumentCommand|
如果已经定义了\texttt{\textbackslash}\meta{name}，则会发出错误。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{RenewTotalTColorBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Operates like \refComLe{DeclareTotalTColorBox}, but based on |\RenewDocumentCommand| instead of |\DeclareDocumentCommand|.
An existing command is redefined.
\tcblower
操作类似\refComLe{DeclareTotalTColorBox}，但基于|\RenewDocumentCommand|而不是|\DeclareDocumentCommand|。
重新定义现有命令。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{ProvideTotalTColorBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Operates like \refComLe{DeclareTotalTColorBox}, but based on |\ProvideDocumentCommand| instead of |\DeclareDocumentCommand|.
The command \texttt{\textbackslash}\meta{name} is only created if it is not already defined.
\tcblower
操作类似\refComLe{DeclareTotalTColorBox}，但基于|\ProvideDocumentCommand|而不是|\DeclareDocumentCommand|。命令\texttt{\textbackslash}\meta{name}只有在尚未定义时才会被创建。
\end{stripedbox}  
\end{docCommand}

% \clearpage
% Producing \texttt{tcbox} Commands
\subsection{生成\texttt{tcbox}命令}\label{subsec:xparse_tcbox}

\begin{docCommand}{DeclareTCBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Creates a new command \texttt{\textbackslash}\meta{name} based on \refComLe{tcbox}.
Basically, |\DeclareTCBox| operates like |\DeclareDocumentCommand|. This means,
the new command \texttt{\textbackslash}\meta{name} is constructed with the given argument \meta{specification}.
The \meta{options} are given to the underlying \refComLe{tcbox}.
\tcblower
基于\refComLe{tcbox}创建一个新命令\texttt{\textbackslash}\meta{name}。%
基本上，|\DeclareTCBox|操作类似|\DeclareDocumentCommand|。这意味着,%
新命令\texttt{\textbackslash}\meta{name}是用给定的参数\meta{specification}构造的。\meta{options}被赋给底层的\refComLe{tcbox}。
\end{stripedbox}


\begin{stripedbox}
Note that \refKeyLe{/tcb/savedelimiter} is set to the given \meta{name}
automatically.
\tcblower
注意\refKeyLe{/tcb/savedelimiter}自动被设置为给定的\meta{name}。
\end{stripedbox}

\begin{stripedbox}
The \meta{init options} allow setting up automatic numbering,
see Section \ref{sec:initkeys} from page \pageref{sec:initkeys}.
\tcblower
\meta{init选项}允许设置自动编号,
请参见 \pageref{sec:initkeys} 页中的 \ref{sec:initkeys} 章节。
\end{stripedbox}

\begin{stripedbox}
The new command is always created, irrespective of an already existing
command with the same name.
\tcblower
新命令总是被创建，而不考虑已经存在的同名命令。
\end{stripedbox}
  

\begin{dispExample}
% counter from previous example
\DeclareTCBox[use counter from=pabox]{\mybox}{ s m s }
{ nobeforeafter,colback=red!5!white,colframe=red!75!black,
  title={#2 (Box \thetcbcounter)},fonttitle=\bfseries,
  IfBooleanT={#1}{enhanced,drop shadow},
  IfBooleanT={#3}{colbacktitle=red!50!white} }

\mybox{Bird}{This is my first box.}
  \hfill
\mybox*{Tree}{This is my second box.}
  \par\bigskip
\mybox{Bike}*{This is my third box.}
  \hfill
\mybox*{City}*{This is my fourth box.}
\end{dispExample}
\end{docCommand}

\begin{docCommand}{NewTCBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBox}, but based on |\NewDocumentCommand| instead of |\DeclareDocumentCommand|.
An error is issued if \texttt{\textbackslash}\meta{name} has already been defined.
\tcblower
操作类似\refComLe{DeclareTCBox}，但基于|\NewDocumentCommand|而不是|\DeclareDocumentCommand|。
如果已经定义了\texttt{\textbackslash}\meta{name}，则会发出错误。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{RenewTCBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBox}, but based on |\RenewDocumentCommand| instead of |\DeclareDocumentCommand|.
An existing command is redefined.
\tcblower
操作类似\refComLe{DeclareTCBox}，但基于|\RenewDocumentCommand|而不是|\DeclareDocumentCommand|。%
重新定义现有命令。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{ProvideTCBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBox}, but based on |\ProvideDocumentCommand| instead of |\DeclareDocumentCommand|.
The command \texttt{\textbackslash}\meta{name} is only created if it is not already defined.
\tcblower
操作类似\refComLe{DeclareTCBox}，但基于|\ProvideDocumentCommand|而不是|\DeclareDocumentCommand|。
命令 \texttt{\textbackslash}\meta{name} 只有在尚未定义时才会被创建。
\end{stripedbox}
\end{docCommand}

% \clearpage

\begin{docCommand}{DeclareTotalTCBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}

\begin{stripedbox}
Creates a new command \texttt{\textbackslash}\meta{name} based on \refComLe{tcbox}.
In contrast to \refComLe{DeclareTCBox}, also the \meta{content} of the |tcbox| is specified.
\tcblower
基于\refComLe{tcbox}创建一个新命令\texttt{\textbackslash}\meta{name}。%
与\refComLe{DeclareTCBox}相反，|tcbox|的\meta{content}也被指定。
\end{stripedbox}

\begin{stripedbox}
Basically, |\DeclareTotalTCBox| operates like |\DeclareDocumentCommand|. This means,
the new command \texttt{\textbackslash}\meta{name} is constructed with the given argument \meta{specification}.
The \meta{options} are given to the underlying \refComLe{tcbox} which is filled with
the specified \meta{content}.
\tcblower
基本上，|\DeclareTotalTCBox|操作类似|\DeclareDocumentCommand|。这意味着,
新命令\texttt{\textbackslash}\meta{name}是用给定的参数\meta{specification}构造的。
\meta{options}被赋予底层的\refComLe{tcbox}，该\refComLe{tcbox}被填充
指定的\meta{content}。
\end{stripedbox}
  

\begin{stripedbox}
Note that \refKeyLe{/tcb/savedelimiter} is set to the given \meta{name}
automatically.
\tcblower
注意\refKeyLe{/tcb/savedelimiter}被自动设置为给定的\meta{name}。
\end{stripedbox}


\begin{stripedbox}
The \meta{init options} allow setting up automatic numbering,
see Section \ref{sec:initkeys} from page \pageref{sec:initkeys}.
\tcblower
\meta{init选项}允许设置自动编号，
请参见 \pageref{sec:initkeys} 页中的 \ref{sec:initkeys} 章节。
\end{stripedbox}


\begin{stripedbox}
The new command is always created, irrespective of an already existing
command with the same name.
\tcblower
新命令总是被创建，而不考虑已经存在的同名命令。
\end{stripedbox}

\begin{dispExample}
\DeclareTotalTCBox{\myverb}{ O{red} v !O{} }
{ fontupper=\ttfamily,nobeforeafter,tcbox raise base,arc=0pt,outer arc=0pt,
  top=0pt,bottom=0pt,left=0mm,right=0mm,
  leftrule=0pt,rightrule=0pt,toprule=0.3mm,bottomrule=0.3mm,boxsep=0.5mm,
  colback=#1!10!white,colframe=#1!50!black,#3}{#2}

To set a word \textbf{bold} in \myverb{\LaTeX}, use
\myverb[green]{\textbf{bold}}. Alternatively, write
\myverb[yellow]{{\bfseries bold}}.
In \myverb[blue]{\LaTeX}[enhanced,fuzzy halo], other font settings are
done in the same way, e.\,g. \myverb{\textit}, \myverb{\itshape}\\
or \myverb[brown]{\texttt}, \myverb[brown]{\ttfamily}.
\end{dispExample}

\begin{stripedbox}
The next example uses |\lstinline| from the |listings| package to
typeset the verbatim content.
\tcblower
下面的例子使用 |listings| 包的 |\lstinline| 逐字排版内容。
\end{stripedbox}


\begin{dispExample}
% \usepackage{listings} or \tcbuselibrary{listings}
\DeclareTotalTCBox{\commandbox}{ s v }
{verbatim,colupper=white,colback=black!75!white,colframe=black}
{\IfBooleanT{#1}{\textcolor{red}{\ttfamily\bfseries > }}%
  \lstinline[language=command.com,keywordstyle=\color{blue!35!white}\bfseries]^#2^}

\commandbox*{cd "My Documents"} changes to directory \commandbox{My Documents}.

\commandbox*{dir /A} lists the directory content.

\commandbox*{copy example.txt d:\target} copies \commandbox{example.txt} to
  \commandbox{d:\target}.
\end{dispExample}
\end{docCommand}

% \clearpage
\begin{docCommand}{NewTotalTCBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Operates like \refComLe{DeclareTotalTCBox}, but based on |\NewDocumentCommand| instead of |\DeclareDocumentCommand|.
An error is issued if \texttt{\textbackslash}\meta{name} has already been defined.
\tcblower
操作类似\refComLe{DeclareTotalTCBox}，但基于|\NewDocumentCommand|而不是|\DeclareDocumentCommand|。%
如果已经定义了\texttt{\textbackslash}\meta{name}，则会发出错误。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{RenewTotalTCBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Operates like \refComLe{DeclareTotalTCBox}, but based on |\RenewDocumentCommand| instead of |\DeclareDocumentCommand|.
An existing command is redefined.
\tcblower
操作类似\refComLe{DeclareTotalTCBox}，但基于|\RenewDocumentCommand|而不是|\DeclareDocumentCommand|。重新定义现有命令。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{ProvideTotalTCBox}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Operates like \refComLe{DeclareTotalTCBox}, but based on |\ProvideDocumentCommand| instead of |\DeclareDocumentCommand|.
The command \texttt{\textbackslash}\meta{name} is only created if it is not already defined.
\tcblower
操作类似\refComLe{DeclareTotalTCBox}，但基于|\ProvideDocumentCommand|而不是|\DeclareDocumentCommand|。命令\texttt{\textbackslash}\meta{name}只有在尚未定义时才会被创建。
\end{stripedbox}
\end{docCommand}


\begin{docCommand}{tcboxverb}{\oarg{options}\marg{verbatim box content}}
\begin{stripedbox}
Creates a colored box based on \refComLe{tcbox} which is fitted to the width of the given
\meta{verbatim box content}.
The underlying \refComLe{tcbox} is styled with
\refKeyLe{/tcb/verbatim} plus the given \meta{options}.
The difference to \refComLe{tcbox} is that the \meta{verbatim box content} is
interpreted \textit{verbatim}. Therefore, |\tcboxverb| acts similar to |\verb|.
\tcblower
基于\refComLe{tcbox}创建一个与给定\meta{verbatim box content}宽度相匹配的彩色盒子。
底层的\refComLe{tcbox}的样式使用\refKeyLe{/tcb/verbatim}加上给定的\meta{options}进行设置。
\refComLe{tcbox}的不同之处在于\meta{verbatim box content}被\textit{逐个输出}。因此，|\tcboxverb|的行为类似于|\verb|。
\end{stripedbox}


\begin{dispExample}
\tcboxverb{\LaTeX}, \tcboxverb[colback=blue!10!white,colupper=blue]{\LaTeX},
\tcboxverb[blank,fuzzy halo]{\LaTeX}, \tcboxverb[beamer]{\LaTeX},
\tcboxverb[enhanced,skin=enhancedmiddle jigsaw,colframe=red]{\LaTeX}.
\end{dispExample}
\end{docCommand}

% \clearpage
% Producing \texttt{tcblisting} Environments
\subsection{生成\texttt{tcblisting}环境}\label{subsec:xparse_listing}
\begin{marker}
\begin{stripedbox}
Besides \mylib{xparse}, the following commands also need the \mylib{listings} library to be included.
\tcblower
除了\mylib{xparse}，下面的命令还需要包含\mylib{listings}库。
\end{stripedbox}
\end{marker}

\begin{docCommand}{DeclareTCBListing}{\oarg{init options}\marg{name}\marg{specification}\marg{options}}
  
\begin{stripedbox}
Creates a new environment \meta{name} based on \refEnvLe{tcblisting}.
\tcblower
基于\refEnvLe{tcblisting}创建一个新环境\meta{name}。
\end{stripedbox}


\begin{stripedbox}
Basically, |\DeclareTCBListing| operates like |\DeclareDocumentEnvironment|. This means,
the new environment \meta{name} is constructed with the given argument \meta{specification}.
The \meta{options} are given to the underlying \refEnvLe{tcblisting}.
\tcblower
基本上，|\DeclareTCBListing|操作类似|\DeclareDocumentEnvironment|。这意味着,
新的环境\meta{name}是用给定的参数\meta{specification}构造的。
\meta{options}被设置到底层的\refEnvLe{tcblisting}。
\end{stripedbox}


\begin{stripedbox}
Note that \refKeyLe{/tcb/savedelimiter} is set to the given \meta{name}
automatically.
\tcblower
注意\refKeyLe{/tcb/savedelimiter}被自动设置为给定的\meta{name}。
\end{stripedbox}

\begin{stripedbox}
The \meta{init options} allow setting up automatic numbering,
see Section \ref{sec:initkeys} from page \pageref{sec:initkeys}.
\tcblower
\meta{init options}允许设置自动编号，%
请参见 \pageref{sec:initkeys} 页中的 \ref{sec:initkeys}章节。
\end{stripedbox}

\begin{stripedbox}
The new environment is always created, irrespective of an already existing
environment with the same name.
\tcblower
新环境总是被创建，而不考虑已经存在的具有相同名称的环境。
\end{stripedbox}

\begin{dispExample*}{sbs,lefthand ratio=0.5}
\DeclareTCBListing{mybox}{ s O{} m }{%
  colback=red!5!white,
  colframe=red!75!black,
  fonttitle=\bfseries,
  IfBooleanTF={#1}
    {listing side text}
    {text side listing},
  title={#3},#2}

\begin{mybox}{Listing Box}
This is my
\LaTeX\ box.
\end{mybox}
\bigskip

\begin{mybox}*{Listing Box}
This is my
\LaTeX\ box.
\end{mybox}
\bigskip

\begin{mybox}[colback=yellow]
  {Listing Box}
This is my
\LaTeX\ box.
\end{mybox}
\end{dispExample*}
\end{docCommand}

\begin{docCommand}{NewTCBListing}{\oarg{init options}\marg{name}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBListing}, but based on |\NewDocumentEnvironment| instead of |\DeclareDocumentEnvironment|.
An error is issued if \meta{name} has already been defined.
\tcblower
操作类似\refComLe{DeclareTCBListing}，但基于|\NewDocumentEnvironment|而不是|\DeclareDocumentEnvironment|。
如果已经定义了\meta{name}，则会发出错误。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{RenewTCBListing}{\oarg{init options}\marg{name}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBListing}, but based on |\RenewDocumentEnvironment| instead of |\DeclareDocumentEnvironment|.
An existing environment is redefined.
\tcblower
操作类似\refComLe{DeclareTCBListing}，但基于|\RenewDocumentEnvironment|而不是|\DeclareDocumentEnvironment|。
重新定义现有环境。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{ProvideTCBListing}{\oarg{init options}\marg{name}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBListing}, but based on |\ProvideDocumentEnvironment| instead of |\DeclareDocumentEnvironment|.
The environment \meta{name} is only created if it is not already defined.
\tcblower
操作类似\refComLe{DeclareTCBListing}，但基于|\ProvideDocumentEnvironment|而不是|\DeclareDocumentEnvironment|。
环境\meta{name}只有在尚未定义时才会被创建。
\end{stripedbox}    
\end{docCommand}

% \clearpage
\begin{marker}
\begin{stripedbox}
With date of 2018-05-12, the |xparse| %\cite{latexproject:xparse} 
package changed the argument collection process.
Now, spaces are ignored which leads to a serious change for listing environments
ending with an optional argument like \verb+O{}+.
The former behavior of respecting spaces can be preserved by adding a \flqq\verb+!+\frqq.
Note that the following code uses \verb+!O{}+ now.
\tcblower
从2018-05-12开始，|xparse|包改变了参数收集过程。%
现在，空格被忽略了，这导致以 \verb+O{}+ 这样的可选参数结尾的环境列表发生了重大变化。%
通过添加 \flqq\verb+!+\frqq ,可以保留以前空格的行为。%
注意，下面的代码使用了 \verb+!O{}+ 了。
\end{stripedbox}
\begin{itemize}
\item For older |xparse| versions, the following code is correct when using \verb+O{}+.
\item For |xparse| of 2018-05-12, only the first two examples of
  the following code using \verb+O{}+ are really \flqq good\frqq\ -- all others do not work.
\item For |xparse| of 2018-05-12 and later, the following code is correct when using \verb+!O{}+.
\end{itemize}
\end{marker}





\begin{dispListing*}{title={Caveats of using an environment ending with an
  optional argument},fonttitle=\bfseries}
\DeclareTCBListing{mybox}{ !O{} }{listing only,#1}

\begin{mybox}[colframe=red]
\good
\end{mybox}

\begin{mybox}[colframe=red]\good\end{mybox}

\begin{mybox}
\good
\end{mybox}

\begin{mybox} \good\end{mybox}

\begin{mybox}\bad!\end{mybox}

\begin{mybox}
[\good]
\end{mybox}

\begin{mybox} [\good]\end{mybox}

\begin{mybox}[\bad!]\end{mybox}
\end{dispListing*}

% \clearpage
% Producing \texttt{tcbinputlisting} Commands
\subsection{生成\texttt{tcbinputlisting}命令}\label{subsec:xparse_inputlisting}
\begin{marker}
\begin{stripedbox}
The following commands need the \mylib{listings} library to be included.
\tcblower
下面的命令需要包含\mylib{listings}库。
\end{stripedbox}
\end{marker}


\begin{docCommand}{DeclareTCBInputListing}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Creates a new command \texttt{\textbackslash}\meta{name} based on \refComLe{tcbinputlisting}.
Basically, |\DeclareTCBInputListing| operates like |\DeclareDocumentCommand|. This means,
the new command \texttt{\textbackslash}\meta{name} is constructed with the given argument \meta{specification}.
The \meta{options} are given to the underlying \refComLe{tcbinputlisting}.\\
The \meta{init options} allow setting up automatic numbering,
see Section \ref{sec:initkeys} from page \pageref{sec:initkeys}.\\
The new command is always created, irrespective of an already existing
command with the same name.
\tcblower
基于\refComLe{tcbinputlisting}创建一个新命令\texttt{\textbackslash}\meta{name}。%
基本上，|\DeclareTCBInputListing|操作类似|\DeclareDocumentCommand|。这意味着,新命令\texttt{\textbackslash}\meta{name}是用给定的参数\meta{specification}构造的。%
\meta{options}被赋给底层的\refComLe{tcbinputlisting}。\\%
\meta{init选项}允许设置自动编号，
请参见 \pageref{sec:initkeys} 页的 \ref{sec:initkeys} 章节。\\
新命令总是被创建，不管是否已经存在同名命令。
\end{stripedbox}

\begin{dispExample}
% counter from previous example
\DeclareTCBInputListing[use counter from=pabox]{\mylisting}{ O{} O{red} m }{%
  listing file={#3},title=Listing~\thetcbcounter,
  colback=#2!5!white,colframe=#2!50!black,colbacktitle=#2!75!black,
  fonttitle=\bfseries,listing only,#1}

\mylisting[before upper=\textit{This is the included file content:}]
  [blue]{\jobname.tcbtemp}
\end{dispExample}
  \end{docCommand}

\begin{docCommand}{NewTCBInputListing}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBInputListing}, but based on |\NewDocumentCommand| instead of |\DeclareDocumentCommand|.
An error is issued if \texttt{\textbackslash}\meta{name} has already been defined.
\tcblower
操作类似\refComLe{DeclareTCBInputListing}，但基于|\NewDocumentCommand|而不是|\DeclareDocumentCommand|。
如果已经定义了\texttt{\textbackslash}\meta{name}，则会发出错误。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{RenewTCBInputListing}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBInputListing}, but based on |\RenewDocumentCommand| instead of |\DeclareDocumentCommand|.
An existing command is redefined.
\tcblower
操作类似\refComLe{DeclareTCBInputListing}，但基于|\RenewDocumentCommand|而不是|\DeclareDocumentCommand|。
重新定义现有命令。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{ProvideTCBInputListing}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBInputListing}, but based on |\ProvideDocumentCommand| instead of |\DeclareDocumentCommand|.
The command \texttt{\textbackslash}\meta{name} is only created if it is not already defined.
\tcblower
作类似\refComLe{DeclareTCBInputListing}，但基于|\ProvideDocumentCommand|而不是|\DeclareDocumentCommand|。
命令\texttt{\textbackslash}\meta{name}只有在尚未定义时才会被创建。
\end{stripedbox}
\end{docCommand} 

% \clearpage
% Producing \texttt{tboxfit} Commands
\subsection{生成\texttt{tboxfit}命令}\label{subsec:xparse_tcboxfit}
\begin{marker}
\begin{stripedbox}
The following commands need the \mylib{fitting} library to be included.
\tcblower
下面的命令需要包含\mylib{fitting}库。
\end{stripedbox}
\end{marker}

\begin{docCommand}{DeclareTCBoxFit}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Creates a new command \texttt{\textbackslash}\meta{name} based on \refComLe{tcboxfit}.
Basically, |\DeclareTCBoxFit| operates like |\DeclareDocumentCommand|. This means,
the new command \texttt{\textbackslash}\meta{name} is constructed with the given argument \meta{specification}.
The \meta{options} are given to the underlying \refComLe{tcboxfit}.\\
Note that \refKeyLe{/tcb/savedelimiter} is set to the given \meta{name}
automatically.\\
The \meta{init options} allow setting up automatic numbering,
see Section \ref{sec:initkeys} from page \pageref{sec:initkeys}.\\
The new command is always created, irrespective of an already existing
command with the same name.
\tcblower
基于\refComLe{tcboxfit}创建一个新命令\texttt{\textbackslash}\meta{name}。%
基本上，|\DeclareTCBoxFit|操作类似|\DeclareDocumentCommand|。这意味着,新命令\texttt{\textbackslash}\meta{name}是用给定的参数\meta{specification}构造的。
\meta{options}被赋给底层的\refComLe{tcboxfit}。\\
注意\refKeyLe{/tcb/savedelimiter}自动被设置为给定的\meta{name}。\\
\meta{init选项}允许设置自动编号，%
请参见 \pageref{sec:initkeys} 页的 \ref{sec:initkeys} 章节。\\
新命令总是被创建，不管是否已经存在同名的命令。
\end{stripedbox}
\begin{dispExample*}{sbs,lefthand ratio=0.6}
% \usepackage{lipsum}

\DeclareTCBoxFit{\mybox}{ O{} m !o }
 {colback=red!5!white,
  colframe=red!75!black,
  width=#2,height=#2/3*2,
  IfValueT={#3}{height=#3},
  #1}

\mybox[colback=yellow]{5cm}%
  {\lipsum[2]}

\mybox[colback=yellow]{5cm}[4cm]{\lipsum[2]}
\end{dispExample*}
\end{docCommand}

\begin{docCommand}{NewTCBoxFit}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBoxFit}, but based on |\NewDocumentCommand| instead of |\DeclareDocumentCommand|.
An error is issued if \texttt{\textbackslash}\meta{name} has already been defined.
\tcblower
操作类似\refComLe{DeclareTCBoxFit}，但基于|\NewDocumentCommand|而不是|\DeclareDocumentCommand|。
如果已经定义了\texttt{\textbackslash}\meta{name}，则会发出错误。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{RenewTCBoxFit}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBoxFit}, but based on |\RenewDocumentCommand| instead of |\DeclareDocumentCommand|.
An existing command is redefined.
\tcblower
操作类似\refComLe{DeclareTCBoxFit}，但基于|\RenewDocumentCommand|而不是|\DeclareDocumentCommand|。
重新定义现有命令。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{ProvideTCBoxFit}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}}
\begin{stripedbox}
Operates like \refComLe{DeclareTCBoxFit}, but based on |\ProvideDocumentCommand| instead of |\DeclareDocumentCommand|.
The command \texttt{\textbackslash}\meta{name} is only created if it is not already defined.
\tcblower
操作类似\refComLe{DeclareTCBoxFit}，但基于|\ProvideDocumentCommand|而不是|\DeclareDocumentCommand|。
命令\texttt{\textbackslash}\meta{name}只有在尚未定义时才会被创建。
\end{stripedbox}
\end{docCommand}

% \clearpage

\begin{docCommand}{DeclareTotalTCBoxFit}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Creates a new command \texttt{\textbackslash}\meta{name} based on \refComLe{tcboxfit}.
In contrast to \refComLe{DeclareTCBoxFit}, also the \meta{content} of the |tcboxfit| is specified.\\
Basically, |\DeclareTotalTCBoxFit| operates like |\DeclareDocumentCommand|. This means,
the new command \texttt{\textbackslash}\meta{name} is constructed with the given argument \meta{specification}.
The \meta{options} are given to the underlying \refComLe{tcboxfit} which is filled with
the specified \meta{content}.\\
Note that \refKeyLe{/tcb/savedelimiter} is set to the given \meta{name}
automatically.\\
The \meta{init options} allow setting up automatic numbering,
see Section \ref{sec:initkeys} from page \pageref{sec:initkeys}.\\
The new command is always created, irrespective of an already existing
command with the same name.
\tcblower
基于\refComLe{tcboxfit}创建一个新命令\texttt{\textbackslash}\meta{name}。
与\refComLe{DeclareTCBoxFit}不同，|tcboxfit|的\meta{content}也被指定。\\
基本上，|\DeclareTotalTCBoxFit|操作类似|\DeclareDocumentCommand|。这意味着,
新命令\texttt{\textbackslash}\meta{name}是用给定的参数\meta{specification}构造的。
\meta{options}被设置到底层的\refComLe{tcboxfit}，该\refComLe{tcboxfit}被填充指定的\meta{content}。\\
注意\refKeyLe{/tcb/savedelimiter}被自动设置为给定的\meta{name}。\\
\meta{init选项}允许设置自动编号，
请参见 \pageref{sec:initkeys} 页的 \ref{sec:initkeys} 章节。\\
新命令总是被创建，不管是否已经存在同名命令。
\end{stripedbox}

\begin{dispExample}
% \usepackage{lipsum}

\DeclareTotalTCBoxFit{\multibox}{ O{} m O{10} m }
 {nobeforeafter,colback=red!5!white,colframe=red!75!black,width=#2,height=#2/3*2,
  valign=center,#1}
 { \foreach \n in {1,...,#3} { #4} }

\multibox{5cm}{I shall not repeat.}
\multibox[colframe=blue!75!white]{5cm}[20]{I shall not repeat.}\\
\multibox[colback=yellow,height=5cm]{14cm}[100]{I shall not repeat.}
\end{dispExample}
\end{docCommand}

\begin{docCommand}{NewTotalTCBoxFit}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Operates like \refComLe{DeclareTotalTCBoxFit}, but based on |\NewDocumentCommand| instead of |\DeclareDocumentCommand|.
An error is issued if \texttt{\textbackslash}\meta{name} has already been defined.
\tcblower
操作类似\refComLe{DeclareTotalTCBoxFit}，但基于|\NewDocumentCommand|而不是|\DeclareDocumentCommand|。
如果已经定义了\texttt{\textbackslash}\meta{name}，则会发出错误。
\end{stripedbox}
\end{docCommand}


\begin{docCommand}{RenewTotalTCBoxFit}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Operates like \refComLe{DeclareTotalTCBoxFit}, but based on |\RenewDocumentCommand| instead of |\DeclareDocumentCommand|.
An existing command is redefined.
\tcblower
操作类似\refComLe{DeclareTotalTCBoxFit}，但基于|\RenewDocumentCommand|而不是|\DeclareDocumentCommand|。
重新定义现有命令。
\end{stripedbox}
\end{docCommand}

\begin{docCommand}{ProvideTotalTCBoxFit}{\oarg{init options}\brackets{\texttt{\textbackslash}\meta{name}}\marg{specification}\marg{options}\marg{content}}
\begin{stripedbox}
Operates like \refComLe{DeclareTotalTCBoxFit}, but based on |\ProvideDocumentCommand| instead of |\DeclareDocumentCommand|.
The command \texttt{\textbackslash}\meta{name} is only created if it is not already defined.
\tcblower
操作类似\refComLe{DeclareTotalTCBoxFit}，但基于|\ProvideDocumentCommand|而不是|\DeclareDocumentCommand|。
命令\texttt{\textbackslash}\meta{name}只有在尚未定义时才会被创建。
\end{stripedbox}
\end{docCommand}