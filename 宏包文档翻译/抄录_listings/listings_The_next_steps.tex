
% \subsection{Layout elements}
%
% It's always a good idea to structure the layout by vertical space,
% horizontal lines, or different type sizes and typefaces. The best to stress
% whole listings are---not all at once---colours, frames, vertical space, and
% captions. The latter are also good to refer to listings, of course.
%
% \paragraph{Vertical space}
% The keys {\rstyle\ikeyname{aboveskip}} and {\rstyle\ikeyname{belowskip}}
% control the vertical space above and below displayed listings. Both keys get
% a dimension or skip as value and are initialized to |\medskipamount|.
%
% \paragraph{Frames}
% The key \ikeyname{frame} takes the verbose values \keyvalue{none},
% \keyvalue{leftline}, \keyvalue{topline}, \keyvalue{bottomline},
% \keyvalue{lines} (top and bottom), \keyvalue{single} for single frames, or
% \keyvalue{shadowbox}.
% \begin{lstsample}[frame]{}{}
%    \begin{lstlisting}[frame=single]
%    for i:=maxint to 0 do
%    begin
%        { do nothing }
%    end;
%    \end{lstlisting}
% \end{lstsample}
% \begin{advise}
% \item The rules aren't aligned.
%       \advisespace
%       This could be a bug of this package or a problem with your
%       \texttt{.dvi} driver. \emph{Before} sending a bug report to the package
%       author, modify the parameters described in section \ref{rFrames}
%       heavily. And do this step by step!
%       For example, begin with `|framerule=10mm|'. If the rules are
%       misaligned by the same (small) amount as before, the problem does not
%       come from the rule width. So continue with the next parameter.  Also,
%       Adobe Acrobat sometimes has single-pixel rounding errors which can
%       cause small misalignments at the corners when PDF files are displayed
%       on screen; these are unfortunately normal.
% \end{advise}
% Alternatively you can control the rules at the \texttt{t}op, \texttt{r}ight,
% \texttt{b}ottom, and \texttt{l}eft directly by using the four initial letters
% for single rules and their upper case versions for double rules.
% \begin{lstsample}[frame]{}{}
%    \begin{lstlisting}[frame=trBL]
%    for i:=maxint to 0 do
%    begin
%        { do nothing }
%    end;
%    \end{lstlisting}
% \end{lstsample}
% Note that a corner is drawn if and only if both adjacent rules are requested.
% You might think that the lines should be drawn up to the edge, but what's
% about round corners? The key \ikeyname{frameround} must get exactly four
% characters as value. The first character is attached to the upper right
% corner and it continues clockwise. `\texttt{t}' as character makes the
% corresponding corner round.
% \begin{lstsample}[frameround]{}{}
%    \lstset{frameround=fttt}
%    \begin{lstlisting}[frame=trBL]
%    for i:=maxint to 0 do
%    begin
%        { do nothing }
%    end;
%    \end{lstlisting}
% \end{lstsample}
% Note that \ikeyname{frameround} has been used together with |\lstset| and thus
% the value affects all following listings in the same group or environment.
% Since the listing is inside a \texttt{minipage} here, this is no problem.
% \begin{advise}
% \item Don't use frames all the time, and in particular not with short listings.
%       This would emphasize nothing. Use frames for $10\%$ or even less of
%       your listings, for your most important ones.
% \item If you use frames on floating listings, do you really want frames?
%       \advisespace
%       No, I want to separate floats from text.
%       \advisespace
%       Then it is better to redefine \LaTeX's `|\topfigrule|' and
%       `|\botfigrule|'. For example, you could write
%       `|\renewcommand*\topfigrule{\hrule\kern-0.4pt\relax}|' and make the
%       same definition for |\botfigrule|.
% \end{advise}
%
% \paragraph{Captions}
% Now we come to \ikeyname{caption} and \ikeyname{label}. You might guess
% (correctly) that they can be used in the same manner as \LaTeX's |\caption|
% and |\label| commands, although here it is also possible to have a caption
% regardless of whether or not the listing is in a float:
% \begin{lstsample}[caption,label]{\lstset{xleftmargin=.05\linewidth}}{}
%    \begin{lstlisting}[caption={Useless code},label=useless]
%    for i:=maxint to 0 do
%    begin
%        { do nothing }
%    end;
%    \end{lstlisting}
% \end{lstsample}
% Afterwards you could refer to the listing via |\ref{useless}|. By default
% such a listing gets an entry in the list of listings, which can be printed
% with the command {\rstyle\icmdname\lstlistoflistings}. The key
% {\rstyle\ikeyname{nolol}} suppresses an entry for both the environment or
% the input command. Moreover, you can specify a short caption for the list
% of listings:
%    \keyname{caption}|={|\oarg{short}\meta{long}|}|.
% Note that the whole value is enclosed in braces since an optional value is
% used in an optional argument.
%
% If you don't want the label \texttt{\lstlistingname} plus number, you should
% use \ikeyname{title}:
% \begin{lstsample}[title]{\lstset{xleftmargin=.05\linewidth}}{}
%    \begin{lstlisting}[title={`Caption' without label}]
%    for i:=maxint to 0 do
%    begin
%        { do nothing }
%    end;
%    \end{lstlisting}
% \end{lstsample}
% \begin{advise}
% \item Something goes wrong with `\keyname{title}' in my document: in front of
%       the title is a delimiter.
%       \advisespace
%       The result depends on the document class; some are not compatible.
%       Contact the package author for a work-around.
% \end{advise}
%
% \paragraph{Colours}
% One more element. You need the \packagename{color} package and can then
% request coloured background via
% \ikeyname{backgroundcolor}|=|\meta{color command}.
% \begin{advise}
% \item Great! I love colours.
%       \advisespace
%       Fine, yes, really. And I like to remind you of the warning about
%       striking styles on page \pageref{wStrikingStyles}.
% \end{advise}
%\ifcolor
% \begin{lstxsample}[backgroundcolor]
%    \lstset{backgroundcolor=\color{yellow}}
% \end{lstxsample}
%\else
% \begin{verbatim}
%    color package not installed\end{verbatim}
%\fi
% \begin{lstsample}{}{}
%    \begin{lstlisting}[frame=single,
%                       framerule=0pt]
%    for i:=maxint to 0 do
%    begin
%        j:=square(root(i));
%    end;
%    \end{lstlisting}
% \end{lstsample}
% The example also shows how to get coloured space around the whole listing:
% use a frame whose rules have no width.
%
%
% \subsection{Emphasize identifiers}\label{uEmphasizeIdentifiers}
%
% Recall the pretty-printing commands and environment. |\lstinline| prints
% code snippets, |\lstinputlisting| whole files, and \texttt{lstlisting}
% pieces of code which reside in the \LaTeX\ file. And what are these
% different `types' of source code good for? Well, it just happens that a
% sentence contains a code fragment. Whole files are typically included in or
% as an appendix. Nevertheless some books about programming also include such
% listings in normal text sections---to increase the number of pages.
% Nowadays source code should be shipped on disk or CD-ROM and only the main
% header or interface files should be typeset for reference. So, please, don't
% misuse the \packagename{listings} package. But let's get back to the topic.
%
% Obviously `\texttt{lstlisting} source code' isn't used to make an executable
% program from. Such source code has some kind of educational purpose or even
% didactic.
% \begin{advise}
% \item What's the difference between educational and didactic?
%       \advisespace
%       Something educational can be good or bad, true or false.
%       Didactic is true by definition.^^A :-)
% \end{advise}
% Usually \emph{keywords} are highlighted when the package typesets a piece of
% source code. This isn't necessary for readers who know the programming
% language well. The main matter is the presentation of interface, library or
% other functions or variables. If this is your concern, here come the right
% keys. Let's say, you want to emphasize the functions |square| and |root|,
% for example, by underlining them. Then you could do it like this:
% \begin{lstxsample}[emph,emphstyle]
%    \lstset{emph={square,root},emphstyle=\underbar}
% \end{lstxsample}
% \begin{lstsample}{}{}
%    \begin{lstlisting}
%    for i:=maxint to 0 do
%    begin
%        j:=square(root(i));
%    end;
%    \end{lstlisting}
% \end{lstsample}
% \begin{advise}
% \item Note that the list of identifiers |{square,root}| is enclosed in
%       braces. Otherwise the \packagename{keyval} package would complain
%       about an undefined key \keyname{root} since the comma finishes the
%       key=value pair.
%       Note also that you \emph{must} put braces around the value if you
%       use an optional argument of a key inside an optional argument of a
%       pretty-printing command. Though it is not necessary, the following
%       example uses these braces. They are typically forgotten when they
%       become necessary,
% \end{advise}
%
% Both keys have an optional \meta{class number} argument for multiple
% identifier lists:
%\ifcolor
% \begin{lstxsample}[emph,emphstyle]
%    \lstset{emph={square},      emphstyle=\color{red},
%            emph={[2]root,base},emphstyle={[2]\color{blue}}}
% \end{lstxsample}
%\else
% \begin{lstxsample}[emph,emphstyle]
%    \lstset{emph={square},      emphstyle=\underbar,
%            emph={[2]root,base},emphstyle={[2]\fbox}}
% \end{lstxsample}
%\fi
% \begin{lstsample}{}{}
%    \begin{lstlisting}
%    for i:=maxint to 0 do
%    begin
%        j:=square(root(i));
%    end;
%    \end{lstlisting}
% \end{lstsample}
% \begin{advise}
% \item What is the maximal \meta{class number}?
%       \advisespace
%       $2^{31}-1=2\,147\,483\,647$. But \TeX's memory will exceed before you
%       can define so many different classes.
% \end{advise}
%
% One final hint: Keep the lists of identifiers disjoint. Never use a keyword
% in an `emphasize' list or one name in two different lists. Even if your
% source code is highlighted as expected, there is no guarantee that it is
% still the case if you change the order of your listings or if you use the
% next release of this package.
%
%
%\iffalse
% \subsection{*Listing alignment}\label{uListingAlignment}
%
% The examples are typeset with centered \texttt{minipage}s. That's the reason
% why you can't see that line numbers are printed in the margin. Now we
% separate the minipage margin and the minipage by a vertical rule:
% \begin{lstsample}{\lstset{frame=l,framesep=0pt,numberstyle=\tiny,stepnumber=2,^^A
%     numbersep=5pt}}{}
%    Some text before
%    \begin{lstlisting}
%    for i:=maxint to 0 do
%    begin
%        { do nothing }
%    end;
%    \end{lstlisting}
% \end{lstsample}
% The listing is lined up with the normal text. The parameter \ikeyname{xleftmargin}
% moves the listing to the right (or left if the dimension is negative).
% \begin{lstsample}{\lstset{frame=l,framesep=0pt,numberstyle=\tiny,stepnumber=2,^^A
%     numbersep=5pt}}{}
%    Some text before
%    \begin{lstlisting}[xleftmargin=15pt]
%    for i:=maxint to 0 do
%    begin
%        { do nothing }
%    end;
%    \end{lstlisting}
%
%    \begin{lstlisting}{ }
%    Write('Insensitive');
%    WritE('keywords.');
%    \end{lstlisting}
% \end{lstsample}
% Note again that optional arguments change settings for single listings.
%
% If you use environments like \texttt{itemize} or \texttt{enumerate}, there
% is `natural' indention coming from these environments. By default the
% \packagename{listings} package respects this. But you might use
% |resetmargins=true| (or |false|) to make your own decision. You can use it
% together with |xleftmargin|, of course.
% \begin{advise}
% \item I get heavy overfull |\hbox|es from some listings.
%       \advisespace
%       This comes from long lines in your listings. You have some options
%       to get rid of the overful |\hbox|es. Firstly I recommend to typeset
%       listings in smaller fonts than the surrounding text, for example
%       `|basicstyle=\small|'. Secondly you might want to use the flexible
%       column format. Thirdly you can increase the line width or set it
%       explicitly, refer section \ref{rMarginsAndLineShape}.
%       If all this doesn't help, you might want to change
%       `\ikeyname{basewidth}', but be careful! The two unknown items are
%       explained in the next section.
% \end{advise}
%
% You might need to control the vertical position of listings with the
% \ikeyname{boxpos} key, for example, if you use them in \texttt{minipage} or
% \texttt{tabular} environments. Here `listings' means \texttt{lstlisting} or
% |\lstinputlisting|. As the following example shows, you can even place such
% listings inside paragraphs, but you must force the package to do this by
% enclosing the listing in |\hbox{| and |}|.
% \begin{advise}
% \item Is it good form to use the \TeX-primitive `|\hbox|' in a \LaTeX\
%       document?
%       \advisespace
%       No, it's not. But \LaTeX's `|\mbox|' does not work in this example:
% \end{advise}
% \begin{lstsample}{}{}
%    Here are some multi-line listings inside a paragraph.
%    The `boxpos' key controls their vertical alignment:
%    \hbox{\begin{lstlisting}[boxpos=c]
%    center
%    center
%    \end{lstlisting}}
%    \hbox{\begin{lstlisting}[boxpos=b]
%    bottom baseline
%    bottom baseline
%    \end{lstlisting}}
%    \hbox{\begin{lstlisting}[boxpos=t]
%    top baseline
%    top baseline
%    \end{lstlisting}}
% \end{lstsample}
%\fi
%
%
% \subsection{Indexing}\label{uIndexing}
%
% Indexing is just like emphasizing identifiers---I mean the usage:
% \begin{lstxsample}[index]
%    \lstset{index={square},index={[2]root}}
% \end{lstxsample}
% \begin{lstsample}{}{}
%    \begin{lstlisting}
%    for i:=maxint to 0 do
%    begin
%        j:=square(root(i));
%    end;
%    \end{lstlisting}
% \end{lstsample}
% Of course, you can't see anything here. You will have to look at the index.
% \begin{advise}
% \item Why is the `\ikeyname{index}' key able to work with multiple identifier
%       lists?
%       \advisespace
%       This question is strongly related to the `{\rstyle\ikeyname{indexstyle}}'
%       key. Someone might want to create multiple indexes or want to insert
%       prefixes like `|constants|', `|functions|', `|keywords|', and so on.
%       The `\ikeyname{indexstyle}' key works like the other style keys except
%       that the last token \emph{must} take an argument, namely the
%       (printable form of the) current identifier.
%
%       You can define `|\newcommand\indexkeywords[1]{\index{keywords, #1}}|'
%       and make similar definitions for constant or function names. Then
%       `|indexstyle=[1]\indexkeywords|' might meet your purpose. This becomes
%       easier if you want to create multiple indexes with the
%       \href{http://mirror.ctan.org/macros/latex/contrib/camel}
%       {\packagename{index}} package.
%       If you have defined appropriate new indexes, it is possible to write
%       `|indexstyle=\index[keywords]|', for example.
%
% \item Let's say, I want to index all keywords. It would be annoying to
%       type in all the keywords again, specifically if the used programming
%       language changes frequently.
%       \advisespace
%       Just read ahead.
% \end{advise}
% The \ikeyname{index} key has in fact two optional arguments. The first is the
% well-known \meta{class number}, the second is a comma separated list of other
% keyword classes whose identifiers are indexed. The indexed identifiers then
% change automatically with the defined keywords---not automagically, it's not
% an illusion.^^A :-)
%
% Eventually you need to know the names of the keyword classes. It's usually
% the key name followed by a class number, for example, |emph2|, |emph3|,
% \ldots, |keywords2| or |index5|. But there is no number for the first order
% classes |keywords|, |emph|, |directives|, and so on.
% \begin{advise}
% \item `|index=[keywords]|' does not work.
%       \advisespace
%       The package can't guess which optional argument you mean. Hence you
%       must specify both if you want to use the second one. You should try
%       `|index=[1][keywords]|'.
% \end{advise}
%
%
% \subsection{Fixed and flexible columns}\label{uFixedAndFlexibleColumns}
%
% The first thing a reader notices---except different styles for keywords,
% etc.---is the column alignment. Arne John Glenstrup invented the flexible
% column format in 1997. Since then some efforts were made to develop this
% branch farther. Currently four column formats are provided: fixed, flexible,
% space-flexible, and full flexible. Take a close look at the following
% examples.
% \begin{center}
% \lstset{style={},language={}}
% \def\sample{\begin{lstlisting}^^J WOMEN\ \ are^^A
%                               ^^J \ \ \ \ \ \ \ MEN^^A
%                               ^^J WOMEN are^^A
%                               ^^J better MEN^^J \end{lstlisting}}
% \begin{tabular}{@{}c@{\qquad\quad}c@{\qquad\quad}c@{\qquad\quad}c@{}}
% {\rstyle\ikeyname{columns}}|=| & \texttt{fixed} & \texttt{flexible} & \texttt{fullflexible}\\
%          & (at {\makeatletter\lst@widthfixed})
%          & (at {\makeatletter\lst@widthflexible})
%          & (at {\makeatletter\lst@widthflexible})\\
% \noalign{\medskip}
%   \lstset{basicstyle=\ttfamily,basewidth=0.51em}\sample
% & \lstset{columns=fixed}\sample
% & \lstset{columns=flexible}\sample
% & \lstset{columns=fullflexible}\sample
% \end{tabular}
% \end{center}
% \begin{advise}
% \item Why are women better men?
%       \advisespace
%       Do you want to philosophize? Well, have I ever said that the
%       statement ``women are better men'' is true? I can't even remember this
%       about ``women are men'' \ldots . ^^A ;-)
% \end{advise}
% In the abstract one can say: The fixed column format ruins the spacing
% intended by the font designer, while the flexible formats ruin the column
% alignment (possibly) intended by the programmer. Common to all is that the
% input characters are translated into a sequence of basic output units like
% \begingroup \lstset{gobble=6,xleftmargin=\leftmargini}
% \makeatletter
%^^A  Make \fbox around each output unit.
% \fboxsep=0pt
% \def\lst@alloverstyle#1{\fbox{\kern-\fboxrule\strut#1}\kern-\fboxrule}
% \begin{lstlisting}[basewidth=1em]
%     if x=y then write('align')
%            else print('align');
% \end{lstlisting}
% Now, the fixed format puts $n$ characters into a box of width $n\times{}
% $`base width', where the base width is {\makeatletter\lst@widthfixed} in the
% example. The format shrinks and stretches the space between the characters
% to make them fit the box. As shown in the example, some character strings look
%    \hbox to 2em{b\hss a\hss d}
% or
%    \hbox to 2em{w\hss o\hss r\hss s\hss e},
% but the output is vertically aligned.
% \endgroup
%
% If you don't need or like this, you should use a flexible format. All
% characters are typeset at their natural width. In particular, they never
% overlap. If a word requires more space than reserved, the rest of the line
% simply moves to the right. The difference between the three formats is that
% the full flexible format cares about nothing else, while the normal flexible
% and space-flexible formats try to fix the column alignment if a character
% string needs less space than `reserved'.  The normal flexible format will
% insert make-up space to fix the alignment at spaces, before and after
% identifiers, and before and after sequences of other characters; the
% space-flexible format will only insert make-up space by stretching
% existing spaces.  In the flexible example above, the two MENs are vertically
% aligned since some space has been inserted in the fourth line to fix the
% alignment. In the full flexible format, the two MENs are not aligned.
%
% Note that both flexible modes printed the two blanks in the first line as a
% single blank, but for different reasons: the normal flexible format fixes
% the column alignment (as would the space-flexible format), and the full
% flexible format doesn't care about the second space.
%
%