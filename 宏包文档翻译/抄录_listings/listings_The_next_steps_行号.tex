\columnratio{0.55}
\begin{paracol}{2}
\subsection{Line numbers}\label{uLineNumbers}
\switchcolumn
\subsection{行号}
\switchcolumn[0]*%%%%%%%%%%%%
You already know the keys \ikeyname{numbers}, \ikeyname{numberstyle},
\ikeyname{stepnumber}, and \ikeyname{numbersep} from section
\ref{gSeduceToUse}. Here now we deal with continued listings.
You have two options to get consistent line numbering across listings.
\switchcolumn
你已经了解到了 \ikeyname{numbers}、\ikeyname{numberstyle}、\ikeyname{stepnumber} 和 \ikeyname{numbersep} 这些键，它们来自于第 \ref{gSeduceToUse} 节。现在我们来处理连续的代码列表。你有两种选择来实现代码列表之间的连续行号。

\begin{lstsample}[firstnumber]{\lstset{numbers=left,numberstyle=\tiny,^^A
        stepnumber=2,numbersep=5pt}}{}
        \begin{lstlisting}[firstnumber=100]
        for i:=maxint to 0 do
        begin
            { do nothing }
        end;

        \end{lstlisting}
        And we continue the listing:
        \begin{lstlisting}[firstnumber=last]
        Write('Case insensitive ');
        WritE('Pascal keywords.');
        \end{lstlisting}
\end{lstsample}
\switchcolumn[0]*%%%%%%%%%%%%
In the example, \ikeyname{firstnumber} is initially set to 100; some lines
later the value is \texttt{last}, which continues the numbering of the last
listing. Note that the empty line at the end of the first part is not printed
here, but it counts for line numbering. You should also notice that you can
write |\lstset{firstnumber=last}| once and get consecutively numbered code
lines---except you specify something different for a particular listing.
\switchcolumn
在这个例子中，\ikeyname{firstnumber} 的初始值设置为100；几行之后，值为 \texttt{last}，它将继续上一个代码列表的编号。请注意，第一部分末尾的空行在这里没有打印出来，但它计入行号。你还应该注意到，你可以写 |\lstset{firstnumber=last}| 一次，然后连续地获得编码行的编号，除非你为特定的代码列表指定了其他值。
\switchcolumn[0]*%%%%%%%%%%%%
On the other hand you can use |firstnumber=auto| and name your listings.
Listings with identical names (case sensitive!) share a line counter.
\switchcolumn
另一方面，你可以使用 |firstnumber=auto| 并为代码列表命名。具有相同名称（区分大小写！）的代码列表共享行号计数器。

\begin{lstsample}[name]{\lstset{numbers=left,numberstyle=\tiny,stepnumber=2,numbersep=5pt}}{}
        \begin{lstlisting}[name=Test]
        for i:=maxint to 0 do
        begin
            { do nothing }
        end;

        \end{lstlisting}
        And we continue the listing:
        \begin{lstlisting}[name=Test]
        Write('Case insensitive ');
        WritE('Pascal keywords.');
        \end{lstlisting}
\end{lstsample}
\switchcolumn[0]*%%%%%%%%%%%%
The next |Test| listing goes on with line number {\makeatletter\lstno@Test},
no matter whether there are other listings in between.
\switchcolumn
下一个名为 |Test| 的代码列表使用的行号是 {\makeatletter\lstno@Test}，不管中间是否有其他代码列表。
\switchcolumn[0]*%%%%%%%%%%%%
You can also select the lines to be printed, the options
`\ikeyname{linerange}' and `\ikeyname{consecutivenumbers}' are your
friend. In a presentation for example you don't need comments for your
programs, so you prefer the line numbers being consecutively numbered,
but the results should reflect the behaviour of the program---you omit
parts of the lengthy output. So
you may have the following program and its results.
\switchcolumn
你还可以选择要打印的行，选项 \ikeyname{linerange} 和 \ikeyname{consecutivenumbers} 是你的朋友。例如，在演示中，你不需要程序的注释，所以你更喜欢行号连续编号，但结果应该反映程序的行为——你忽略了冗长输出的部分。因此，你可以有以下程序及其结果。

% \begin{lstsample}[name]{\lstset{numbers=left,numberstyle=\tiny,stepnumber=1,numbersep=5pt}}{}
% \begin{lstlisting}[name=Test,
%     language={[ansi]C},
%     linerange={1-4,6-7,10-14,
%     17-19,21-22},
%     firstnumber=1]
% #include <stdio.h>
% #include <stdlib.h>

% int main(int argc,char* argv[]){
%     /* declaring variables */
%     int i;
%     int limit;

%     /* checking arguments */
%     if ( argc > 1 ) {
%     limit = atoi(argv[1]);
%     } else {
%     limit = 100;
%     }

%     /* counting lines */
%     for (i = 1;i <= limit;i++) {
%     printf("Line no. %3.0d\n", i);
%     }

%     return 0;
% }

% \end{lstlisting}
% And these are the results:
% \begin{lstlisting}[language={},
%     linerange={1-2,6-7},
%     consecutivenumbers=false]
% Line no.   1
% Line no.   2
% Line no.   3
% Line no.   4
% Line no.   5
% Line no.   6
% Line no.   7
% \end{lstlisting}
% \end{lstsample}

% \begin{advise}
% \item Okay. And how can I get decreasing line numbers?
%     \advisespace
%     Sorry, what?
%     \advisespace
%     Decreasing line numbers as on page \pageref{rDecreasingLabels}.
%     \advisespace
%     May I suggest to demonstrate your individuality by other means?
%     If you differ, you should try a negative `\ikeyname{stepnumber}'
%     (together with `\ikeyname{firstnumber}').
% \end{advise}

% Read section \ref{uHowTos} on how to reference line numbers.


\end{paracol}