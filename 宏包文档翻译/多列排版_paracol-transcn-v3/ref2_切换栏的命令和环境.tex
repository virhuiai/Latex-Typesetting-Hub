\subsection{切换栏的命令和环境 \hfill Column-Switching Command and Environments}
\label{sec:ref-switchcolumn}

\begin{description}
\item[\Midx{\!\switchcolumn!}\oarg{col}]\mbox{}
\Item[\Midx{\!\switchcolumn!}\oarg{col}\texttt{*}\oarg{text}]\mbox{}\par
\columnratio{0.6}
\begin{paracol}{2}
The command switches columns from $i$ to $j$ where $i$ and $j$ is the
zero-origin ordinals of the columns from/to which we are leaving\slash
visiting respectively.  Without the optional \meta{col}, $j=i+1\bmod n$
where $n$ is the number of columns given to \beginparacol, while
$j=\meta{col}$ with the optional argument.  If the command (or
\oarg{col} if specified) is followed by a |*|, the \cswitch{} takes
place after \sync{}ation and, if specified, the optional spanning
\meta{text} is put.
\switchcolumn
命令从第$i$列切换到第$j$列，其中$i$和$j$是我们离开/访问的列的零起始序号。如果没有可选参数\meta{col}，则$j=i+1\bmod n$，其中$n$是给定给\beginparacol{}的列数，而如果有可选参数，则$j=\meta{col}$。如果命令（或如果指定了\oarg{col}）后面跟着一个|*|，则\cswitch{}将在\sync{}ation之后进行，并且如果指定了可选的跨列\meta{text}，则会放置它。
\Index{spanning text}
\end{paracol}

\begin{itemize}
\columnratio{0.6}
\begin{paracol}{2}
\item
Using \!\switchcolumn! in a \env{list}-like environment \emph{included} in
a \env{paracol} environment causes an ugly result without any error\slash
warning messages.  This caution is effectual for all \csenv{}s too.
\switchcolumn\item
在\env{paracol}环境中使用 \!\switchcolumn! 命令来切换到包含在\env{list}-like环境中会导致一个不美观的结果，而且没有任何错误或警告信息。同样的注意事项也适用于所有的\csenv{}。
\switchcolumn[0]*
\item
If $\meta{col}\notin\LBRP0n$, an error is reported and, if you dare to
continue, you will switch to the leftmost column 0.
\switchcolumn\item
如果 $\meta{col}\notin\LBRP0n$，将报告错误，并且如果你敢继续，将切换到最左边的列0。    
\switchcolumn[0]*
\item
The \sync{}ation point is set just below the last line of the \lcolumn{}
in a page $p$, partly taking deferred floats into account.  That is, all
deferred floats are put in the pages up to $p-1$ and at the top of $p$ if
possible.  Then, if a non-\lcolumn{} has footnotes and/or bottom floats
and they cannot be pushed down below the \sync{}ation point, the point is
moved to the next page top\footnote{

Or below top floats deferred to the page.}.
\switchcolumn\item
\sync{}ation点设置在页$p$的\lcolumn{}的最后一行的下方，部分考虑了延迟浮动。也就是说，所有延迟浮动都放在前$p-1$页和$p$页的顶部（如果可能的话）。然后，如果非\lcolumn{}有脚注和/或底部浮动，并且它们不能被推到\sync{}ation点以下，那么点就会被移动到下一页的顶部\footnote{

或下推到页面的延迟顶部浮动下方。}。
\switchcolumn[0]*
\item
In a page having one or more \sync{}ation points, stretch and shrink
factors of all vertical spaces, such as those surrounding sectionning
commands, are ignored.  Therefore, even if you specify \!\flushbottom!,
the page is typeset as if \!\raggedbottom! were specified.
\switchcolumn\item
在一个或多个\sync{}ation点的页面中，所有垂直空间的拉伸和收缩因子都被忽略，例如围绕节标题命令的空间。因此，即使您指定了 \!\flushbottom!，页面的排版也会像指定了 \!\raggedbottom! 一样进行。
\switchcolumn[0]*
\item
After a \sync{}ation point is set, no top floats will be inserted in the page
having the point, thus they will be deferred to the next page or further one.
\switchcolumn\item
在设置了同步点之后，不会在具有该点的页面中插入顶部浮动对象，因此它们将被推迟到下一页或更远的页面。
\end{paracol}
\end{itemize}


\item[\ENV{column}{}]\mbox{}
\Item[\ENV{column*}{\oarg{text}}]\mbox{}\par
\columnratio{0.55}
\begin{paracol}{2}
The environment \env{column} contains \meta{body} for the column next to
what we are in just before \!\begin!|{|\env{column}|}|.  The starred
version \env{column*} does the same after \sync{}ation and, if specified,
the optional spanning \meta{text} is put.
\switchcolumn
环境\env{column} 包含了在 \!\begin!|{|\env{column}|}| 之前我们所在的列旁边的\meta{body}。星号版本 \env{column*} 在{\fontKai 同眇}之后执行相同的操作，并且如果指定了可选的跨列\meta{text}，则会放置它。

\Index{spanning text}
\end{paracol}

\begin{itemize}
\columnratio{0.55}
\begin{paracol}{2}
\item
The environments are almost equivalent to;
\begin{quote}
|{|\!\switchcolumn!\quad\meta{body}\quad\CSIndex{par}|}|\\
|{|\!\switchcolumn!|*|\oarg{text}\quad\meta{body}\quad\CSIndex{par}|}|
\end{quote}
except for their first occurrences which don't switch to the column 1
(i.e., right column if two-columned) but stay in the leftmost column 0.
More precisely, \!\begin!|{|\env{column}(|*|)|}| does not make \cswitch{}
if it is not preceded by \!\switchcolumn! nor other \csenv{}s.
\switchcolumn\item
这些环境几乎等同于：
\begin{quote}
|{|\!\switchcolumn!\quad\meta{body}\quad\CSIndex{par}|}|\\
|{|\!\switchcolumn!|*|\oarg{text}\quad\meta{body}\quad\CSIndex{par}|}|
\end{quote}
除了第一次出现的情况外，它们不会切换到列1（即双栏时的右栏），而是保持在最左边的列0。更准确地说，如果 \!\begin!|{|\env{column}(|*|)|}| 没有在 \!\switchcolumn! 或其他 \csenv{} 之前出现，就不会进行 \cswitch{}。
\switchcolumn[0]*
\item
The \meta{body} of the environments cannot have \!\switchcolumn! nor
\csenv{}s including \env{column}(|*|) themselves, or you will have an
error message of illegal use of command\slash environment.
\switchcolumn
\item 环境的\meta{body}不能包含 \!\switchcolumn! 或包含\env{column}(|*|)本身的\csenv{}，否则会出现非法使用命令\slash 环境的错误消息。
\end{paracol}


\item
Column-switching\index{column-switching} does not take place at
\!\end!|{|\env{column}(|*|)|}|.  Therefore, texts following the
environments are put in the column in which \meta{body} resides until a
\cswitch{} command\slash environment is given.

在 \!\end!|{|\env{column}(|*|)|}| 处不会发生列切换\index{column-switching}。因此，在环境后面的文本会放置在\meta{body}所在的列中，直到出现\cswitch{}命令\slash 环境。
\end{itemize}



\item[\ENV{nthcolumn}{\marg{col}}]\mbox{}
\Item[\ENV{nthcolumn*}{\marg{col}\oarg{text}}]\mbox{}\par
The environment \env{nthcolumn} contains \meta{body} for the column
\meta{col}.  The starred version \env{nthcolumn*} does the same after
\sync{}ation and, if specified, the optional spanning \meta{text} is put.


环境\env{nthcolumn}包含了第\meta{col}列的\meta{body}。星号版本\env{nthcolumn*}在\sync{}ation之后执行相同的操作，并且如果指定了可选的跨列\meta{text}，则会放置它。
\Index{spanning text}

\begin{itemize}
\item
The environments are equivalent to;

这些环境等同于：

\begin{quote}
|{|\!\switchcolumn!\oarg{col}\quad\meta{body}\quad\CSIndex{par}|}|\\
|{|\!\switchcolumn!\oarg{col}|*|\oarg{text}\quad
    \meta{body}\quad\CSIndex{par}|}|
\end{quote}

\item
The \meta{body} of the environments cannot have \!\switchcolumn! nor
\csenv{}s including \env{nthcolumn}(|*|) themselves, or you will have an
error message of illegal use of command\slash environment.

环境的 \meta{body} 不能包含 \!\switchcolumn! 或包括 \env{nthcolumn}(|*|) 在内的 \csenv{}，否则会出现非法使用命令\slash 环境的错误消息。
\item
Column-switching\index{column-switching} does not take place at
\!\end!|{|\env{nthcolumn}(|*|)|}|.  Therefore, texts following the
environments are put in the column in which \meta{body} resides until a
\cswitch{} command\slash environment is given.

列切换\index{column-switching}不会在 \!\end!|{|\env{nthcolumn}(|*|)|}| 处发生。因此，环境后的文本会被放在\meta{body}所在的列中，直到出现\cswitch{}命令\slash 环境为止。
\end{itemize}



\KeepSpace{4}
\item[\ENV{leftcolumn}{}]\mbox{}
\Item[\ENV{leftcolumn*}{\oarg{text}}]\mbox{}
\Item[\ENV{rightcolumn}{}]\mbox{}
\Item[\ENV{rightcolumn*}{\oarg{text}}]\mbox{}\par\nobreak
The environment \env{leftcolumn} contains \meta{body} for the leftmost
column 0, while \env{rightcolumn} for the column 1 being the right column
in two-column typesetting.  The starred versions \env{leftcolumn*} and
\env{rightcolumn*} do the same after \sync{}ation and, if specified, the
optional spanning \meta{text} is put.

环境\env{leftcolumn}包含了最左侧列0的\meta{body}，而\env{rightcolumn}包含了在双栏排版中作为右侧列的列1的\meta{body}。星号版本\env{leftcolumn*}和\env{rightcolumn*}在\sync{}ation之后执行相同的操作，并且如果指定了可选的跨列\meta{text}，则会放置它。
\Index{spanning text}

\begin{itemize}
\item
The environments \env{leftcolumn}(|*|) are equivalent to;

环境\env{leftcolumn}(|*|)等同于：

\begin{quote}
\Env{nthcolumn}{\Arg{\texttt{0}}}\\
\Env{nthcolumn*}{\Arg{\texttt{0}}\oarg{text}}
\end{quote}

while \env{rightcolumn}(|*|) are equivalent to;

而\env{rightcolumn}(|*|)等价于：

\begin{quote}
\Env{nthcolumn}{\Arg{\texttt{1}}}\\
\Env{nthcolumn*}{\Arg{\texttt{1}}\oarg{text}}
\end{quote}

\end{itemize}



\item[\Midx{\!\thecolumn!}]\mbox{}\par
\changes{v1.3-5}{2013/09/17}
{Add description of \cs{thecolumn}.}
The command gives you the zero-origin ordinal of the column in which this
command appears.  Therefore, the following code snip;

该命令给出了此命令出现的列的零起始序号。因此，以下代码片段：
\begin{itemize}\item[]
|\begin{paracol}{3}|\\
|Column-\thecolumn.\switchcolumn|
|Column-\thecolumn.\switchcolumn|
|Column-\thecolumn.|\\
|\end{paracol}|
\end{itemize}

gives us the followings.

我们得到了以下结果。

\par\medskip
\begin{paracol}{3}
Column-\thecolumn.\switchcolumn
Column-\thecolumn.\switchcolumn
Column-\thecolumn.
\end{paracol}

\begin{itemize}
\item
The command is {\em neither} a \LaTeX's counter nor \!\count! register of
native \TeX{}, and thus the value it keeps cannot be modified.  However,
it can be used wherever an integer number is required or appropriate.
Therefore for example, \!\setcounter!|{mycounter}{|\!\thecolumn!|}| works
well to give the column ordinal to the counter |mycounter|.

该命令既不是 \LaTeX 的计数器，也不是原生 \TeX 的 \!\count! 寄存器，因此它所保存的值无法修改。然而，它可以在需要或适当的地方使用整数值。因此，例如，\!\setcounter!|{mycounter}{|\!\thecolumn!|}| 可以很好地将列序数赋给计数器 |mycounter|。
\end{itemize}



\item[\Midx{\!\definecolumnpreamble!}\marg{col}\marg{pream}]\mbox{}\par
\changes{v1.35-5}{2018/12/31}
{Add description of \cs{definecolumnpreamble}.}
The command is to define the {\Uidx\colpream} \meta{pream} for the column
\meta{col}, which is inserted at every \cswitch{} to the column.  More
specifically, the command let \!\switchcolumn! to \meta{col} act as if you
sepcify;

该命令用于为列\meta{col}定义{\Uidx\colpream} \meta{pream}，该\meta{pream}在每次\cswitch{}到该列时插入。更具体地说，该命令使得\!\switchcolumn!到\meta{col}的行为与您指定的一样。

\begin{itemize}\item[]
\!\switchcolumn! $\arg{pream\ for\ col}$
\end{itemize}

and \csenv{}s such as \env{nthcolumn} act as if you specify;

而\env{nthcolumn}等\csenv{}则会表现得好像你指定了：

\begin{itemize}\item[]
|\begin{nthcolumn}{|\meta{col}|}| $\arg{pream\ for\ col}$

\end{itemize}

\begin{itemize}
\item
\begingroup\hfuzz1.5pt
The optional \sptext{} of \!\switchcolumn!, \csenv{}s and \beginparacol{}
is considered to be in a virtual column $-1$, and thus if you need a
\Colpream{} for \sptext{}s do \!\definecolumnpreamble!|{-1}|\marg{pream}.

\!\switchcolumn!命令、\csenv{}和\beginparacol{}的可选参数\sptext{}被视为虚拟列$-1$中的内容，因此如果你需要为\sptext{}添加\Colpream{}，请使用 \!\definecolumnpreamble!|{-1}|\marg{pream}。
\par\endgroup

\item
The command may appear in a \env{paracol} environment and, if so,
\meta{pream} is effective from the succeeding \cswitch{} to \meta{col}.

该命令可以出现在 \env{paracol} 环境中，如果是这样的话，\meta{pream} 从后续的 \cswitch{} 到 \meta{col} 是有效的。
\item
The definition of \meta{pream} is made globally.

\meta{pream} 的定义是全局的。
\end{itemize}



\item[\Midx{\!\ensurevspace!}\marg{len}]\mbox{}\par
\changes{v1.3-5}{2013/09/17}
{Add description of \cs{ensurevspace}.}

The command tells the first \sync{}ing \cswitch{} command (i.e.,
\!\switchcolumn!\oarg{col}|*|) or environment (i.e., \env{column*}, etc.\@)
following this command that the page must be broken before \sync{}ation
unless the \sync{}ation point has the space of \meta{len} or more below it
in the page.  If a \sync{}ation does not have the command after the
previous \sync{}ation, it is assumed that
\!\ensurevspace!|{|\!\baselineskip!|}| is given.

该命令告诉紧随该命令之后的第一个\sync{}ing \cswitch{}命令（即 \!\switchcolumn!\oarg{col}||）或环境（即\env{column}等），除非页面中\sync{}ation点下方有\meta{len}或更多的空间，否则页面必须在\sync{}ation前被分页。如果前一个\sync{}ation之后没有该命令，则假定已给出\!\ensurevspace!|{|\!\baselineskip!|}|。

\begin{itemize}
\item
This command is to be used when a \sync{}ation point would be placed near
the bottom of a page $p$ and the space below it is not sufficient for a column
$c$ to put anything in the page, while another column $c'$ can have a few
lines in the page.  If this happens, the first line after the \sync{}ation
should start at the top of the page $p+1$ in the column $c$, while that of
$c'$ is still in the page $p$, giving you an impression that the
\sync{}ation fails to align the top of all columns below it.  The fact is,
however, the \sync{}ation point is properly established near at the bottom
of the page but the first line of $c$ needs some large space due to, for
example, the followings.

当\sync{}ation点位于页面$p$的底部附近，并且其下方的空间不足以容纳列$c$中的内容，而另一列$c'$可以在页面$p$中有几行时，应使用此命令。如果发生这种情况，则\sync{}ation后的第一行应从页面$p+1$的列$c$顶部开始，而$c'$的第一行仍在页面$p$中，给您一种印象，即\sync{}ation无法使所有列的顶部对齐。然而，事实是，\sync{}ation点确实正确地建立在页面底部附近，但由于某些原因，例如以下原因，列$c$的第一行需要一些较大的空间。

\begin{itemize}
\item
The line has unusually tall stuff including larger font letters.

该行包含异常高的内容，包括较大字号的字母。
\item
The line has a footnote reference which is hardly apart from the
footnote, and thus the line and the footnote go to the next page together.

该行有一个脚注引用，与脚注之间几乎没有间隔，因此该行和脚注一起跳转到下一页。
\item
The parameter \!\clubpenalty! is too large (e.g., 10000) to break the
first and second lines into separate pages.

参数 \!\clubpenalty! 太大（例如10000），导致第一行和第二行无法分开分页。
\item
The first line follows a vertical space.

第一行后面有一个垂直间距。
\end{itemize}

\item
This manual itself has some instances of \!\ensurevspace! command in the
page \pageref{page:bfreude} and \pageref{page:efreude} in which each German
stanza is enclosed in \env{verse} and then \env{leftcolumn*} environments
and has \!\ensurevspace!|{2|\!\baselineskip!|}| before the \!\begin!ing of
the outer \env{leftcolumn*} because the first line of the stanza is
preceded by a vertical space inserted by \!\begin!|{|\env{verse}|}|.  In
fact without \!\ensurevspace!, the first two lines of the sixth English
stanza would be in the page \pageref{page:bfreude}, while corresponding
German stanza go to the next page \pageref{page:efreude} as a whole, due
to the difference of the height of footnotes in each column, i.e., German
ones are taller than English ones to narrow the space for the German
column.

本手册本身在第 \pageref{page:bfreude} 页和第\pageref{page:efreude}页有一些 \!\ensurevspace! 命令的实例，在这些页中，每个德语诗节都被包含在\env{verse}环境和\env{leftcolumn*}环境中，并且在外部\env{leftcolumn*}的 \!\begin!之前有一个 \!\ensurevspace!|{2|\!\baselineskip!|}| ，因为诗节的第一行前面有一个由 \!\begin!|{|\env{verse}|}| 插入的垂直间距。实际上，如果没有 \!\ensurevspace!，第六首英文诗节的前两行将在第\pageref{page:bfreude}页，而相应的德文诗节将作为整体移到下一页\pageref{page:efreude}，这是因为每列脚注的高度不同，即德文脚注比英文脚注更高，以缩小德文列的空间。

\item
As the author does in the ``An die Freude/To Joy'' example, it is a good
tactics to have an \!\ensurevspace! with some vertical space larger than the
default \!\baselineskip! if it is sure that a column has a feature shown
above regardless of the position of the \sync{}ation point in question,
because the point goes up or down with revisions of your document and
using an \!\ensurevspace! for a \sync{}ation far above the page bottom is
perfectly harmless.  Similarly, if you find a problem in a \sync{}ation
and add an \!\ensurevspace! to solve it, keeping the command attached is
recommended even when the \sync{}ation point moves up or down to make the
command unnecessary.

正如作者在“An die Freude/To Joy”示例中所做的那样，如果确定某一列具有上述特征，无论问题点的\sync{}ation点位置如何变化，使用比默认
\!\baselineskip! 更大的一些垂直间距的 \!\ensurevspace! 是一个好策略，因为该点随着文档的修订而上下移动，并且在页面底部上方使用
\!\ensurevspace! 是完全无害的。同样，如果在\sync{}ation中发现问题并添加了 \!\ensurevspace! 来解决问题，则建议保留该命令，即使\sync{}ation点上下移动以使命令不再需要。

\end{itemize}
\end{description}

