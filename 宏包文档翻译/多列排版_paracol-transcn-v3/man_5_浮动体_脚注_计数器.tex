\section{Floats, Footnotes and Counters}

\columnratio{0.3,0.42,0.28}
\begin{paracol}{3}

\begin{VerbatimII}
\switchcolumn[0]*
\begin{figure*}\nosv
\def\arraystretch{0.8}
\centerline{\begin{tabular}[b]{|c|}\hline
    \hbox to.9\textwidth{}\\
    three-column figure \#1\\
    \\\hline
    \end{tabular}}
\caption{A Three-Column Figure}
\end{figure*}

\switchcolumn
\begin{figure}[t]\nosv
\def\arraystretch{0.8}
\centerline{\begin{tabular}[b]{|c|}\hline
    \hbox to.9\columnwidth{}\\\\
    single-column figure \#1\\
    \\\\\hline
    \end{tabular}}
\caption{A Single-Column Figure}
\end{figure}

\switchcolumn
\begin{figure}[t]\nosv
\def\arraystretch{0.8}
\centerline{\begin{tabular}[b]{|c|}\hline
    \hbox to.9\columnwidth{}\\
    \ttfamily single-column figure \#2\\
    \\\hline
    \end{tabular}}
\caption{\ttfamily Another Single-Column Figure}
\end{figure}
\end{VerbatimII}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\switchcolumn
\subsection{Figures and Tables}
Double-column figures\slash tables (or those
spanned multiple columns if you have three or more) may be placed by
\env{figure*} and \env{table*} environments as usual\footnote{
See Section~\ref{sec:problem} for the appearance order issue of
double-column floats.}.

\switchcolumn
\subsection{图表}
双栏图表（如果有三栏或更多栏，则为跨多栏的图表）可以像往常一样使用 \env{figure*} 和 \env{table*} 环境来放置\footnote{请参见第~\ref{sec:problem} 节有关双栏浮动体出现顺序问题的内容。}。

\switchcolumn[1]
A single-column figure\slash table will be placed in the column in which
you put \env{figure} and \env{table}.  For example, the body of a
\env{figure} environment in a \env{leftcolumn} environment is
\emph{always} placed in a left column.  That is, even if the column of the
\emph{current} page does not have enough room to place the figure, it will
not be thrown to the right column but will be placed in the left column of
the next page\footnote{Or some farther page if \LaTeX{} cannot solve the placement problem wisely.}.
\switchcolumn
单栏图表将放置在你放置 \env{figure} 和 \env{table} 环境的栏中。例如，在 \env{leftcolumn} 环境中的 \env{figure} 环境中的内容将始终放置在左栏中。也就是说，即使当前页面的栏没有足够的空间放置图表，它也不会被放置在右栏，而是会放置在下一页的左栏\footnote{如果 \LaTeX{} 无法明智地解决放置问题，则可能放置在更远的页面上。}。

\switchcolumn[1]
\begin{table}[b]\nosv
\caption{A Single-Column Table}
\centerline{\begin{tabular}[t]{|l|c|r|}\hline
An&example&of\\\hline
single&column&table\\\hline
\end{tabular}}
\end{table}
\switchcolumn
\begin{table}[b]\nosv
\caption{\ttfamily Another Single-Column Table}
\label{tab:right}
\centerline{\ttfamily \begin{tabular}[t]{|l|r|}\hline
  Another&example\\\hline
  of&single\\\hline
  column&table\\\hline
  \end{tabular}}
\end{table}

\switchcolumn[1]
Another caution about float placement is that you have to be careful when
you try to put a top-float explicitly with |t|-option or implicitly without
placement option (i.e., |tbp| in most classes) and to \sync{}e columns.
The rule is as follows; after you \sync{}e columns in a page, the page
cannot have top-floats any more.  When you \sync{}e columns,
\textsf{paracol} fixes a virtual horizontal line in the page as the
\sync{}ation barrier.  Thus no top-floats cannot be added above the
line\footnote{Even if you have enough space above, sorry.}.
\switchcolumn
关于浮动位置的另一个警告是，当你试图使用 |t| 选项显式地放置一个顶部浮动，或者不使用放置选项隐式地放置（即，在大多数类中的 |tbp|），并且要同步列时，你必须小心。规则如下：在你在一个页面中同步列后，该页面不能再有顶部浮动。当你同步列时，\textsf{paracol} 在页面中固定一个虚拟的水平线作为同步屏障。因此，不能在该线以上添加顶部浮动\footnote{即使你在上方有足够的空间，抱歉。}。

\switchcolumn[1]
Therefore, the author put two \env{figure} environments for the figures
shown in this page into the \env{leftcolumn*} and \env{rightcolumn}
environment for the previous section.
\switchcolumn
因此，作者将在上一节的 \env{leftcolumn*} 和 \env{rightcolumn} 环境中放入本页显示的两个 \env{figure} 环境。

\switchcolumn[1]
\subsection{Footnotes and Marginal Notes}
Footnotes are also put at the bottom of the column in which \!\footnote!
commands and their references reside (like this\footnote{%
Unless you specify to make footnotes {\em page-wise} as explained in
Section \ref{sec:ref-scfnote} and \ref{sec:fnnp}.}),
\switchcolumn
\subsection{脚注和边注}
脚注也会放置在包含 \!\footnote! 命令及其引用的栏的底部（如本页所示\footnote{除非你在第 \ref{sec:ref-scfnote} 节和 \ref{sec:fnnp} 节中指定将脚注{\em 按页}处理。}），

\switchcolumn[1]
as shown in page~\pageref{fn:first} and this page.  Marginal
notes behave similarly like what you are seeing in the left margin of this
sentence\marginpar{\raggedright An example of marginal note.}
\switchcolumn
如第~\pageref{fn:first}页和本页所示。边注表现类似于你看到的这句话左 margin 中的样式\marginpar{\raggedright 一个边注示例。}

\switchcolumn[1]  
and the right marginal note in this page\footnote{%
If you have three or more columns, marginal notes of the second or
succeeding columns are placed in the right margin in default setting.  The
\textsf{paracol} package solves the placement problem of marginal notes
from two or more columns sharing a side margin by moving some of them down
if they conflict over the space with each other.}.
\switchcolumn
以及本页中的右边距注释\footnote{如果你有三列或更多列，第二列或后续列的边距注释在默认设置中放置在右边距。 \textsf{paracol}包处理来自两个或更多共享侧边距的列的边距注释的放置问题，如果它们在空间上彼此冲突，将其中一些向下移动。}。
\end{paracol}


\columnratio{0.3,0.42,0.28}
\begin{paracol}{3}

\begin{VerbatimII}
\end{VerbatimII}

\switchcolumn[1]
\subsection{Local and Global Counters}
\UsageIndex{local counter}
\UsageIndex{global counter}
You probably found that the numbering of figures and tables is \emph{global}
while that of footnotes are \emph{local}.  That is, the figure in the right
column of the previous page has number~3 following its left-column
counterpart Figure~2.  The tables in the page are also numbered as 1 and 2
crossing the column boundary.  However, the footnotes in each column have
their own numbering sequence.  Moreover, the footnote numbers in left
columns are typeset in roman font while those in right columns have italic
shapes.  Similarly, subsection numbering is local and the headings in right
columns have typewriter-face numbers.
\switchcolumn
\subsection{局部和全局计数器}
你可能发现，图表的编号是\emph{全局}的，而脚注的编号是\emph{局部}的。也就是说，上一页右栏的图表在其左栏对应的图表之后编号为3，而页面上的表格也是以1和2为编号跨越栏边界。然而，每栏中的脚注有自己的编号序列。此外，左栏中的脚注号码以罗马字体排版，而右栏中的脚注号码以斜体形式排版。类似地，小节编号是局部的，右栏标题的编号使用打字机字体。

\switchcolumn[0]*
\begin{itemize}\item[]
\Uidx{\!\globalcounter!}|{figure}|\\
\!\globalcounter!|{table}|
\end{itemize}

\switchcolumn[1]
This happens because the author declared the counters \counter{figure} and
\counter{table} are \emph{global} in the preamble of this document by
saying;
\switchcolumn
这是因为作者在文档的导言部分中声明了计数器 \counter{figure} 和 \counter{table} 是\emph{全局}的，声明首栏所示。

\switchcolumn[1]
and do nothing about \counter{footnote} and \counter{subsection} counters.
By default, all the counters except for |page| are local to columns.  The
value of a \lcounter{} of a column is saved somewhere when you leave the
column, and it is restored when you revisit the column.  The initial values
of the \lcounter{}s are the values they have at
\!\begin!|{|\env{paracol}|}|.  After you close the \env{paracol}
environment, the values of the leftmost column are used for the rest of
your document until you start new \env{paracol} environment.  On a
restart, \lcounter{}s in a column have the values they had at the last
\Endparacol, except for those which have been modified outside the
environment because the modifications are \emph{broadcasted} to
\lcounter{}s in all columns.  You will see the effect of this
inter-environment counter value conservation in the footnote numbers in
the right column in page~\pageref{fn:right3} and \pageref{fn:right4}.
\switchcolumn
但对于计数器 \counter{footnote} 和 \counter{subsection} 未进行任何处理。默认情况下，除了 |page| 计数器外，所有的计数器都是局部的。当你离开栏目时，栏目的局部计数器值会被保存住，当你再次访问该栏目时，该值会被恢复。在 \env{paracol} 环境的初始值为局部计数器的值。当你关闭 \env{paracol} 环境后，剩余部分的文档将使用最左边栏的值，直到你开始新的 \env{paracol} 环境。重新开始时，栏目中的局部计数器具有最后一个 \Endparacol 时的值，除非在环境外进行了修改，因为这些修改会被\emph{广播}到所有栏的局部计数器中。你将在第\pageref{fn:right3}页和第\pageref{fn:right4}页中看到这种跨环境计数值保存的效果，表现在右栏的脚注号码上。

\switchcolumn[1]
This broadcasting of a \lcounter{} value can be done explicitly in
\env{paracol} environments by a command $\Uidx{\!\synccounter!}\Arg{ctr}$.
This command makes $\mathit{ctr}$ in all columns have the value of that in
the column in which the command appears.  In addition, another command
\Uidx{\!\syncallcounters!} performs this broadcasting for all \lcounter{}s.
\switchcolumn
可以在\env{paracol}环境中通过命令$\Uidx{\!\synccounter!}\Arg{ctr}$来显式地进行局部计数器值的广播。所有栏中的$\mathit{ctr}$都将同步为命令调用所在栏中的值。此外，另一个命令 \Uidx{\!\syncallcounters!} 可以对所有局部计数器进行这种广播操作。


\end{paracol}


\end{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%








\switchcolumn[1]
If you make a counter global by the command \!\globalcounter!, the
save/restore operations are not performed to the counter and thus it is
globally incremented by |\[ref]|\AB|stepcounter|
\SpecialIndex{\refstepcounter}\SpecialIndex{\stepcounter}

\switchcolumn
如果你通过命令 \!\globalcounter! 将一个计数器声明为全局的，那么对该计数器不会执行保存/恢复操作，因此它会通过 |\[ref]|\AB|stepcounter| 全局递增。

\switchcolumn*
or commands such as \!\caption! and \!\section!.  Note that the value of a
\gcounter{} depends on the place where it is incremented (or set) in
the \emph{source code} rather than where it appears in the output.  Thus
if the author put a \env{table} environment here to increment \env{table}
counter, the right-column table at the bottom of page~\pageref{tab:right}
would be Table~3 because its \env{table} environment does not appear yet
in the source code.  Note that, however, though the counter \counter{page}
is global as expected, its numbering is consistent among all columns as
far as you refer to the value by $\!\pageref!\Arg{label}$ and/or see the
values in table of contents, etc.
\switchcolumn
或者诸如 \!\caption! 和 \!\section! 等命令。请注意，一个\gcounter{}的值取决于它在\emph{源代码}中递增（或设置）的位置，而不是它在输出中出现的位置。因此，如果作者在这里放置了一个\env{table}环境来递增\env{table}计数器，那么在第\pageref{tab:right}页底部的右栏表格将被标记为表格3，因为它的\env{table}环境在源代码中尚未出现。请注意，尽管计数器\counter{page}是全局的，但只要通过 $\!\pageref!\Arg{label}$ 引用该值，或者在目录中查看值等，其编号在所有栏目中是一致的。

\switchcolumn*
Another counter which the author made global in this document is
\counter{section}.  As explained in Section~\ref{sec:sync}, an optional
\mctext{} of \cswitch{} is considered as in the leftmost column.  Since
\!\section! commands in this document are always given in \mctext{}s, so
far, it seems unnecessary to make \counter{section} global because it is
incremented correctly in the leftmost column.  However, the stepping
\counter{section} has a side effect to reset its descendent counter
\counter{subsection} and referred to from \!\thesubsection! command.  Thus
if \counter{section} were local, the right-column subsections in
Section~\ref{sec:env} would be numbered as ``0.1'', ``0.2'' and ``0.3''
because the local value of \counter{section} would be zero.  Moreover, the
right-column subsections of this section would be ``0.4'', ``0.5'' and
``0.6'' because stepping \counter{section} local to the left column would
not reset \counter{subsection} local to the right column.
\switchcolumn
在本文档中，作者还将\counter{section}计数器声明为全局的。如第~\ref{sec:sync}节所述，\cswitch{}的可选\mctext{}被视为最左边的栏目。由于本文档中的 \!\section! 命令总是在\mctext{}中给出，因此目前似乎没有必要将\counter{section}设置为全局，因为它在最左边的栏目中递增是正确的。然而，递增\counter{section}会对其子计数器\counter{subsection}产生副作用，并且从 \!\thesubsection! 命令中引用。因此，如果\counter{section}是局部的，那么在第~\ref{sec:env}节中右栏的子章节将被编号为“0.1”、“0.2”和“0.3”，因为\counter{section}的局部值将为零。此外，本节的右栏子章节将被编号为“0.4”、“0.5”和“0.6”，因为局部递增的\counter{section}不会重置右栏局部的\counter{subsection}。


\switchcolumn*
You may give a local appearance to a counter \textit{ctr} for the $i$-th
column (zero origin) by a command;
\begin{itemize}\item[]
\Uidx{\!\definethecounter!}|{|\textit{ctr}|}{|$i$|}{|\textit{def}|}|
\end{itemize}
\switchcolumn
你可以通过命令给第$i$栏目（从零开始计数）的计数器\textit{ctr}赋予局部的外观；

\switchcolumn*
where \textit{def} is to be the body of the local definition of
|\the|\textit{ctr}.  For example, the preamble of this document has the
following to give non-default defitions to \!\thefootnote! and
\!\thesubsection! for right columns.

\begin{Verbatim}
\definethecounter{footnote}{1}{%
\textit{\arabic{footnote}}}
\definethecounter{subsection}{1}{%
\texttt{%
    \arabic{section}.\arabic{subsection}}}
\end{Verbatim}
\switchcolumn
其中\textit{def}是局部定义|\the|\textit{ctr}的内容。例如，本文档的导言部分具有以下内容，为右栏的\!\thefootnote!和\!\thesubsection!赋予非默认的定义。

\end{paracol}

