% % Copyright 2019 by Till Tantau
% %
% % This file may be distributed and/or modified
% %
% % 1. under the LaTeX Project Public License and/or
% % 2. under the GNU Free Documentation License.
% %
% % See the file doc/generic/pgf/licenses/LICENSE for more details.


% \section{Introduction\\简介}

% Welcome to the documentation of \tikzname\ and the underlying \pgfname\ system.
% What began as a small \LaTeX\ style for creating the graphics in my (Till
% Tantau's) PhD thesis directly with pdf\LaTeX\ has now grown to become a
% full-blown graphics language with a manual of over a thousand pages. The wealth
% of options offered by \tikzname\ is often daunting to beginners; but
% fortunately this documentation comes with a number slowly-paced tutorials that
% will teach you almost all you should know about \tikzname\ without your having
% to read the rest.

% 欢迎阅读 \tikzname\ 和底层的 \pgfname\ 系统的文档。最初只是一个为我（Till Tantau）的博士论文创建图形的小型 \LaTeX\ 样式，现在已经成长为一种拥有超过一千页手册的全功能图形语言。 \tikzname\ 提供的丰富选项%经常让初学者感到困惑；%
% % 提供的大量选项
% 往往会让初学者望而生畏;%
% 但幸运的是，这份文档附带了一系列循序渐进的教程，它们将教你几乎所有你应该了解的 \tikzname\ 知识，无需你阅读其余部分。



% I wish to start with the questions ``What is \tikzname?'' Basically, it just
% defines a number of \TeX\ commands that draw graphics. %
% For example, the code
% |\tikz \draw (0pt,0pt) -- (20pt,6pt);| yields the line \tikz \draw (0pt,0pt) --
% (20pt,6pt); %
% and the code |\tikz \fill[orange] (1ex,1ex) circle (1ex);| yields
% \tikz \fill[orange] (1ex,1ex) circle (1ex);. %
% In a sense, when you use
% \tikzname\ you ``program'' your graphics, just as you ``program'' your document
% when you use \TeX. %
% This also explains the name: \tikzname\ is a recursive
% acronym in the tradition of ``\textsc{gnu}'s Not Unix'' and means ``\tikzname\
% ist \emph{kein} Zeichenprogramm'', which translates to ``\tikzname\ is not a
% drawing program'', cautioning the reader as to what to expect. With \tikzname\
% you get all the advantages of the ``\TeX-approach to typesetting'' for your
% graphics: quick creation of simple graphics, precise positioning, the use of
% macros, often superior typography. You also inherit all the disadvantages:
% steep learning curve, no \textsc{wysiwyg}, small changes require a long
% recompilation time, and the code does not really ``show'' how things will look
% like.

% 我希望从“什么是 \tikzname?”这个问题开始。基本上，它只定义了一些绘制图形的 \TeX\ 命令。%
% 例如，\\代码 |\tikz \draw (0pt,0pt) -- (20pt,6pt);| 生成的线条是 \tikz \draw (0pt,0pt) --
% (20pt,6pt);%
% ，\\代码 |\tikz \fill[orange] (1ex,1ex) circle (1ex);| 生成的是 \tikz \fill[orange] (1ex,1ex) circle (1ex);。
% 在某种意义上，当你使用 \tikzname\ 时，你是在“编程”你的图形，就像你使用 \TeX\ “编程”你的文档一样。%
% 这也解释了名称：\tikzname\ 是一种递归的缩写，在 ``\textsc{gnu}'s Not Unix'' 的传统中意思是``\tikzname\
% ist \emph{kein} Zeichenprogramm''，翻译成汉语是“\tikzname\ 不是一个绘图程序”，
% 警告读者不要期待太多。使用 \tikzname\ ，你可以得到所有的“\TeX-排版方法”的优点：快速创建简单图形，精确定位，使用宏，通常提供优越的排版。你也会继承所有的缺点：陡峭的学习曲线，没有\textsc{wysiwyg}，小的变动需要长时间的重新编译，代码并不能真正“显示”事物的样子。


% Now that we know what \tikzname\ is, what about ``\pgfname''? As mentioned
% earlier, \tikzname\ started out as a project to implement \TeX\ graphics macros
% that can be used both with pdf\LaTeX\ and also with the classical
% (PostScript-based) \LaTeX. In other words, I wanted to implement a ``portable
% graphics format'' for \TeX\ -- hence the name \pgfname. These early macros are
% still around and they form the ``basic layer'' of the system described in this
% manual, but most of the interaction an author has theses days is with
% \tikzname\ -- which has become a whole language of its own.

% 既然我们知道了什么是 \tikzname\ ，那么“\pgfname”又是什么呢？如前所述，\tikzname\ 开始是一个项目，用于实现可以与 pdf\LaTeX\ 和传统的（基于 PostScript 的）\LaTeX\ 一起使用的 \TeX\ 图形宏。换句话说，我想要实现一个 \TeX\ 的“便携式图形格式” —— 因此得名 \pgfname。这些早期的宏仍然存在，它们构成了本手册中描述的系统的“基础层”，但如今作者的大部分交互都是与 \tikzname\  进行的，它已经成为一种独立的语言。



% \subsection{The Layers Below \tikzname\\在\tikzname{}下面的层}

% It turns out that there are actually \emph{two} layers below \tikzname:

% % 事实证明，
% 实际上在 \tikzname\ 下面有\emph{两}层：
% %
% \begin{description}
%     \item[System layer 系统层:] This layer provides a complete abstraction of what
%         is going on ``in the driver''. The driver is a program like |dvips|
%         or |dvipdfm| that takes a |.dvi| file as input and generates a |.ps|
%         or a |.pdf| file. (The |pdftex| program also counts as a driver, even
%         though it does not take a |.dvi| file as input. Never mind.) Each
%         driver has its own syntax for the generation of graphics, causing
%         headaches to everyone who wants to create graphics in a portable way.
%         \pgfname's system layer ``abstracts away'' these differences. For
%         example, the system command |\pgfsys@lineto{10pt}{10pt}| extends the
%         current path  to the coordinate $(10\mathrm{pt},10\mathrm{pt})$ of
%         the current |{pgfpicture}|. Depending on whether |dvips|, |dvipdfm|,
%         or |pdftex| is used to process the document, the system command will
%         be converted to different |\special| commands. The system layer is as
%         ``minimalistic'' as possible since each additional command makes it
%         more work to port \pgfname\ to a new driver.

%         这一层完全抽象了驱动器中正在发生的事情。驱动器是像 |dvips| 或 |dvipdfm| 这样的程序，它以 |.dvi| 文件为输入并生成 |.ps| 或 |.pdf| 文件。（|pdftex| 程序也算作驱动器，尽管它不以 |.dvi| 文件为输入。不用在意。）每个驱动器都有自己生成图形的语法，给想要以便携式方式创建图形的人带来了头痛。 \pgfname 的系统层“抽象化”了这些差异。例如，系统命令 |\pgfsys@lineto{10pt}{10pt}| 将当前路径扩展到当前 |{pgfpicture}| 的坐标 $(10\mathrm{pt},10\mathrm{pt})$。取决于是否使用 |dvips|，|dvipdfm|，或者 |pdftex| 来处理文档，系统命令将被转换为不同的 |\special| 命令。系统层尽可能“简化”，因为每一个额外的命令都会增加将 \pgfname\ 移植到新驱动器的工作。

%         As a user, you will not use the system layer directly.

%         作为用户，你不会直接使用系统层。
%     \item[Basic layer 基础层:] The basic layer provides a set of basic commands that
%         allow you to produce complex graphics in a much easier manner than by
%         using the system layer directly. For example, the system layer provides
%         no commands for creating circles since circles can be composed from the
%         more basic Bézier curves (well, almost). However, as a user you will
%         want to have a simple command to create circles (at least I do) instead
%         of having to write down half a page of Bézier curve support
%         coordinates. Thus, the basic layer provides a command |\pgfpathcircle|
%         that generates the necessary curve coordinates for you.

%         基础层提供了一组基本命令，使你能够比直接使用系统层更容易地制作复杂的图形。例如，系统层没有提供创建圆的命令，因为圆可以由更基本的贝塞尔曲线组成（好吧，差不多）。然而，作为用户，你会希望有一个简单的命令来创建圆（至少我希望如此），而不是需要写下半页的贝塞尔曲线支持坐标。因此，基础层提供了一个命令 |\pgfpathcircle|，它为你生成必要的曲线坐标。

%         The basic layer consists of a \emph{core}, which consists of several
%         interdependent packages that can only be loaded \emph{en bloc}, and
%         additional \emph{modules} that extend the core by more
%         special-purpose commands like node management or a plotting
%         interface. For instance, the \textsc{beamer} package uses only the
%         core and not, say, the |shapes| modules.

%         基础层由一个\emph{core}组成，这是由几个相互依赖的包组成的，它们只能被\emph{en bloc}加载，以及额外的\emph{modules}，它们通过更多的特殊目的命令来扩展 core，如节点管理或绘图接口。例如，\textsc{beamer} 包只使用 core，而不使用，比如说，|shapes| 模块。
% \end{description}

% In theory, \tikzname\ itself is just one of several possible ``frontends''.
% which are sets of commands or a special syntax that makes using the basic layer
% easier. A problem with directly using the basic layer is that code written for
% this layer is often too ``verbose''. For example, to draw a simple triangle,
% you may need as many as five commands when using the basic layer: One for
% beginning a path at the first corner of the triangle, one for extending the
% path to the second corner, one for going to the third, one for closing the
% path, and one for actually painting the triangle (as opposed to filling it).
% With the \tikzname\ frontend all this boils down to a single simple
% \textsc{metafont}-like command:

% 理论上，\tikzname\ 本身只是几种可能的“前端”之一，这些前端是一组命令或一种特殊语法，使得使用基础层更加容易。直接使用基础层的问题在于，为这一层编写的代码通常过于“冗长”。例如，要画一个简单的三角形，你可能需要使用基础层的五个命令：一个用于在三角形的第一个角开始一条路径，一个用于将路径延伸到第二个角，一个用于去到第三个角，一个用于关闭路径，以及一个用于实际绘制三角形（而不是填充它）。使用 \tikzname\ 前端，所有这些都可以简化为一个简单的 \textsc{metafont} 类似的命令：
% %
% \begin{verbatim}
% \draw (0,0) -- (1,0) -- (1,1) -- cycle;
% \end{verbatim}

% In practice, \tikzname\ is the only ``serious'' frontend for \pgfname. It gives
% you access to all features of \pgfname, but it is intended to be easy to use.
% The syntax is a mixture of \textsc{metafont} and \textsc{pstricks} and some
% ideas of myself. There are other frontends besides \tikzname, but they are intended
% more as ``technology studies'' and less as serious alternatives to
% \tikzname. In particular, the |pgfpict2e| frontend   reimplements the standard
% \LaTeX\ |{picture}|  environment and commands like |\line| or |\vector| using
% the \pgfname\ basic layer. This layer is not really ``necessary'' since the
% |pict2e.sty| package does at least as good a job at reimplementing the
% |{picture}| environment. Rather, the idea behind this package is to have a
% simple demonstration of how a frontend can be implemented.

% 在实践中,\tikzname\ 是\pgfname 的唯一“严肃的”前端。它为您提供了\pgfname 的所有功能,但旨在易于使用。其语法是\textsc{metafont}和\textsc{pstricks}以及我自己的一些想法的混合。除了\tikzname\ 之外还有其他前端,但它们的目的更多是作为“技术研究”,而不是作为\tikzname 的真正替代品。特别是,|pgfpict2e|前端使用\pgfname 基本层重新实现了标准\LaTeX|{picture}|环境和|\line|或|\vector|等命令。这个层次并不是真的“必要的”,因为|pict2e.sty|包至少和重新实现|{picture}|环境一样出色。相反,这个包背后的想法是展示一个前端如何实现的简单演示。

% % 实际上，\tikzname\ 是 \pgfname\ 唯一的“严肃”前端。它使你能够访问 \pgfname\ 的所有功能，但它旨在易于使用。其语法是 \textsc{metafont} 和 \textsc{pstricks} 的混合，以及一些我自己的想法。除了 \tikzname\ 之外还有其他前端，但它们更像是“技术研究”而不是 \tikzname\ 的严肃替代品。特别是，|pgfpict2e| 前端使用 \pgfname\ 基础层重新实现了标准的 \LaTeX\ |{picture}| 环境以及像 |\line| 或 |\vector| 这样的命令。这个层次并不真正“必要”，因为 |pict2e.sty| 包至少能做得和重新实现 |{picture}| 环境一样好。相反，这个包背后的理念是展示如何可以实现一个前端。



% Since most users will only use \tikzname\ and almost no one will use the system
% layer directly, this manual is mainly about \tikzname\ in the first parts; the
% basic layer and the system layer are explained at the end.

% 由于大多数用户只会使用\tikzname ,几乎没有人会直接使用系统层,所以在前面部分这本手册主要关于\tikzname ;基本层和系统层在后面解释。

% % 由于大多数用户只会使用 \tikzname\，几乎没有人会直接使用系统层，所以这个手册的主要内容是关于 \tikzname\ 的第一部分；基础层和系统层在最后解释。

