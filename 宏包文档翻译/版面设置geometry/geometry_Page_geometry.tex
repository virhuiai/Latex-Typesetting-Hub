\section{Page geometry\hfill 页面布局}

\columnratio{0.55}
\begin{paracol}{2}
Figure~\ref{fig:layout} shows the page layout dimensions defined
in the \Gm\ package.
The page layout contains a \gpart{total body} (printable area) and \gpart{margins}. 
The \gpart{total body} consists of a \gpart{body} (text area) with an
optional \gpart{header}, \gpart{footer} and marginal notes (marginpar).
There are four margins: \gpart{left}, \gpart{right}, \gpart{top} and
\gpart{bottom}. For twosided documents, horizontal
margins should be called \gpart{inner} and \gpart{outer}.
\switchcolumn
图~\ref{fig:layout}展示了\Gm\ 宏包中定义的页面布局尺寸。
页面布局包括一个\gpart{总体正文}（可打印区域）和\gpart{页边距}。
\gpart{总体正文}包括一个\gpart{正文}（文本区域），还可以有可选的\gpart{页眉}、\gpart{页脚}和边注（marginpar）。
有四个边距：\gpart{左边距}、\gpart{右边距}、\gpart{顶边距}和\gpart{底边距}。对于双面文档，水平的边距应称为\gpart{内边距}和\gpart{外边距}。
\switchcolumn[0]*
\begin{quote}
\begin{tabular}{rcl}
\gpart{paper}&:&\gpart{total body} and
\gpart{margins}\\
\gpart{total body}&:&\gpart{body} (text area)\quad
(optional \gpart{head}, \gpart{foot} and \gpart{marginpar})\\
\gpart{margins}&:&\gpart{left} (\gpart{inner}), 
\gpart{right} (\gpart{outer}), \gpart{top} and \gpart{bottom}
\end{tabular}
\end{quote}
\switchcolumn
\begin{quote}
\begin{tabular}{rcl}
\gpart{纸张} & : & \gpart{总体正文}和\gpart{页边距} \\
\gpart{总体正文} & : & \gpart{正文}（文本区域）\quad
（可选的\gpart{页眉}、\gpart{页脚}和\gpart{边注}） \\
\gpart{页边距} & : & \gpart{左边距}（\gpart{内边距}）、
\gpart{右边距}（\gpart{外边距}）、\gpart{顶边距}和\gpart{底边距}
\end{tabular}
\end{quote}
%%%%%%%%%
\switchcolumn[0]*
Each margin is measured from the corresponding edge of a paper. 
For example, left margin (inner margin) means a horizontal distance
between the left (inner) edge of the paper and that of the total body.
Therefore the left and top margins defined in \Gm\ are different
from the native dimensions \cs{leftmargin} and \cs{topmargin}.
The size of a body (text area) can be modified by \cs{textwidth} and
\cs{textheight}. 
The dimensions for paper, total body and margins have the following
relations.
\switchcolumn
每个边距都是从纸张的相应边缘测量的。例如，左边距（内边距）表示纸张的左（内）边缘与总体正文的左（内）边缘之间的水平距离。因此，在\Gm\ 中定义的左边距和顶边距与原生尺寸\cs{leftmargin}和\cs{topmargin}是不同的。正文（文本区域）的大小可以通过\cs{textwidth}和\cs{textheight}进行修改。纸张、总体正文和边距的尺寸具有以下关系。
\switchcolumn[0]*
\begin{eqnarray}
 \label{eq:paperwidth}
 |paperwidth| &=& |left|+|width|+|right| \\
 |paperheight| &=& |top|+|height|+|bottom|
 \label{eq:paperheight}
\end{eqnarray}
\switchcolumn
\begin{eqnarray}
\label{eq:paperwidth}
|纸张宽度| &=& |左边距|+|正文宽度|+|右边距| \\
|纸张高度| &=& |顶边距|+|正文高度|+|底边距|
\label{eq:paperheight}
\end{eqnarray}


%%%%%%%%%

%%%%%%%%%
\end{paracol}


    
\begin{figure}
 \centering\small
 {\unitlength=.65pt
 \begin{picture}(450,250)(0,-10)
 \put(20,0){\framebox(170,230){}}
 \put(20,235){\makebox(170,230)[br]{\gpart{paper}}}
 \begingroup\thicklines
 \put(40,30){\framebox(120,170){}}\endgroup
 \put(40,30){\makebox(120,165)[tr]{\gpart{total body}~}}
 \put(45,30){\makebox(0,170)[l]{|height|}}
 \put(40,35){\makebox(120,0)[bc]{|width|}}
 \put(50,-20){\makebox(120,0)[bc]{|paperwidth|}}
 \put(10,45){\makebox(0,170)[r]{|paperheight|}}
 \put(90,200){\makebox(0,30)[lc]{|top|}}
 \put(90,0){\makebox(0,30)[lc]{|bottom|}}
 \put(10,70){\makebox(0,0)[r]{|left|}}
 \put(10,55){\makebox(0,0)[r]{(|inner|)}}
 \put(200,70){\makebox(0,0)[l]{|right|}}
 \put(200,55){\makebox(0,0)[l]{(|outer|)}}
 \put(80,230){\vector(0,-1){30}}\put(80,30){\vector(0,-1){30}}
 \put(80,200){\vector(0,1){30}}\put(80,0){\vector(0,1){30}}
 \put(20,70){\vector(1,0){20}}\put(40,70){\vector(-1,0){20}}
 \put(160,70){\vector(1,0){30}}\put(190,70){\vector(-1,0){30}}
 \multiput(160,30)(5,0){24}{\line(1,0){2}}
 \multiput(160,200)(5,0){24}{\line(1,0){2}}
 \begingroup\thicklines
 \put(280,30){\framebox(120,170){}}\endgroup
 \put(283,133){\makebox(0,12)[l]{|textheight|}}
 \put(295,130){\vector(0,-1){100}}\put(295,150){\vector(0,1){50}}
 \multiput(280,220)(5,0){24}{\line(1,0){3}}
 \put(280,208){\makebox(120,20)[bc]{\gpart{head}}}
 \multiput(280,207)(5,0){24}{\line(1,0){3}}
 \put(420,225){\makebox(0,0)[l]{|headheight|}}
 \put(418,225){\line(-2,-1){20}}
 \put(420,213){\makebox(0,0)[l]{|headsep|}}
 \put(418,213){\line(-2,-1){20}}
 \put(420,12){\makebox(0,0)[l]{|footskip|}}
 \put(418,12){\line(-2,1){20}}
 \put(280,40){\makebox(120,140)[c]{\gpart{body}}}
 \put(305,45){\vector(-1,0){25}}\put(375,45){\vector(1,0){25}}
 \put(80,230){\vector(0,-1){30}}\put(80,30){\vector(0,-1){30}}
 \put(280,48){\makebox(120,0)[c]{|textwidth|}}
 \put(280,15){\makebox(120,10)[c]{\gpart{foot}}}
 \multiput(280,14)(5,0){24}{\line(1,0){2}}
 \put(410,30){\dashbox{3}(30,170){}}
 \put(415,30){\makebox(30,170)[l]{\gpart{marginal note}}}
 \put(425,45){\vector(-1,0){15}}\put(425,45){\vector(1,0){15}}
 \put(450,70){\makebox(0,0)[l]{|marginparsep|}}
 \put(448,70){\line(-3,-1){43}}
 \put(450,45){\makebox(0,0)[l]{|marginparwidth|}}
 \end{picture}}
 \caption[Dimension names for \Gm]{%
 \begin{minipage}[t]{.8\textwidth}\raggedright\small
 Dimension names used in the \Gm\ package.
 |width| $=$ |textwidth| and |height| $=$ |textheight| by default.
 |left|, |right|, |top| and |bottom| are margins. 
 If margins on verso pages are swapped by |twoside| option,
 margins specified by |left| and |right| options
 are used for the inside and outside margins respectively.
 |inner| and |outer| are aliases of |left| and |right|
 respectively.
 \end{minipage}}
 \label{fig:layout}
\end{figure}

\columnratio{0.55}
\begin{paracol}{2}
The total body |width| and |height| would be defined:
\begin{eqnarray}
\label{eq:width}
|width| &:=& |textwidth| \quad( +\>  |marginparsep| + |marginparwidth| )\\
|height| &:=& |textheight| \quad(+\> |headheight| + |headsep| + |footskip| )
\label{eq:height}
\end{eqnarray}
\switchcolumn
总体正文的宽度和高度定义如下：
\begin{eqnarray}
\label{eq:width}
|宽度| &:=& |正文宽度| \quad( +> |边注间距| + |边注宽度| )\\
|高度| &:=& |正文高度| \quad(+> |页眉高度| + |页眉与正文的距离| + |页脚与正文的距离| )
\label{eq:height}
\end{eqnarray}


\end{paracol}



    


In Equation (\ref{eq:width}) |width:=textwidth| by default, 
while |marginparsep| and |marginparwidth| are included in |width|
if |includemp| option is set |true|. 
In Equation (\ref{eq:height}), |height:=textheight| by default. 
If |includehead| is set to |true|, |headheight| and |headsep| are
considered as a part of |height|.
In the same way, |includefoot| takes |footskip| into |height|. 
Figure~\ref{fig:includes} shows how these options
work in the vertical direction.
\begin{figure}
 \centering\small
 {\unitlength=.65pt
 \begin{picture}(490,280)(0,-10)
 \put(60,250){\makebox(120,0)[bl]{\textbf{(a)}~\textit{default}}}%
 \put(20,0){\framebox(170,230){}}
 \put(20,230){\makebox(170,15)[r]{\gpart{paper}}}
 \begingroup\thicklines
 \put(40,30){\framebox(120,165){}}\endgroup
 \put(70,165){\vector(0,1){30}}
 \put(55,145){\makebox(0,20)[lc]{|textheight|}}
 \put(70,145){\vector(0,-1){115}}
 \multiput(40,203)(5,0){24}{\line(1,0){3}}
 \multiput(40,213)(5,0){24}{\line(1,0){3}}
 \multiput(40,10)(5,0){24}{\line(1,0){3}}
 \put(40,203){\makebox(120,20)[bc]{\gpart{head}}}
 \put(40,40){\makebox(120,140)[c]{\gpart{body}}}
 \put(40,11){\makebox(120,10)[c]{\gpart{foot}}}
 \put(150,230){\vector(0,-1){35}}\put(150,30){\vector(0,-1){30}}
 \put(150,195){\vector(0,1){35}}\put(150,0){\vector(0,1){30}}
 \put(160,197){\makebox(0,30)[lc]{|top|}}
 \put(160,0){\makebox(0,30)[lc]{|bottom|}}
 \multiput(160,30)(5,0){24}{\line(1,0){2}}
 \multiput(160,195)(5,0){24}{\line(1,0){2}}
 \put(255,250){\makebox(120,0)[bl]
     {\textbf{(b)}~|includehead| and |includefoot|}}%
 \put(260,0){\framebox(170,230){}}
 \put(260,230){\makebox(170,15)[r]{\gpart{paper}}}
 \begingroup\thicklines
 \put(280,30){\framebox(120,165){}}\endgroup
 \put(310,152){\vector(0,1){25}}
 \put(295,130){\makebox(0,20)[lc]{|textheight|}}
 \put(310,130){\vector(0,-1){80}}
 \multiput(280,184)(5,0){24}{\line(1,0){3}}
 \multiput(280,177)(5,0){24}{\line(1,0){3}}
 \multiput(280,50)(5,0){24}{\line(1,0){3}}
 \put(280,184){\makebox(120,10)[c]{\gpart{head}}}
 \put(280,40){\makebox(120,140)[c]{\gpart{body}}}
 \put(400,140){\line(1,1){45}}
 \put(437,187){\makebox(50,10)[l]{\gpart{total body}}}
 \put(280,31){\makebox(120,10)[c]{\gpart{foot}}}
 \put(370,230){\vector(0,-1){35}}\put(370,30){\vector(0,-1){30}}
 \put(370,195){\vector(0,1){35}}\put(370,0){\vector(0,1){30}}
 \put(380,197){\makebox(0,30)[lc]{|top|}}
 \put(380,0){\makebox(0,30)[lc]{|bottom|}}
 \end{picture}}
 \caption[An effect of \texttt{includehead} and \texttt{includefoot}.]{%
 \begin{minipage}[t]{.8\textwidth}\raggedright\small
   |includehead| and |includefoot| include the head and foot respectively
   into \gpart{total body}. \textbf{(a)} |height| $=$ |textheight| (default).
   \textbf{(b)} |height| $=$ |textheight| $+$ |headheight| $+$ |headsep| $+$ 
   |footskip| if |includehead| and |includefoot|. If the top and bottom
   margins are specified, |includehead| and |includefoot| result in
   shorter |textheight|.
 \end{minipage}}
 \label{fig:includes}
\end{figure}

Thus, the page layout consists of three parts (lengths) in each
direction: one body and two margins. If the two of them are explicitly
specified, the other length is obvious and no need to be specified.
Figure~\ref{fig:Labc} shows a simple model of page dimensions. 
When a length |L| is given and is partitioned into the body |b|, the
margins |a| and |c|, it's obvious that
\begin{equation}
  |L|=|a|+|b|+|c|  \label{eq:Labc}
\end{equation}
The specification with two of the three (|a|,|b| and |c|) fixed
explicitly is solvable. If two or more are left unspecified
or `underspecified', Equation~(\ref{eq:Labc}) cannot be solved
without any other relation between them. If all of them are
specified, then it needs to check whether or not they
satisfy Equation~(\ref{eq:Labc}), that is too much specification or
`overspecified'.
\begin{figure}
 \centering
 {\unitlength=0.8pt
 \begin{picture}(300,60)(0,-5)
 \begingroup\linethickness{5pt}
 \put(0,5){\textcolor{green}{\line(1,0){60}}}
 \put(60,5){\textcolor{black}{\line(1,0){160}}}
 \put(220,5){\textcolor{green}{\line(1,0){80}}}
 \endgroup
 \put(0,15){\makebox(60,10)[b]{|a|}}
 \put(60,0){\line(0,1){20}}
 \put(60,15){\makebox(160,10)[b]{|b|}}
 \put(220,0){\line(0,1){20}}
 \put(220,15){\makebox(80,10)[b]{|c|}}
 \put(0,0){\line(0,1){50}}
 \put(150,35){\vector(-1,0){150}}
 \put(0,40){\makebox(300,10){|L|}}
 \put(150,35){\vector(1,0){150}}
 \put(300,0){\line(0,1){50}}
 \end{picture}}
 \caption{A simple model of page dimensions.}
 \label{fig:Labc}
\end{figure}

The \Gm\ package has auto-completion mechanism that saves the
trouble of specifying the page layout dimensions. For example,
you can set
\begin{quote}
 |\usepackage[width=14cm, left=3cm]{geometry}|
\end{quote}
on A4 paper. In this case you don't have to set the right margin
The details of auto-completion will be described in
Section~\ref{sec:rules}.